function getGlobal(){return"undefined"!=typeof window&&null!==window?window:"undefined"!=typeof self&&null!==self?self:global}function getGlobal(){return"undefined"!=typeof window&&null!==window?window:"undefined"!=typeof self&&null!==self?self:global}function debug(a){self.postMessage({debug:1,message:a})}LmvVector3=function(a,b,c){this.x=a||0,this.y=b||0,this.z=c||0},LmvVector3.prototype={constructor:LmvVector3,set:function(a,b,c){return this.x=a,this.y=b,this.z=c,this},setX:function(a){return this.x=a,this},setY:function(a){return this.y=a,this},setZ:function(a){return this.z=a,this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;default:throw new Error("index is out of range: "+a)}},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+a)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(a){return this.x=a.x,this.y=a.y,this.z=a.z,this},add:function(a,b){return void 0!==b?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b)):(this.x+=a.x,this.y+=a.y,this.z+=a.z,this)},addScalar:function(a){return this.x+=a,this.y+=a,this.z+=a,this},addVectors:function(a,b){return this.x=a.x+b.x,this.y=a.y+b.y,this.z=a.z+b.z,this},addScaledVector:function(a,b){return this.x+=a.x*b,this.y+=a.y*b,this.z+=a.z*b,this},sub:function(a,b){return void 0!==b?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b)):(this.x-=a.x,this.y-=a.y,this.z-=a.z,this)},subScalar:function(a){return this.x-=a,this.y-=a,this.z-=a,this},subVectors:function(a,b){return this.x=a.x-b.x,this.y=a.y-b.y,this.z=a.z-b.z,this},multiply:function(a,b){return void 0!==b?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(a,b)):(this.x*=a.x,this.y*=a.y,this.z*=a.z,this)},multiplyScalar:function(a){return this.x*=a,this.y*=a,this.z*=a,this},multiplyVectors:function(a,b){return this.x=a.x*b.x,this.y=a.y*b.y,this.z=a.z*b.z,this},applyMatrix3:function(a){var b=this.x,c=this.y,d=this.z,e=a.elements;return this.x=e[0]*b+e[3]*c+e[6]*d,this.y=e[1]*b+e[4]*c+e[7]*d,this.z=e[2]*b+e[5]*c+e[8]*d,this},applyMatrix4:function(a){var b=this.x,c=this.y,d=this.z,e=a.elements;return this.x=e[0]*b+e[4]*c+e[8]*d+e[12],this.y=e[1]*b+e[5]*c+e[9]*d+e[13],this.z=e[2]*b+e[6]*c+e[10]*d+e[14],this},applyProjection:function(a){var b=this.x,c=this.y,d=this.z,e=a.elements,f=1/(e[3]*b+e[7]*c+e[11]*d+e[15]);return this.x=(e[0]*b+e[4]*c+e[8]*d+e[12])*f,this.y=(e[1]*b+e[5]*c+e[9]*d+e[13])*f,this.z=(e[2]*b+e[6]*c+e[10]*d+e[14])*f,this},applyQuaternion:function(a){var b=this.x,c=this.y,d=this.z,e=a.x,f=a.y,g=a.z,h=a.w,i=h*b+f*d-g*c,j=h*c+g*b-e*d,k=h*d+e*c-f*b,l=-e*b-f*c-g*d;return this.x=i*h+l*-e+j*-g-k*-f,this.y=j*h+l*-f+k*-e-i*-g,this.z=k*h+l*-g+i*-f-j*-e,this},transformDirection:function(a){var b=this.x,c=this.y,d=this.z,e=a.elements;return this.x=e[0]*b+e[4]*c+e[8]*d,this.y=e[1]*b+e[5]*c+e[9]*d,this.z=e[2]*b+e[6]*c+e[10]*d,this.normalize(),this},divide:function(a){return this.x/=a.x,this.y/=a.y,this.z/=a.z,this},divideScalar:function(a){if(0!==a){var b=1/a;this.x*=b,this.y*=b,this.z*=b}else this.x=0,this.y=0,this.z=0;return this},min:function(a){return this.x>a.x&&(this.x=a.x),this.y>a.y&&(this.y=a.y),this.z>a.z&&(this.z=a.z),this},max:function(a){return this.x<a.x&&(this.x=a.x),this.y<a.y&&(this.y=a.y),this.z<a.z&&(this.z=a.z),this},clamp:function(a,b){return this.x<a.x?this.x=a.x:this.x>b.x&&(this.x=b.x),this.y<a.y?this.y=a.y:this.y>b.y&&(this.y=b.y),this.z<a.z?this.z=a.z:this.z>b.z&&(this.z=b.z),this},clampScalar:function(){var a,b;return function(c,d){return void 0===a&&(a=new LmvVector3,b=new LmvVector3),a.set(c,c,c),b.set(d,d,d),this.clamp(a,b)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(a){var b=this.length();return 0!==b&&a!==b&&this.multiplyScalar(a/b),this},lerp:function(a,b){return this.x+=(a.x-this.x)*b,this.y+=(a.y-this.y)*b,this.z+=(a.z-this.z)*b,this},lerpVectors:function(a,b,c){return this.subVectors(b,a).multiplyScalar(c).add(a),this},cross:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(a,b);var c=this.x,d=this.y,e=this.z;return this.x=d*a.z-e*a.y,this.y=e*a.x-c*a.z,this.z=c*a.y-d*a.x,this},crossVectors:function(a,b){var c=a.x,d=a.y,e=a.z,f=b.x,g=b.y,h=b.z;return this.x=d*h-e*g,this.y=e*f-c*h,this.z=c*g-d*f,this},projectOnVector:function(){var a,b;return function(c){return void 0===a&&(a=new LmvVector3),a.copy(c).normalize(),b=this.dot(a),this.copy(a).multiplyScalar(b)}}(),projectOnPlane:function(){var a;return function(b){return void 0===a&&(a=new LmvVector3),a.copy(this).projectOnVector(b),this.sub(a)}}(),reflect:function(){var a;return function(b){return void 0===a&&(a=new LmvVector3),this.sub(a.copy(b).multiplyScalar(2*this.dot(b)))}}(),distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x,c=this.y-a.y,d=this.z-a.z;return b*b+c*c+d*d},setEulerFromRotationMatrix:function(a,b){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(a,b){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(a){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(a)},getScaleFromMatrix:function(a){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(a)},getColumnFromMatrix:function(a,b){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(a,b)},setFromMatrixPosition:function(a){return this.x=a.elements[12],this.y=a.elements[13],this.z=a.elements[14],this},setFromMatrixScale:function(a){var b=this.set(a.elements[0],a.elements[1],a.elements[2]).length(),c=this.set(a.elements[4],a.elements[5],a.elements[6]).length(),d=this.set(a.elements[8],a.elements[9],a.elements[10]).length();return this.x=b,this.y=c,this.z=d,this},setFromMatrixColumn:function(a,b){var c=4*a,d=b.elements;return this.x=d[c],this.y=d[c+1],this.z=d[c+2],this},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z},fromArray:function(a,b){return void 0===b&&(b=0),this.x=a[b],this.y=a[b+1],this.z=a[b+2],this},toArray:function(a,b){return void 0===a&&(a=[]),void 0===b&&(b=0),a[b]=this.x,a[b+1]=this.y,a[b+2]=this.z,a},fromAttribute:function(a,b,c){return void 0===c&&(c=0),b=b*a.itemSize+c,this.x=a.array[b],this.y=a.array[b+1],this.z=a.array[b+2],this}};var LmvBox3=function(a,b){this.min=void 0!==a?a:new LmvVector3(1/0,1/0,1/0),this.max=void 0!==b?b:new LmvVector3(-(1/0),-(1/0),-(1/0))};LmvBox3.prototype={constructor:LmvBox3,set:function(a,b){return this.min.copy(a),this.max.copy(b),this},setFromPoints:function(a){this.makeEmpty();for(var b=0,c=a.length;b<c;b++)this.expandByPoint(a[b]);return this},setFromArray:function(a,b){return this.min.x=a[b],this.min.y=a[b+1],this.min.z=a[b+2],this.max.x=a[b+3],this.max.y=a[b+4],this.max.z=a[b+5],this},copyToArray:function(a,b){a[b]=this.min.x,a[b+1]=this.min.y,a[b+2]=this.min.z,a[b+3]=this.max.x,a[b+4]=this.max.y,a[b+5]=this.max.z},setFromCenterAndSize:function(){var a=new LmvVector3;return function(b,c){var d=a.copy(c).multiplyScalar(.5);return this.min.copy(b).sub(d),this.max.copy(b).add(d),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.min.copy(a.min),this.max.copy(a.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-(1/0),this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},center:function(a){var b=a||new LmvVector3;return b.addVectors(this.min,this.max).multiplyScalar(.5)},size:function(a){var b=a||new LmvVector3;return b.subVectors(this.max,this.min)},expandByPoint:function(a){return this.min.min(a),this.max.max(a),this},expandByVector:function(a){return this.min.sub(a),this.max.add(a),this},expandByScalar:function(a){return this.min.addScalar(-a),this.max.addScalar(a),this},containsPoint:function(a){return!(a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y||a.z<this.min.z||a.z>this.max.z)},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y&&this.min.z<=a.min.z&&a.max.z<=this.max.z},getParameter:function(a,b){var c=b||new LmvVector3;return c.set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y),(a.z-this.min.z)/(this.max.z-this.min.z))},isIntersectionBox:function(a){return!(a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y||a.max.z<this.min.z||a.min.z>this.max.z)},clampPoint:function(a,b){var c=b||new LmvVector3;return c.copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new LmvVector3;return function(b){var c=a.copy(b).clamp(this.min,this.max);return c.sub(b).length()}}(),intersect:function(a){return this.min.max(a.min),this.max.min(a.max),this},union:function(a){return this.min.min(a.min),this.max.max(a.max),this},applyMatrix4:function(){var a=[new LmvVector3,new LmvVector3,new LmvVector3,new LmvVector3,new LmvVector3,new LmvVector3,new LmvVector3,new LmvVector3];return function(b){return a[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(b),a[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(b),a[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(b),a[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(b),a[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(b),a[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(b),a[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(b),a[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(b),this.makeEmpty(),this.setFromPoints(a),this}}(),translate:function(a){return this.min.add(a),this.max.add(a),this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)}},LmvMatrix4=function(a){a?this.elements=new Float64Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]):this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])},LmvMatrix4.prototype={constructor:LmvMatrix4,set:function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=this.elements;return q[0]=a,q[4]=b,q[8]=c,q[12]=d,q[1]=e,q[5]=f,q[9]=g,q[13]=h,q[2]=i,q[6]=j,q[10]=k,q[14]=l,q[3]=m,q[7]=n,q[11]=o,q[15]=p,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},copy:function(a){return this.elements.set(a.elements),this},makeRotationFromQuaternion:function(a){var b=this.elements,c=a.x,d=a.y,e=a.z,f=a.w,g=c+c,h=d+d,i=e+e,j=c*g,k=c*h,l=c*i,m=d*h,n=d*i,o=e*i,p=f*g,q=f*h,r=f*i;return b[0]=1-(m+o),b[4]=k-r,b[8]=l+q,b[1]=k+r,b[5]=1-(j+o),b[9]=n-p,b[2]=l-q,b[6]=n+p,b[10]=1-(j+m),b[3]=0,b[7]=0,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,this},multiply:function(a){return this.multiplyMatrices(this,a)},multiplyMatrices:function(a,b){var c=a.elements,d=b.elements,e=this.elements,f=c[0],g=c[4],h=c[8],i=c[12],j=c[1],k=c[5],l=c[9],m=c[13],n=c[2],o=c[6],p=c[10],q=c[14],r=c[3],s=c[7],t=c[11],u=c[15],v=d[0],w=d[4],x=d[8],y=d[12],z=d[1],A=d[5],B=d[9],C=d[13],D=d[2],E=d[6],F=d[10],G=d[14],H=d[3],I=d[7],J=d[11],K=d[15];return e[0]=f*v+g*z+h*D+i*H,e[4]=f*w+g*A+h*E+i*I,e[8]=f*x+g*B+h*F+i*J,e[12]=f*y+g*C+h*G+i*K,e[1]=j*v+k*z+l*D+m*H,e[5]=j*w+k*A+l*E+m*I,e[9]=j*x+k*B+l*F+m*J,e[13]=j*y+k*C+l*G+m*K,e[2]=n*v+o*z+p*D+q*H,e[6]=n*w+o*A+p*E+q*I,e[10]=n*x+o*B+p*F+q*J,e[14]=n*y+o*C+p*G+q*K,e[3]=r*v+s*z+t*D+u*H,e[7]=r*w+s*A+t*E+u*I,e[11]=r*x+s*B+t*F+u*J,e[15]=r*y+s*C+t*G+u*K,this},multiplyToArray:function(a,b,c){var d=this.elements;return this.multiplyMatrices(a,b),c[0]=d[0],c[1]=d[1],c[2]=d[2],c[3]=d[3],c[4]=d[4],c[5]=d[5],c[6]=d[6],c[7]=d[7],c[8]=d[8],c[9]=d[9],c[10]=d[10],c[11]=d[11],c[12]=d[12],c[13]=d[13],c[14]=d[14],c[15]=d[15],this},multiplyScalar:function(a){var b=this.elements;return b[0]*=a,b[4]*=a,b[8]*=a,b[12]*=a,b[1]*=a,b[5]*=a,b[9]*=a,b[13]*=a,b[2]*=a,b[6]*=a,b[10]*=a,b[14]*=a,b[3]*=a,b[7]*=a,b[11]*=a,b[15]*=a,this},determinant:function(){var a=this.elements,b=a[0],c=a[4],d=a[8],e=a[12],f=a[1],g=a[5],h=a[9],i=a[13],j=a[2],k=a[6],l=a[10],m=a[14],n=a[3],o=a[7],p=a[11],q=a[15];return n*(+e*h*k-d*i*k-e*g*l+c*i*l+d*g*m-c*h*m)+o*(+b*h*m-b*i*l+e*f*l-d*f*m+d*i*j-e*h*j)+p*(+b*i*k-b*g*m-e*f*k+c*f*m+e*g*j-c*i*j)+q*(-d*g*j-b*h*k+b*g*l+d*f*k-c*f*l+c*h*j)},transpose:function(){var a,b=this.elements;return a=b[1],b[1]=b[4],b[4]=a,a=b[2],b[2]=b[8],b[8]=a,a=b[6],b[6]=b[9],b[9]=a,a=b[3],b[3]=b[12],b[12]=a,a=b[7],b[7]=b[13],b[13]=a,a=b[11],b[11]=b[14],b[14]=a,this},flattenToArrayOffset:function(a,b){var c=this.elements;return a[b]=c[0],a[b+1]=c[1],a[b+2]=c[2],a[b+3]=c[3],a[b+4]=c[4],a[b+5]=c[5],a[b+6]=c[6],a[b+7]=c[7],a[b+8]=c[8],a[b+9]=c[9],a[b+10]=c[10],a[b+11]=c[11],a[b+12]=c[12],a[b+13]=c[13],a[b+14]=c[14],a[b+15]=c[15],a},setPosition:function(a){var b=this.elements;return b[12]=a.x,b[13]=a.y,b[14]=a.z,this},getInverse:function(a,b){var c=this.elements,d=a.elements,e=d[0],f=d[4],g=d[8],h=d[12],i=d[1],j=d[5],k=d[9],l=d[13],m=d[2],n=d[6],o=d[10],p=d[14],q=d[3],r=d[7],s=d[11],t=d[15];c[0]=k*p*r-l*o*r+l*n*s-j*p*s-k*n*t+j*o*t,c[4]=h*o*r-g*p*r-h*n*s+f*p*s+g*n*t-f*o*t,c[8]=g*l*r-h*k*r+h*j*s-f*l*s-g*j*t+f*k*t,c[12]=h*k*n-g*l*n-h*j*o+f*l*o+g*j*p-f*k*p,c[1]=l*o*q-k*p*q-l*m*s+i*p*s+k*m*t-i*o*t,c[5]=g*p*q-h*o*q+h*m*s-e*p*s-g*m*t+e*o*t,c[9]=h*k*q-g*l*q-h*i*s+e*l*s+g*i*t-e*k*t,c[13]=g*l*m-h*k*m+h*i*o-e*l*o-g*i*p+e*k*p,c[2]=j*p*q-l*n*q+l*m*r-i*p*r-j*m*t+i*n*t,c[6]=h*n*q-f*p*q-h*m*r+e*p*r+f*m*t-e*n*t,c[10]=f*l*q-h*j*q+h*i*r-e*l*r-f*i*t+e*j*t,c[14]=h*j*m-f*l*m-h*i*n+e*l*n+f*i*p-e*j*p,c[3]=k*n*q-j*o*q-k*m*r+i*o*r+j*m*s-i*n*s,c[7]=f*o*q-g*n*q+g*m*r-e*o*r-f*m*s+e*n*s,c[11]=g*j*q-f*k*q-g*i*r+e*k*r+f*i*s-e*j*s,c[15]=f*k*m-g*j*m+g*i*n-e*k*n-f*i*o+e*j*o;var u=e*c[0]+i*c[4]+m*c[8]+q*c[12];if(0==u){var v="Matrix4.getInverse(): can't invert matrix, determinant is 0";if(b)throw new Error(v);return console.warn(v),this.identity(),this}return this.multiplyScalar(1/u),this},scale:function(a){var b=this.elements,c=a.x,d=a.y,e=a.z;return b[0]*=c,b[4]*=d,b[8]*=e,b[1]*=c,b[5]*=d,b[9]*=e,b[2]*=c,b[6]*=d,b[10]*=e,b[3]*=c,b[7]*=d,b[11]*=e,this},makeTranslation:function(a,b,c){return this.set(1,0,0,a,0,1,0,b,0,0,1,c,0,0,0,1),this},makeRotationX:function(a){var b=Math.cos(a),c=Math.sin(a);return this.set(1,0,0,0,0,b,-c,0,0,c,b,0,0,0,0,1),this},makeRotationY:function(a){var b=Math.cos(a),c=Math.sin(a);return this.set(b,0,c,0,0,1,0,0,-c,0,b,0,0,0,0,1),this},makeRotationZ:function(a){var b=Math.cos(a),c=Math.sin(a);return this.set(b,-c,0,0,c,b,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(a,b){var c=Math.cos(b),d=Math.sin(b),e=1-c,f=a.x,g=a.y,h=a.z,i=e*f,j=e*g;return this.set(i*f+c,i*g-d*h,i*h+d*g,0,i*g+d*h,j*g+c,j*h-d*f,0,i*h-d*g,j*h+d*f,e*h*h+c,0,0,0,0,1),this},makeScale:function(a,b,c){return this.set(a,0,0,0,0,b,0,0,0,0,c,0,0,0,0,1),this},compose:function(a,b,c){return this.makeRotationFromQuaternion(b),this.scale(c),this.setPosition(a),this},transformPoint:function(a){var b=a.x,c=a.y,d=a.z,e=this.elements;return a.x=e[0]*b+e[4]*c+e[8]*d+e[12],a.y=e[1]*b+e[5]*c+e[9]*d+e[13],a.z=e[2]*b+e[6]*c+e[10]*d+e[14],a},transformDirection:function(a){var b=a.x,c=a.y,d=a.z,e=this.elements;a.x=e[0]*b+e[4]*c+e[8]*d,a.y=e[1]*b+e[5]*c+e[9]*d,a.z=e[2]*b+e[6]*c+e[10]*d;var f=Math.sqrt(a.x*a.x+a.y*a.y+a.z*a.z);if(f>0){var g=1/f;a.x*=g,a.y*=g,a.z*=g}return a},fromArray:function(a){return this.elements.set(a),this},toArray:function(){var a=this.elements;return[a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15]]},clone:function(){return new LmvMatrix4(this.elements instanceof Float64Array).fromArray(this.elements)}};/*!
 * @license
 * Copyright 2016 Autodesk, Inc.
 * All rights reserved.
 * 
 * This computer source code and related instructions and comments are the
 * unpublished confidential and proprietary information of Autodesk, Inc.
 * and are protected under Federal copyright and state trade secret law.
 * They may not be disclosed to, copied or used by any third party without
 * the prior written consent of Autodesk, Inc.
 */
var WGS=function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){"use strict";var d=c(1),e=c(2);a.exports={InstanceTreeStorage:d.InstanceTreeStorage,InstanceTreeAccess:d.InstanceTreeAccess,BVHBuilder:e.BVHBuilder,NodeArray:e.NodeArray}},function(a,b){"use strict";function c(a,b){this.nodes=[],this.nextNode=0,this.children=[],this.nextChild=0,this.dbIdToIndex={},this.names=[],this.s2i={},this.strings=[],this.nameSuffixes=[],this.getIndex(0)}function d(a){var b=new Int32Array(a.length);return b.set(a),b}function e(a,b,c){this.nodes=a.nodes,this.children=a.children,this.dbIdToIndex=a.dbIdToIndex,this.names=a.names,this.nameSuffixes=a.nameSuffixes,this.strings=a.strings,this.rootId=b,this.numNodes=this.nodes.length/f,this.visibleIds=null,this.nodeBoxes=c||new Float32Array(6*this.numNodes)}var f=5,g=0,h=1,i=2,j=3,k=4;c.prototype.getIndex=function(a){var b=this.dbIdToIndex[a];if(b)return b;b=this.nextNode++,this.nodes.push(a);for(var c=1;c<f;c++)this.nodes.push(0);return this.dbIdToIndex[a]=b,b},c.prototype.setNode=function(a,b,c,d,e,g){var l=this.getIndex(a),m=l*f,n=e.length,o=g&&g.length;o&&(n+=g.length),this.nodes[m+h]=b,this.nodes[m+i]=this.nextChild,this.nodes[m+j]=o?-n:n,this.nodes[m+k]=d;for(var p=0;p<e.length;p++)this.children[this.nextChild++]=this.getIndex(e[p]);if(o)for(var p=0;p<g.length;p++)this.children[this.nextChild++]=-g[p]-1;this.nextChild>this.children.length&&console.error("Child index out of bounds -- should not happen"),this.processName(l,c)},c.prototype.processName=function(a,b){var c,d,e=-1,f=-1;if(b&&(f=b.lastIndexOf("]"),e=b.lastIndexOf("["),e!==-1&&f!==-1||(e=b.lastIndexOf(":"),f=b.length)),e>=0&&f>e){c=b.slice(0,e+1);var g=b.slice(e+1,f);d=parseInt(g,10),d&&d+""===g||(c=b,d=0)}else c=b,d=0;var h=this.s2i[c];void 0===h&&(this.strings.push(c),h=this.strings.length-1,this.s2i[c]=h),this.names[a]=h,this.nameSuffixes[a]=d},c.prototype.flatten=function(a,b,c,e,f,g){this.nodes=d(this.nodes),this.children=d(this.children),this.names=d(this.names),this.nameSuffixes=d(this.nameSuffixes),this.s2i=null},e.prototype.getNumNodes=function(a){return this.numNodes},e.prototype.getIndex=function(a){return this.dbIdToIndex[a]},e.prototype.name=function(a){var b=this.dbIdToIndex[a],c=this.strings[this.names[b]],d=this.nameSuffixes[b];if(d){var e=c.charAt(c.length-1);return"["===e?c+d+"]":c+d}return c},e.prototype.getParentId=function(a){return this.nodes[this.dbIdToIndex[a]*f+h]},e.prototype.getNodeFlags=function(a){return this.nodes[this.dbIdToIndex[a]*f+k]},e.prototype.setNodeFlags=function(a,b){this.nodes[this.dbIdToIndex[a]*f+k]=b},e.prototype.getNumChildren=function(a){var b=this.dbIdToIndex[a],c=this.nodes[b*f+j];if(c>=0)return c;var d=this.nodes[b*f+i];c=Math.abs(c);for(var e=0,g=0;g<c;g++){var h=this.children[d+g];if(h<0)break;e++}return e},e.prototype.getNumFragments=function(a){var b=this.dbIdToIndex[a],c=this.nodes[b*f+j];if(c>=0)return 0;var d=this.nodes[b*f+i];c=Math.abs(c);for(var e=0,g=c-1;g>=0;g--){var h=this.children[d+g];if(h>=0)break;e++}return e},e.prototype.getNodeBox=function(a,b){for(var c=6*this.getIndex(a),d=0;d<6;d++)b[d]=this.nodeBoxes[c+d]},e.prototype.getVisibleIds=function(){return this.visibleIds||(this.visibleIds=Object.keys(this.dbIdToIndex).map(function(a){return parseInt(a)})),this.visibleIds},e.prototype.enumNodeChildren=function(a,b){var c=this.dbIdToIndex[a],d=this.nodes[c*f+i],e=this.nodes[c*f+j];e=Math.abs(e);for(var h=0;h<e;h++){var k=this.children[d+h];if(k<0)break;var l=this.nodes[k*f+g];b(l,a,c)}},e.prototype.enumNodeFragments=function(a,b){var c=this.dbIdToIndex[a],d=this.nodes[c*f+i],e=this.nodes[c*f+j];if(e<0){e=-e;for(var g=0;g<e;g++){var h=this.children[d+g];h>0||b(-h-1,a,c)}}},e.prototype.computeBoxes=function(a){function b(a,b,c){var f=e.getIndex(a);d(a,f);for(var h=6*c,i=6*f,j=0;j<3;j++)g[h+j]>g[i+j]&&(g[h+j]=g[i+j]),g[h+j+3]<g[i+j+3]&&(g[h+j+3]=g[i+j+3])}function c(b,c,d){for(var e=6*b,f=6*d,h=0;h<3;h++)g[f+h]>a[e+h]&&(g[f+h]=a[e+h]),g[f+h+3]<a[e+h+3]&&(g[f+h+3]=a[e+h+3])}function d(a,d){var f=6*d;g[f]=g[f+1]=g[f+2]=1/0,g[f+3]=g[f+4]=g[f+5]=-(1/0),e.getNumChildren(a)&&e.enumNodeChildren(a,b,!0),e.getNumFragments(a)&&e.enumNodeFragments(a,c)}var e=this,f=e.getIndex(e.rootId),g=e.nodeBoxes;d(e.rootId,f)},a.exports={InstanceTreeStorage:c,InstanceTreeAccess:e}},function(a,b){"use strict";function c(a,b){b?this.bytes_per_node=32:this.bytes_per_node=36;var c,d;a instanceof ArrayBuffer?(c=a.byteLength/this.bytes_per_node,d=a,this.nodeCount=c):(c=0|a,d=new ArrayBuffer(this.bytes_per_node*c),this.nodeCount=0),this.nodeCapacity=c,this.nodesRaw=d,this.is_lean_node=b,this.node_stride=this.bytes_per_node/4,this.node_stride_short=this.bytes_per_node/2,this.nodesF=new Float32Array(this.nodesRaw),this.nodesI=new Int32Array(this.nodesRaw),this.nodesS=new Uint16Array(this.nodesRaw)}function d(a,b){this.boxes=a.boxes,this.polygonCounts=a.polygonCounts,this.hasPolygonCounts=!!this.polygonCounts,this.materials=a.materials,this.materialDefs=b,this.count=a.length,this.boxStride=6}function e(a,b,c){this.finfo=c||new d(a,b),this.prim_count=this.finfo.getCount(),this.frags_per_leaf_node=-1,this.frags_per_inner_node=-1,this.nodes=null,this.work_buf=new ArrayBuffer(4*this.prim_count),this.sort_prims=new Int32Array(this.work_buf),this.primitives=new Int32Array(this.prim_count),this.centroids=new Float32Array(f*this.prim_count),this.boxv_o=new Float32Array(6),this.boxc_o=new Float32Array(6),this.boxv_t=new Float32Array(6),this.boxc_t=new Float32Array(6),this.recursion_stack=[]}c.prototype.setLeftChild=function(a,b){this.nodesI[a*this.node_stride+6]=b},c.prototype.getLeftChild=function(a){return this.nodesI[a*this.node_stride+6]},c.prototype.setPrimStart=function(a,b){this.is_lean_node?this.nodesI[a*this.node_stride+6]=b:this.nodesI[a*this.node_stride+8]=b},c.prototype.getPrimStart=function(a){return this.is_lean_node?this.nodesI[a*this.node_stride+6]:this.nodesI[a*this.node_stride+8]},c.prototype.setPrimCount=function(a,b){this.nodesS[a*this.node_stride_short+14]=b},c.prototype.getPrimCount=function(a){return this.nodesS[a*this.node_stride_short+14]},c.prototype.setFlags=function(a,b,c,d){this.nodesS[a*this.node_stride_short+15]=d<<3|c<<2|3&b},c.prototype.getFlags=function(a){return this.nodesS[a*this.node_stride_short+15]},c.prototype.setBox0=function(a,b){var c=a*this.node_stride,d=this.nodesF;d[c]=b[0],d[c+1]=b[1],d[c+2]=b[2],d[c+3]=b[3],d[c+4]=b[4],d[c+5]=b[5]},c.prototype.getBoxThree=function(a,b){var c=a*this.node_stride,d=this.nodesF;b.min.x=d[c],b.min.y=d[c+1],b.min.z=d[c+2],b.max.x=d[c+3],b.max.y=d[c+4],b.max.z=d[c+5]},c.prototype.setBoxThree=function(a,b){var c=a*this.node_stride,d=this.nodesF;d[c]=b.min.x,d[c+1]=b.min.y,d[c+2]=b.min.z,d[c+3]=b.max.x,d[c+4]=b.max.y,d[c+5]=b.max.z},c.prototype.makeEmpty=function(a){var b=a*this.node_stride,c=this.nodesI;c[b+6]=-1,c[b+7]=0,this.is_lean_node||(c[b+8]=-1)},c.prototype.realloc=function(a){if(this.nodeCount+a>this.nodeCapacity){var b=0|3*this.nodeCapacity/2;b<this.nodeCount+a&&(b=this.nodeCount+a);var c=new ArrayBuffer(b*this.bytes_per_node),d=new Int32Array(c);d.set(this.nodesI),this.nodeCapacity=b,this.nodesRaw=c,this.nodesF=new Float32Array(c),this.nodesI=d,this.nodesS=new Uint16Array(c)}},c.prototype.nextNodes=function(a){this.realloc(a);var b=this.nodeCount;this.nodeCount+=a;for(var c=0;c<a;c++)this.makeEmpty(b+c);return b},c.prototype.getRawData=function(){return this.nodesRaw.slice(0,this.nodeCount*this.bytes_per_node)};var f=3,g=1e-5,h=1e-5,i=15,j=16,k=function(){function a(a,b,c,d){a[b]=.5*(c[d]+c[d+3]),a[b+1]=.5*(c[d+1]+c[d+4]),a[b+2]=.5*(c[d+2]+c[d+5])}function b(a,b,c){a[0]>b[c]&&(a[0]=b[c]),a[3]<b[c]&&(a[3]=b[c]),a[1]>b[c+1]&&(a[1]=b[c+1]),a[4]<b[c+1]&&(a[4]=b[c+1]),a[2]>b[c+2]&&(a[2]=b[c+2]),a[5]<b[c+2]&&(a[5]=b[c+2])}function c(a,b,c){a[0]>b[c]&&(a[0]=b[c]),a[1]>b[c+1]&&(a[1]=b[c+1]),a[2]>b[c+2]&&(a[2]=b[c+2]),a[3]<b[c+3]&&(a[3]=b[c+3]),a[4]<b[c+4]&&(a[4]=b[c+4]),a[5]<b[c+5]&&(a[5]=b[c+5])}function d(a,b){a[0]>b[0]&&(a[0]=b[0]),a[1]>b[1]&&(a[1]=b[1]),a[2]>b[2]&&(a[2]=b[2]),a[3]<b[3]&&(a[3]=b[3]),a[4]<b[4]&&(a[4]=b[4]),a[5]<b[5]&&(a[5]=b[5])}function e(a,b,c,d){for(var e=0;e<3;e++)a[b+e]=c[d+3+e]-c[d+e]}function f(a,b){a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5]}function k(a){a[0]=w,a[1]=w,a[2]=w,a[3]=-w,a[4]=-w,a[5]=-w}function l(a,b){var c=a[b+3]-a[b],d=a[b+4]-a[b+1],e=a[b+5]-a[b+2];return c<0||d<0||e<0?0:2*(c*d+d*e+e*c)}function m(a){var b=a[3]-a[0],c=a[4]-a[1],d=a[5]-a[2];return b<0||c<0||d<0?0:2*(b*c+c*d+d*b)}function n(){this.vb_left=new Float32Array(6),this.vb_right=new Float32Array(6),this.cb_left=new Float32Array(6),this.cb_right=new Float32Array(6),this.num_left=0,this.best_split=-1,this.best_cost=-1,this.num_bins=-1}function o(){this.box_bbox=new Float32Array(6),this.box_centroid=new Float32Array(6),this.num_prims=0}function p(){this.BL=new Float32Array(6),this.CL=new Float32Array(6),this.NL=0,this.AL=0}function q(a,d,e,f,g,i,j){for(var k=a.centroids,l=a.primitives,m=a.finfo.boxes,n=a.finfo.boxStride,o=j*(1-h)/i[f],p=g[f],q=a.sort_prims,r=d;r<=e;r++){var s=0|l[r],t=o*(k[3*s+f]-p),u=0|t;u<0?u=0:u>=j&&(u=j-1),q[r]=u,y[u].num_prims++,c(y[u].box_bbox,m,s*n),b(y[u].box_centroid,k,3*s)}}function r(a,b,c,e,g,h,i){if(h[e]<a.scene_epsilon)return void(i.best_cost=1/0);var k=j;k>c-b+1&&(k=c-b+1);var l;for(l=0;l<k;l++)y[l].reset();for(l=0;l<k-1;l++)z[l].reset();i.num_bins=k,q(a,b,c,e,g,h,k),f(z[0].BL,y[0].box_bbox),f(z[0].CL,y[0].box_centroid),z[0].AL=m(z[0].BL),z[0].NL=y[0].num_prims;var n;for(l=1;l<k-1;l++){n=y[l];var o=z[l];f(o.BL,z[l-1].BL),d(o.BL,n.box_bbox),o.AL=m(o.BL),f(o.CL,z[l-1].CL),d(o.CL,n.box_centroid),o.NL=z[l-1].NL+n.num_prims}l=k-1,f(A,y[l].box_bbox),f(B,y[l].box_centroid);var p=m(A),r=y[l].num_prims,s=l,t=p*r+z[l-1].AL*z[l-1].NL;for(f(i.vb_right,A),f(i.cb_right,y[l].box_centroid),f(i.vb_left,z[l-1].BL),f(i.cb_left,z[l-1].CL),i.num_left=z[l-1].NL,l-=1;l>=1;l--){n=y[l],d(A,n.box_bbox),d(B,n.box_centroid),p=m(A),r+=n.num_prims;var u=p*r+z[l-1].AL*z[l-1].NL;u<=t&&(t=u,s=l,f(i.vb_right,A),f(i.cb_right,B),f(i.vb_left,z[l-1].BL),f(i.cb_left,z[l-1].CL),i.num_left=z[l-1].NL)}i.best_split=s,i.best_cost=t}function s(a,b,c,d,e,f,g){var h,i,j=a.primitives,k=a.sort_prims,l=0,m=0|b,n=0|g.best_split;for(h=b;h<=c;h++){var o=0|j[h],p=k[h];p<n?j[m++]=o:k[l++]=o}for(i=0;i<l;i++)j[m+i]=k[i]}function t(a,c,d,f,g,h,i,j){var l=a.primitives,m=a.centroids,n=g-f+1;n>a.frags_per_inner_node&&(n=a.frags_per_inner_node),n>j&&(n=j),c.setPrimStart(d,f),c.setPrimCount(d,n),f+=n,k(h);for(var o=f;o<=g;o++)b(h,m,3*l[o]);e(i,0,h,0);var p=0;return i[1]>i[0]&&(p=1),i[2]>i[p]&&(p=2),p}function u(a,b,c,d,f,g,h,j){e(C,0,g,0);var k=a.nodes,l=h?a.frags_per_leaf_node_transparent:a.frags_per_leaf_node,m=h?a.frags_per_inner_node_transparent:a.frags_per_inner_node,o=a.max_polys_per_node,p=0;C[1]>C[0]&&(p=1),C[2]>C[p]&&(p=2),k.setBox0(b,f);var q=0,u=0,v=d-c+1;if(a.finfo.hasPolygonCounts&&a.frags_per_inner_node)for(var w=v<=a.frags_per_inner_node?d:c+a.frags_per_inner_node-1,x=c;x<=w&&(q+=a.finfo.getPolygonCount(a.primitives[x]),u++,!(q>o));x++);var y=v<=l&&q<o||1===v;if(y||j>i||C[p]<a.scene_epsilon)return k.setLeftChild(b,-1),k.setPrimStart(b,c),k.setPrimCount(b,d-c+1),void k.setFlags(b,0,0,h?1:0);m&&(p=t(a,k,b,c,d,g,C,u),c+=k.getPrimCount(b));var z=new n;if(r(a,c,d,p,g,C,z),z.num_bins<0)return void k.setPrimCount(b,k.getPrimCount(b)+d-c+1);s(a,c,d,p,g,C,z);var A=k.nextNodes(2),B=.5*(z.vb_left[3+p]+z.vb_left[p]),D=.5*(z.vb_right[3+p]+z.vb_right[p]);k.setFlags(b,p,B<D?0:1,h?1:0),k.setLeftChild(b,A),a.recursion_stack.push([a,A+1,c+z.num_left,d,z.vb_right,z.cb_right,h,j+1]),a.recursion_stack.push([a,A,c,c+z.num_left-1,z.vb_left,z.cb_left,h,j+1])}function v(d){var f=d.boxv_o,h=d.boxc_o,i=d.boxv_t,j=d.boxc_t;k(f),k(h),k(i),k(j);for(var l=d.centroids,m=d.finfo.boxes,n=d.finfo.boxStride,o=0,p=d.prim_count;o<p;o++)a(l,3*o,m,n*o),o>=d.first_transparent?(b(j,l,3*o),c(i,m,n*o)):(b(h,l,3*o),c(f,m,n*o));e(C,0,d.boxv_o,0);var q=Math.max(C[0],C[1],C[2]);d.scene_epsilon=g*q}var w=1/0;n.prototype.reset=function(){this.num_left=0,this.best_split=-1,this.best_cost=-1,this.num_bins=-1},o.prototype.reset=function(){this.num_prims=0,k(this.box_bbox),k(this.box_centroid)},p.prototype.reset=function(){this.NL=0,this.AL=0,k(this.BL),k(this.CL)};var x,y=[];for(x=0;x<j;x++)y.push(new o);var z=[];for(x=0;x<j-1;x++)z.push(new p);var A=new Float32Array(6),B=new Float32Array(6),C=new Float32Array(3);return{bvh_subdivide:u,compute_boxes:v,box_area:l}}();d.prototype.getCount=function(){return this.count},d.prototype.isTransparent=function(a){return!(!this.materialDefs||!this.materialDefs[this.materials[a]])&&this.materialDefs[this.materials[a]].transparent},d.prototype.getPolygonCount=function(a){return this.polygonCounts[a]},e.prototype.sortPrimitives=function(){var a,b,c=new Float32Array(this.work_buf),d=this.primitives,e=0,f=!0;for(a=0,b=this.prim_count;a<b;a++){d[a]=a;var g=this.finfo.isTransparent(a);g&&e++,f?(c[a]=k.box_area(this.finfo.boxes,this.finfo.boxStride*a),g&&(c[a]=-c[a])):c[a]=g?-1:1}if(f)Array.prototype.sort.call(this.primitives,function(a,b){return c[b]-c[a]});else if(e&&e<this.prim_count){var h=new Int32Array(e),i=0,j=0;for(a=0,b=this.prim_count;a<b;a++)c[a]>=0?d[i++]=d[a]:h[j++]=d[a];d.set(h,this.prim_count-e)}this.first_transparent=this.prim_count-e},e.prototype.build=function(a){function b(b,c){a.hasOwnProperty(b)?e[b]=a[b]:e[b]=c}var d=a&&!!a.useSlimNodes,e=this;if(d)b("frags_per_leaf_node",1),b("frags_per_inner_node",0),b("frags_per_leaf_node_transparent",1),b("frags_per_inner_node_transparent",0),b("max_polys_per_node",1/0);else{var f=a.isWeakDevice?.5:1;b("frags_per_leaf_node",0|32*f),b("frags_per_inner_node",0|this.frags_per_leaf_node),b("frags_per_leaf_node_transparent",this.frags_per_leaf_node),b("frags_per_inner_node_transparent",0),b("max_polys_per_node",0|1e4*f)}if(this.nodes&&this.nodes.is_lean_node==d)this.nodes.nodeCount=0;else{for(var g=this.prim_count/this.frags_per_leaf_node,h=1;h<g;)h*=2;this.nodes=new c(h,!!a&&a.useSlimNodes)}this.sortPrimitives(),k.compute_boxes(this);var i=this.nodes.nextNodes(2);k.bvh_subdivide(this,i,0,this.first_transparent-1,this.boxv_o,this.boxc_o,!1,0);for(var j;this.recursion_stack.length;)j=this.recursion_stack.pop(),k.bvh_subdivide(j[0],j[1],j[2],j[3],j[4],j[5],j[6],j[7]);for(k.bvh_subdivide(this,i+1,this.first_transparent,this.prim_count-1,this.boxv_t,this.boxc_t,!0,0);this.recursion_stack.length;)j=this.recursion_stack.pop(),k.bvh_subdivide(j[0],j[1],j[2],j[3],j[4],j[5],j[6],j[7])},a.exports={NodeArray:c,BVHBuilder:e}}]);"undefined"!=typeof module&&module.exports&&(module.exports=WGS);var AutodeskNamespace=function(a){for(var b=getGlobal(),c=a.split("."),d=0;d<c.length;++d)b[c[d]]=b[c[d]]||{},b=b[c[d]];return b};AutodeskNamespace("Autodesk.Viewing.Private"),AutodeskNamespace("Autodesk.Viewing.Extensions"),AutodeskNamespace("Autodesk.Viewing.Shaders"),AutodeskNamespace("Autodesk.Viewing.UI"),AutodeskNamespace("Autodesk.LMVTK"),Autodesk.Viewing.getGlobal=getGlobal,Autodesk.Viewing.AutodeskNamespace=AutodeskNamespace,Autodesk.Viewing.Private.initializeLegacyNamespaces=function(a){var b=Autodesk.Viewing,c=b.Shaders,d=b.Private;d.InstanceTreeStorage=WGS.InstanceTreeStorage,d.InstanceTreeAccess=WGS.InstanceTreeAccess,d.BVHBuilder=WGS.BVHBuilder,d.NodeArray=WGS.NodeArray,a||(c.PackDepthShaderChunk=WGS.PackDepthShaderChunk,c.TonemapShaderChunk=WGS.TonemapShaderChunk,c.OrderedDitheringShaderChunk=WGS.OrderedDitheringShaderChunk,c.CutPlanesUniforms=WGS.CutPlanesUniforms,c.CutPlanesShaderChunk=WGS.CutPlanesShaderChunk,c.PackNormalsShaderChunk=WGS.PackNormalsShaderChunk,c.HatchPatternShaderChunk=WGS.HatchPatternShaderChunk,c.EnvSamplingShaderChunk=WGS.EnvSamplingShaderChunk,c.IdUniforms=WGS.IdUniforms,c.IdFragmentDeclaration=WGS.IdFragmentDeclaration,c.IdOutputShaderChunk=WGS.IdOutputShaderChunk,c.FinalOutputShaderChunk=WGS.FinalOutputShaderChunk,c.ThemingUniform=WGS.ThemingUniform,c.ThemingFragmentDeclaration=WGS.ThemingFragmentDeclaration,c.ThemingFragmentShaderChunk=WGS.ThemingFragmentShaderChunk,c.BackgroundShader=WGS.BackgroundShader,c.BlendShader=WGS.BlendShader,c.CelShader=WGS.CelShader,c.CopyShader=WGS.CopyShader,c.FXAAShader=WGS.FXAAShader,c.SAOBlurShader=WGS.SAOBlurShader,c.SAOMinifyFirstShader=WGS.SAOMinifyFirstShader,c.SAOMinifyShader=WGS.SAOMinifyShader,c.SAOShader=WGS.SAOShader,c.NormalsShader=WGS.NormalsShader,c.LineShader=WGS.LineShader,d.LineStyleDefs=WGS.LineStyleDefs,d.CreateLinePatternTexture=WGS.CreateLinePatternTexture,d.FloatToHalf=WGS.FloatToHalf,d.HalfToFloat=WGS.HalfToFloat,d.IntToHalf=WGS.IntToHalf,d.HalfToInt=WGS.HalfToInt,d.HalfTest=WGS.HalfTest,c.createShaderMaterial=WGS.createShaderMaterial,c.setMacro=WGS.setMacro,c.removeMacro=WGS.removeMacro,c.LmvShaderPass=WGS.ShaderPass,c.GaussianPass=WGS.GaussianPass,c.GroundShadow=WGS.GroundShadow,c.createGroundShape=WGS.createGroundShape,c.setGroundShapeTransform=WGS.setGroundShapeTransform,c.GroundReflection=WGS.GroundReflection,d.FireflyWebGLShader=WGS.WebGLShader,d.PrismMaps=WGS.PrismMaps,d.GetPrismMapChunk=WGS.GetPrismMapChunk,d.FireflyWebGLProgram=WGS.WebGLProgram,c.ShadowMapCommonUniforms=WGS.ShadowMapCommonUniforms,c.ShadowMapUniforms=WGS.ShadowMapUniforms,c.ShadowMapDeclareCommonUniforms=WGS.ShadowMapDeclareCommonUniforms,c.ShadowMapVertexDeclaration=WGS.ShadowMapVertexDeclaration,c.ShadowMapVertexShaderChunk=WGS.ShadowMapVertexShaderChunk,c.ShadowMapFragmentDeclaration=WGS.ShadowMapFragmentDeclaration,c.FireflyPhongShader=WGS.PhongShader,c.PrismShader=WGS.PrismShader,c.GetPrismMapUniforms=WGS.GetPrismMapUniforms,c.GetPrismMapSampleChunk=WGS.GetPrismMapSampleChunk,c.GetPrismMapUniformChunk=WGS.GetPrismMapUniformChunk,c.AverageOfFloat3=WGS.AverageOfFloat3,d.createPrismMaterial=WGS.createPrismMaterial,d.clonePrismMaterial=WGS.clonePrismMaterial,d.ShadowMapShader=WGS.ShadowMapShader,d.GroundShadowShader=WGS.GroundShadowShader,d.ShadowMapOverrideMaterials=WGS.ShadowMapOverrideMaterials,d.SHADOWMAP_NEEDS_UPDATE=WGS.SHADOWMAP_NEEDS_UPDATE,d.SHADOWMAP_INCOMPLETE=WGS.SHADOWMAP_INCOMPLETE,d.SHADOWMAP_VALID=WGS.SHADOWMAP_VALID,d.ShadowConfig=WGS.ShadowConfig,d.ShadowRender=WGS.ShadowRender,d.ShadowMaps=WGS.ShadowMaps,d.FrustumIntersector=WGS.FrustumIntersector,d.OUTSIDE=WGS.OUTSIDE,d.INTERSECTS=WGS.INTERSECTS,d.CONTAINS=WGS.CONTAINS,d.VBIntersector=WGS.VBIntersector,d.memoryOptimizedLoading=WGS.memoryOptimizedLoading,d.GPU_MEMORY_LIMIT=WGS.GPU_MEMORY_LIMIT,d.GPU_OBJECT_LIMIT=WGS.GPU_OBJECT_LIMIT,d.FRAGS_PERSISTENT_COUNT=WGS.FRAGS_PERSISTENT_COUNT,d.FRAGS_PERSISTENT_MAX_COUNT=WGS.FRAGS_PERSISTENT_MAX_COUNT,d.MAX_2D_PERSISTENT_BUFFER_COUNT=WGS.MAX_2D_PERSISTENT_BUFFER_COUNT,d.PAGE_OUT_COUNT_2D=WGS.PAGE_OUT_COUNT_2D,d.PAGE_OUT_GOAL_2D=WGS.PAGE_OUT_GOAL_2D,d.GEOMS_COUNT_LIMIT=WGS.GEOMS_COUNT_LIMIT,d.onDemandLoading=WGS.onDemandLoading,d.cullGeometryOnLoading=WGS.cullGeometryOnLoading,d.pageOutGeometryEnabled=WGS.pageOutGeometryEnabled,d.PAGEOUT_SUCCESS=WGS.PAGEOUT_SUCCESS,d.PAGEOUT_FAIL=WGS.PAGEOUT_FAIL,d.PAGEOUT_NONE=WGS.PAGEOUT_NONE,d.PAGEOUT_PERCENTAGE=WGS.PAGEOUT_PERCENTAGE,d.GEOMS_PAGEOUT_COUNT=WGS.GEOMS_PAGEOUT_COUNT,d.GeometryList=WGS.GeometryList,d.MESH_VISIBLE=WGS.MESH_VISIBLE,d.MESH_HIGHLIGHTED=WGS.MESH_HIGHLIGHTED,d.MESH_HIDE=WGS.MESH_HIDE,d.MESH_ISLINE=WGS.MESH_ISLINE,d.MESH_ISWIDELINE=WGS.MESH_ISWIDELINE,d.MESH_ISPOINT=WGS.MESH_ISPOINT,d.MESH_MOVED=WGS.MESH_MOVED,d.MESH_TRAVERSED=WGS.MESH_TRAVERSED,d.MESH_DRAWN=WGS.MESH_DRAWN,d.MESH_RENDERFLAG=WGS.MESH_RENDERFLAG,d.FragmentPointer=WGS.FragmentPointer,d.FragmentList=WGS.FragmentList,d.RENDER_NORMAL=WGS.RENDER_NORMAL,d.RENDER_HIGHLIGHTED=WGS.RENDER_HIGHLIGHTED,d.RENDER_HIDDEN=WGS.RENDER_HIDDEN,d.RENDER_SHADOWMAP=WGS.RENDER_SHADOWMAP,d.RENDER_FINISHED=WGS.RENDER_FINISHED,d.RenderBatch=WGS.RenderBatch,b.rescueFromPolymer=WGS.rescueFromPolymer,d.FireflyWebGLRenderer=WGS.WebGLRenderer,d.ModelIteratorLinear=WGS.ModelIteratorLinear,d.ModelIteratorBVH=WGS.ModelIteratorBVH,d.BufferGeometryUtils=WGS.BufferGeometry,d.RenderScene=WGS.RenderScene,d.SortedList=WGS.SortedList,d.ModelIteratorTexQuad=WGS.ModelIteratorTexQuad,d.TexQuadConfig=WGS.TexQuadConfig,d.InstanceTree=WGS.InstanceTree,b.SelectionMode=WGS.SelectionMode,d.MaterialConverter=WGS.MaterialConverter)};var av=Autodesk.Viewing,avp=av.Private;av.getGlobal=getGlobal;var isBrowser=av.isBrowser="undefined"!=typeof navigator,isIE11=av.isIE11=isBrowser&&!!navigator.userAgent.match(/Edge|Trident\/7\./);"undefined"!=typeof window&&isIE11&&!function(){function a(a,b){b=b||{bubbles:!1,cancelable:!1,detail:void 0};var c=document.createEvent("CustomEvent");return c.initCustomEvent(a,b.bubbles,b.cancelable,b.detail),c}a.prototype=window.CustomEvent.prototype,window.CustomEvent=a}(),ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=function(a,b){if(!b||b>this.byteLength?b=this.byteLength:b<0&&(b=this.byteLength+b,b<0&&(b=0)),a<0&&(a=this.byteLength+a,a<0&&(a=0)),b<=a)return new ArrayBuffer;for(var c=b-a,d=new Uint8Array(this,a,c),e=new Uint8Array(c),f=0;f<c;f++)e[f]=d[f];return e.buffer}),function(){Math.log2=Math.log2||function(a){return Math.log(a)/Math.LN2}}(),"undefined"!=typeof window&&(window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);var launchFullscreen=av.launchFullscreen=function(a,b){a.requestFullscreen?a.requestFullscreen(b):a.mozRequestFullScreen?a.mozRequestFullScreen(b):a.webkitRequestFullscreen?a.webkitRequestFullscreen(b):a.msRequestFullscreen&&a.msRequestFullscreen(b)},exitFullscreen=av.exitFullscreen=function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},inFullscreen=av.inFullscreen=function(){return"webkitIsFullScreen"in document?document.webkitIsFullScreen:!!(document.mozFullScreenElement||document.msFullscreenElement||document.fullscreenElement||document.querySelector(".viewer-fill-browser"))},fullscreenElement=av.fullscreenElement=function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement},isFullscreenAvailable=av.isFullscreenAvailable=function(a){return a.requestFullscreen||a.mozRequestFullScreen||a.webkitRequestFullscreen||a.msRequestFullscreen},getAndroidVersion=av.getAndroidVersion=function(a){var a=a||navigator.userAgent,b=a.match(/Android\s([0-9\.]*)/);return!!b&&b[1]},isTouchDevice=av.isTouchDevice=function(){return"undefined"!=typeof window&&"ontouchstart"in window};av.isIOSDevice=function(){return!!isBrowser&&/ip(ad|hone|od)/.test(navigator.userAgent.toLowerCase())},av.isAndroidDevice=function(){return!!isBrowser&&navigator.userAgent.toLowerCase().indexOf("android")!==-1},av.isMobileDevice=function(){return!!isBrowser&&(av.isIOSDevice()||av.isAndroidDevice())},av.isSafari=function(){if(!isBrowser)return!1;var a=navigator.userAgent.toLowerCase();return a.indexOf("safari")!==-1&&a.indexOf("chrome")===-1},av.isFirefox=function(){if(!isBrowser)return!1;var a=navigator.userAgent.toLowerCase();return a.indexOf("firefox")!==-1},av.isMac=function(){if(!isBrowser)return!1;var a=navigator.userAgent.toLowerCase();return a.indexOf("mac os")!==-1},av.isWindows=function(){if(!isBrowser)return!1;var a=navigator.userAgent.toLowerCase();return a.indexOf("win32")!==-1||a.indexOf("windows")!==-1};var detectWebGL=av.detectWebGL=function(){if(window.WebGLRenderingContext){for(var a=document.createElement("canvas"),b=["webgl","experimental-webgl","moz-webgl","webkit-3d"],c=!1,d=0;d<4;d++)try{if(c=a.getContext(b[d]),c=rescueFromPolymer(c),c&&"function"==typeof c.getParameter)return 1}catch(a){}return 0}return-1},touchStartToClick=av.touchStartToClick=function(a){a.preventDefault(),a.stopPropagation(),a.target.click()};!function(){var a=getGlobal();a.performance||(a.performance=Date)}(),Number.isInteger=Number.isInteger||function(a){return"number"==typeof a&&isFinite(a)&&Math.floor(a)===a},String.prototype.repeat=String.prototype.repeat||function(a){if(a<1)return"";for(var b="",c=this.valueOf();a>1;)1&a&&(b+=c),a>>=1,c+=c;return b+c};var av=Autodesk.Viewing,avp=Autodesk.Viewing.Private;avp.BUILD_LMV_WORKER_URL="lmvworker.min.js",avp.LMV_WORKER_URL=avp.BUILD_LMV_WORKER_URL,avp.ENABLE_DEBUG=avp.ENABLE_DEBUG||!1,avp.ENABLE_TRACE=avp.ENABLE_TRACE||!1,avp.ENABLE_INLINE_WORKER=!0,function(){var a=Autodesk.Viewing,b=(a.Private,""),c=!1,d=!1,e=!0;a.HTTP_REQUEST_HEADERS={},a.getApiEndpoint=function(){return b},a.setApiEndpoint=function(a,c,f){b=a,d=c,e=f,e||(d=!1)},a.getViewingUrl=function(a){return e?(a||b)+"/viewingservice/v1":(a||b)+"/derivativeservice/v2"},a.getUseCredentials=function(){return c},a.setUseCredentials=function(a){c=a},a.getManifestApi=function(b){var c=a.getViewingUrl(b);return d?c+"/bubbles/":e?c+"/":c+"/manifest/"},a.getItemApi=function(b){return e?a.getViewingUrl(b)+"/items/":a.getViewingUrl(b)+"/derivatives/"},a.getThumbnailApi=function(b){return a.getViewingUrl(b)+"/thumbnails/"},a.makeOssPath=function(a,c,d){return(a||b)+"/oss/v2/buckets/"+c+"/objects/"+encodeURIComponent(decodeURIComponent(d))}}(),/** @license zlib.js 2012 - imaya [ https://github.com/imaya/zlib.js ] The MIT License */
function(){"use strict";function a(a){throw a}function b(a,b){var c=a.split("."),d=l;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)c.length||b===k?d=d[e]?d[e]:d[e]={}:d[e]=b}function c(a,b,c){var d,e="number"==typeof b?b:b=0,f="number"==typeof c?c:a.length;for(d=-1,e=7&f;e--;++b)d=d>>>8^r[255&(d^a[b])];for(e=f>>3;e--;b+=8)d=d>>>8^r[255&(d^a[b])],d=d>>>8^r[255&(d^a[b+1])],d=d>>>8^r[255&(d^a[b+2])],d=d>>>8^r[255&(d^a[b+3])],d=d>>>8^r[255&(d^a[b+4])],d=d>>>8^r[255&(d^a[b+5])],d=d>>>8^r[255&(d^a[b+6])],d=d>>>8^r[255&(d^a[b+7])];return(4294967295^d)>>>0}function d(){}function e(a){var b,c,d,e,f,g,h,i,j,k=a.length,l=0,n=Number.POSITIVE_INFINITY;for(i=0;i<k;++i)a[i]>l&&(l=a[i]),a[i]<n&&(n=a[i]);for(b=1<<l,c=new(m?Uint32Array:Array)(b),d=1,e=0,f=2;d<=l;){for(i=0;i<k;++i)if(a[i]===d){for(g=0,h=e,j=0;j<d;++j)g=g<<1|1&h,h>>=1;for(j=g;j<b;j+=f)c[j]=d<<16|i;++e}++d,e<<=1,f<<=1}return[c,l,n]}function f(b,c){switch(this.i=[],this.j=32768,this.d=this.f=this.c=this.n=0,this.input=m?new Uint8Array(b):b,this.o=!1,this.k=w,this.w=!1,!c&&(c={})||(c.index&&(this.c=c.index),c.bufferSize&&(this.j=c.bufferSize),c.bufferType&&(this.k=c.bufferType),c.resize&&(this.w=c.resize)),this.k){case v:this.a=32768,this.b=new(m?Uint8Array:Array)(32768+this.j+258);break;case w:this.a=0,this.b=new(m?Uint8Array:Array)(this.j),this.e=this.D,this.q=this.A,this.l=this.C;break;default:a(Error("invalid inflate mode"))}}function g(b,c){for(var d,e=b.f,f=b.d,g=b.input,h=b.c;f<c;)d=g[h++],d===k&&a(Error("input buffer is broken")),e|=d<<f,f+=8;return d=e&(1<<c)-1,b.f=e>>>c,b.d=f-c,b.c=h,d}function h(a,b){for(var c,d,e,f=a.f,g=a.d,h=a.input,i=a.c,j=b[0],l=b[1];g<l&&(c=h[i++],c!==k);)f|=c<<g,g+=8;return d=j[f&(1<<l)-1],e=d>>>16,a.f=f>>e,a.d=g-e,a.c=i,65535&d}function i(a){function b(a,b,c){var d,e,f,i;for(i=0;i<a;)switch(d=h(this,b)){case 16:for(f=3+g(this,2);f--;)c[i++]=e;break;case 17:for(f=3+g(this,3);f--;)c[i++]=0;e=0;break;case 18:for(f=11+g(this,7);f--;)c[i++]=0;e=0;break;default:e=c[i++]=d}return c}var c,d,f,i,j=g(a,5)+257,k=g(a,5)+1,l=g(a,4)+4,n=new(m?Uint8Array:Array)(A.length);for(i=0;i<l;++i)n[A[i]]=g(a,3);c=e(n),d=new(m?Uint8Array:Array)(j),f=new(m?Uint8Array:Array)(k),a.l(e(b.call(a,j,c,d)),e(b.call(a,k,c,f)))}function j(a){this.input=a,this.c=0,this.m=[],this.s=!1}var k=void 0,l=this,m="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array;new(m?Uint8Array:Array)(256);var n;for(n=0;256>n;++n)for(var o=n,p=7,o=o>>>1;o;o>>>=1)--p;var q=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],r=m?new Uint32Array(q):q;d.prototype.getName=function(){return this.name},d.prototype.getData=function(){return this.data},d.prototype.G=function(){return this.H},b("Zlib.GunzipMember",d),b("Zlib.GunzipMember.prototype.getName",d.prototype.getName),b("Zlib.GunzipMember.prototype.getData",d.prototype.getData),b("Zlib.GunzipMember.prototype.getMtime",d.prototype.G);var s,t=[];for(s=0;288>s;s++)switch(!0){case 143>=s:t.push([s+48,8]);break;case 255>=s:t.push([s-144+400,9]);break;case 279>=s:t.push([s-256+0,7]);break;case 287>=s:t.push([s-280+192,8]);break;default:a("invalid literal: "+s)}var u=function(){function b(b){switch(!0){case 3===b:return[257,b-3,0];case 4===b:return[258,b-4,0];case 5===b:return[259,b-5,0];case 6===b:return[260,b-6,0];case 7===b:return[261,b-7,0];case 8===b:return[262,b-8,0];case 9===b:return[263,b-9,0];case 10===b:return[264,b-10,0];case 12>=b:return[265,b-11,1];case 14>=b:return[266,b-13,1];case 16>=b:return[267,b-15,1];case 18>=b:return[268,b-17,1];case 22>=b:return[269,b-19,2];case 26>=b:return[270,b-23,2];case 30>=b:return[271,b-27,2];case 34>=b:return[272,b-31,2];case 42>=b:return[273,b-35,3];case 50>=b:return[274,b-43,3];case 58>=b:return[275,b-51,3];case 66>=b:return[276,b-59,3];case 82>=b:return[277,b-67,4];case 98>=b:return[278,b-83,4];case 114>=b:return[279,b-99,4];case 130>=b:return[280,b-115,4];case 162>=b:return[281,b-131,5];case 194>=b:return[282,b-163,5];case 226>=b:return[283,b-195,5];case 257>=b:return[284,b-227,5];case 258===b:return[285,b-258,0];default:a("invalid length: "+b)}}var c,d,e=[];for(c=3;258>=c;c++)d=b(c),e[c]=d[2]<<24|d[1]<<16|d[0];return e}();m&&new Uint32Array(u);var v=0,w=1;f.prototype.g=function(){for(;!this.o;){var b=g(this,3);switch(1&b&&(this.o=!0),b>>>=1){case 0:var c=this.input,d=this.c,e=this.b,f=this.a,h=k,j=k,l=k,n=e.length,o=k;switch(this.d=this.f=0,h=c[d++],h===k&&a(Error("invalid uncompressed block header: LEN (first byte)")),j=h,h=c[d++],h===k&&a(Error("invalid uncompressed block header: LEN (second byte)")),j|=h<<8,h=c[d++],h===k&&a(Error("invalid uncompressed block header: NLEN (first byte)")),l=h,h=c[d++],h===k&&a(Error("invalid uncompressed block header: NLEN (second byte)")),l|=h<<8,j===~l&&a(Error("invalid uncompressed block header: length verify")),d+j>c.length&&a(Error("input buffer is broken")),this.k){case v:for(;f+j>e.length;){if(o=n-f,j-=o,m)e.set(c.subarray(d,d+o),f),f+=o,d+=o;else for(;o--;)e[f++]=c[d++];this.a=f,e=this.e(),f=this.a}break;case w:for(;f+j>e.length;)e=this.e({t:2});break;default:a(Error("invalid inflate mode"))}if(m)e.set(c.subarray(d,d+j),f),f+=j,d+=j;else for(;j--;)e[f++]=c[d++];this.c=d,this.a=f,this.b=e;break;case 1:this.l(M,O);break;case 2:i(this);break;default:a(Error("unknown BTYPE: "+b))}}return this.q()};var x,y,z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],A=m?new Uint16Array(z):z,B=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],C=m?new Uint16Array(B):B,D=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],E=m?new Uint8Array(D):D,F=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],G=m?new Uint16Array(F):F,H=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],I=m?new Uint8Array(H):H,J=new(m?Uint8Array:Array)(288);for(x=0,y=J.length;x<y;++x)J[x]=143>=x?8:255>=x?9:279>=x?7:8;var K,L,M=e(J),N=new(m?Uint8Array:Array)(30);for(K=0,L=N.length;K<L;++K)N[K]=5;var O=e(N);f.prototype.l=function(a,b){var c=this.b,d=this.a;this.r=a;for(var e,f,i,j,k=c.length-258;256!==(e=h(this,a));)if(256>e)d>=k&&(this.a=d,c=this.e(),d=this.a),c[d++]=e;else for(f=e-257,j=C[f],0<E[f]&&(j+=g(this,E[f])),e=h(this,b),i=G[e],0<I[e]&&(i+=g(this,I[e])),d>=k&&(this.a=d,c=this.e(),d=this.a);j--;)c[d]=c[d++-i];for(;8<=this.d;)this.d-=8,this.c--;this.a=d},f.prototype.C=function(a,b){var c=this.b,d=this.a;this.r=a;for(var e,f,i,j,k=c.length;256!==(e=h(this,a));)if(256>e)d>=k&&(c=this.e(),k=c.length),c[d++]=e;else for(f=e-257,j=C[f],0<E[f]&&(j+=g(this,E[f])),e=h(this,b),i=G[e],0<I[e]&&(i+=g(this,I[e])),d+j>k&&(c=this.e(),k=c.length);j--;)c[d]=c[d++-i];for(;8<=this.d;)this.d-=8,this.c--;this.a=d},f.prototype.e=function(){var a,b,c=new(m?Uint8Array:Array)(this.a-32768),d=this.a-32768,e=this.b;if(m)c.set(e.subarray(32768,c.length));else for(a=0,b=c.length;a<b;++a)c[a]=e[a+32768];if(this.i.push(c),this.n+=c.length,m)e.set(e.subarray(d,d+32768));else for(a=0;32768>a;++a)e[a]=e[d+a];return this.a=32768,e},f.prototype.D=function(a){var b,c,d,e,f=this.input.length/this.c+1|0,g=this.input,h=this.b;return a&&("number"==typeof a.t&&(f=a.t),"number"==typeof a.z&&(f+=a.z)),2>f?(c=(g.length-this.c)/this.r[2],e=258*(c/2)|0,d=e<h.length?h.length+e:h.length<<1):d=h.length*f,m?(b=new Uint8Array(d),b.set(h)):b=h,this.b=b},f.prototype.q=function(){var a,b,c,d,e,f=0,g=this.b,h=this.i,i=new(m?Uint8Array:Array)(this.n+(this.a-32768));if(0===h.length)return m?this.b.subarray(32768,this.a):this.b.slice(32768,this.a);for(b=0,c=h.length;b<c;++b)for(a=h[b],d=0,e=a.length;d<e;++d)i[f++]=a[d];for(b=32768,c=this.a;b<c;++b)i[f++]=g[b];return this.i=[],this.buffer=i},f.prototype.A=function(){var a,b=this.a;return m?this.w?(a=new Uint8Array(b),a.set(this.b.subarray(0,b))):a=this.b.subarray(0,b):(this.b.length>b&&(this.b.length=b),a=this.b),this.buffer=a},j.prototype.F=function(){return this.s||this.g(),this.m.slice()},j.prototype.g=function(){for(var b=this.input.length;this.c<b;){var e=new d,g=k,h=k,i=k,j=k,l=k,n=k,o=k,p=k,q=k,r=this.input,s=this.c;switch(e.u=r[s++],e.v=r[s++],(31!==e.u||139!==e.v)&&a(Error("invalid file signature:"+e.u+","+e.v)),e.p=r[s++],e.p){case 8:break;default:a(Error("unknown compression method: "+e.p))}if(e.h=r[s++],p=r[s++]|r[s++]<<8|r[s++]<<16|r[s++]<<24,e.H=new Date(1e3*p),e.N=r[s++],e.M=r[s++],0<(4&e.h)&&(e.I=r[s++]|r[s++]<<8,s+=e.I),0<(8&e.h)){for(o=[],n=0;0<(l=r[s++]);)o[n++]=String.fromCharCode(l);e.name=o.join("")}if(0<(16&e.h)){for(o=[],n=0;0<(l=r[s++]);)o[n++]=String.fromCharCode(l);e.J=o.join("")}0<(2&e.h)&&(e.B=65535&c(r,0,s),e.B!==(r[s++]|r[s++]<<8)&&a(Error("invalid header crc16"))),g=r[r.length-4]|r[r.length-3]<<8|r[r.length-2]<<16|r[r.length-1]<<24,r.length-s-4-4<512*g&&(j=g),h=new f(r,{index:s,bufferSize:j}),e.data=i=h.g(),s=h.c,e.K=q=(r[s++]|r[s++]<<8|r[s++]<<16|r[s++]<<24)>>>0,c(i,k,k)!==q&&a(Error("invalid CRC-32 checksum: 0x"+c(i,k,k).toString(16)+" / 0x"+q.toString(16))),e.L=g=(r[s++]|r[s++]<<8|r[s++]<<16|r[s++]<<24)>>>0,(4294967295&i.length)!==g&&a(Error("invalid input size: "+(4294967295&i.length)+" / "+g)),this.m.push(e),this.c=s}this.s=!0;var t,u,v,w=this.m,x=0,y=0;for(t=0,u=w.length;t<u;++t)y+=w[t].data.length;if(m)for(v=new Uint8Array(y),t=0;t<u;++t)v.set(w[t].data,x),x+=w[t].data.length;else{for(v=[],t=0;t<u;++t)v[t]=w[t].data;v=Array.prototype.concat.apply([],v)}return v},b("Zlib.Gunzip",j),b("Zlib.Gunzip.prototype.decompress",j.prototype.g),b("Zlib.Gunzip.prototype.getMembers",j.prototype.F)}.call(this),/** @license zlib.js 2012 - imaya [ https://github.com/imaya/zlib.js ] The MIT License */
function(){"use strict";function a(a){throw a}function b(a,b){var c=a.split("."),d=p;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)c.length||b===o?d=d[e]?d[e]:d[e]={}:d[e]=b}function c(a){var b,c,d,e,f,g,h,i,j,k=a.length,l=0,m=Number.POSITIVE_INFINITY;for(i=0;i<k;++i)a[i]>l&&(l=a[i]),a[i]<m&&(m=a[i]);for(b=1<<l,c=new(q?Uint32Array:Array)(b),d=1,e=0,f=2;d<=l;){for(i=0;i<k;++i)if(a[i]===d){for(g=0,h=e,j=0;j<d;++j)g=g<<1|1&h,h>>=1;for(j=g;j<b;j+=f)c[j]=d<<16|i;++e}++d,e<<=1,f<<=1}return[c,l,m]}function d(b,c){switch(this.l=[],this.m=32768,this.d=this.f=this.c=this.t=0,this.input=q?new Uint8Array(b):b,this.u=!1,this.n=A,this.K=!1,!c&&(c={})||(c.index&&(this.c=c.index),c.bufferSize&&(this.m=c.bufferSize),c.bufferType&&(this.n=c.bufferType),c.resize&&(this.K=c.resize)),this.n){case z:this.a=32768,this.b=new(q?Uint8Array:Array)(32768+this.m+258);break;case A:this.a=0,this.b=new(q?Uint8Array:Array)(this.m),this.e=this.W,this.B=this.R,this.q=this.V;break;default:a(Error("invalid inflate mode"))}}function e(b,c){for(var d,e=b.f,f=b.d,g=b.input,h=b.c;f<c;)d=g[h++],d===o&&a(Error("input buffer is broken")),e|=d<<f,f+=8;return d=e&(1<<c)-1,b.f=e>>>c,b.d=f-c,b.c=h,d}function f(a,b){for(var c,d,e,f=a.f,g=a.d,h=a.input,i=a.c,j=b[0],k=b[1];g<k&&(c=h[i++],c!==o);)f|=c<<g,g+=8;return d=j[f&(1<<k)-1],e=d>>>16,a.f=f>>e,a.d=g-e,a.c=i,65535&d}function g(a){function b(a,b,c){var d,g,h,i;for(i=0;i<a;)switch(d=f(this,b)){case 16:for(h=3+e(this,2);h--;)c[i++]=g;break;case 17:for(h=3+e(this,3);h--;)c[i++]=0;g=0;break;case 18:for(h=11+e(this,7);h--;)c[i++]=0;g=0;break;default:g=c[i++]=d}return c}var d,g,h,i,j=e(a,5)+257,k=e(a,5)+1,l=e(a,4)+4,m=new(q?Uint8Array:Array)(E.length);for(i=0;i<l;++i)m[E[i]]=e(a,3);d=c(m),g=new(q?Uint8Array:Array)(j),h=new(q?Uint8Array:Array)(k),a.q(c(b.call(a,j,d,g)),c(b.call(a,k,d,h)))}function h(a){a=a||{},this.files=[],this.v=a.comment}function i(a,b){b=b||{},this.input=q&&a instanceof Array?new Uint8Array(a):a,this.c=0,this.ba=b.verify||!1,this.j=b.password}function j(a,b){this.input=a,this.offset=b}function k(a,b){this.input=a,this.offset=b}function l(b){var c,d,e,f,g=[],h={};if(!b.i){if(b.o===o){var i,k=b.input;if(!b.D)a:{var l,m=b.input;for(l=m.length-12;0<l;--l)if(m[l]===W[0]&&m[l+1]===W[1]&&m[l+2]===W[2]&&m[l+3]===W[3]){b.D=l;break a}a(Error("End of Central Directory Record not found"))}i=b.D,(k[i++]!==W[0]||k[i++]!==W[1]||k[i++]!==W[2]||k[i++]!==W[3])&&a(Error("invalid signature")),b.ha=k[i++]|k[i++]<<8,b.ja=k[i++]|k[i++]<<8,b.ka=k[i++]|k[i++]<<8,b.aa=k[i++]|k[i++]<<8,b.Q=(k[i++]|k[i++]<<8|k[i++]<<16|k[i++]<<24)>>>0,b.o=(k[i++]|k[i++]<<8|k[i++]<<16|k[i++]<<24)>>>0,b.w=k[i++]|k[i++]<<8,b.v=q?k.subarray(i,i+b.w):k.slice(i,i+b.w)}for(c=b.o,e=0,f=b.aa;e<f;++e)d=new j(b.input,c),d.parse(),c+=d.length,g[e]=d,h[d.filename]=e;b.Q<c-b.o&&a(Error("invalid file header size")),b.i=g,b.G=h}}function m(a,b,c){return c^=a.s(b),a.k(b,c),c}var n,o=void 0,p=this,q="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array;new(q?Uint8Array:Array)(256);var r;for(r=0;256>r;++r)for(var s=r,t=7,s=s>>>1;s;s>>>=1)--t;var u,v=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],w=q?new Uint32Array(v):v,x=[];for(u=0;288>u;u++)switch(!0){case 143>=u:x.push([u+48,8]);break;case 255>=u:x.push([u-144+400,9]);break;case 279>=u:x.push([u-256+0,7]);break;case 287>=u:x.push([u-280+192,8]);break;default:a("invalid literal: "+u)}var y=function(){function b(b){switch(!0){case 3===b:return[257,b-3,0];case 4===b:return[258,b-4,0];case 5===b:return[259,b-5,0];case 6===b:return[260,b-6,0];case 7===b:return[261,b-7,0];case 8===b:return[262,b-8,0];case 9===b:return[263,b-9,0];case 10===b:return[264,b-10,0];case 12>=b:return[265,b-11,1];case 14>=b:return[266,b-13,1];case 16>=b:return[267,b-15,1];case 18>=b:return[268,b-17,1];case 22>=b:return[269,b-19,2];case 26>=b:return[270,b-23,2];case 30>=b:return[271,b-27,2];case 34>=b:return[272,b-31,2];case 42>=b:return[273,b-35,3];case 50>=b:return[274,b-43,3];case 58>=b:return[275,b-51,3];case 66>=b:return[276,b-59,3];case 82>=b:return[277,b-67,4];case 98>=b:return[278,b-83,4];case 114>=b:return[279,b-99,4];case 130>=b:return[280,b-115,4];case 162>=b:return[281,b-131,5];case 194>=b:return[282,b-163,5];case 226>=b:return[283,b-195,5];case 257>=b:return[284,b-227,5];case 258===b:return[285,b-258,0];default:a("invalid length: "+b)}}var c,d,e=[];for(c=3;258>=c;c++)d=b(c),e[c]=d[2]<<24|d[1]<<16|d[0];return e}();q&&new Uint32Array(y);var z=0,A=1;d.prototype.r=function(){for(;!this.u;){var b=e(this,3);switch(1&b&&(this.u=!0),b>>>=1){case 0:var c=this.input,d=this.c,f=this.b,h=this.a,i=o,j=o,k=o,l=f.length,m=o;switch(this.d=this.f=0,i=c[d++],i===o&&a(Error("invalid uncompressed block header: LEN (first byte)")),j=i,i=c[d++],i===o&&a(Error("invalid uncompressed block header: LEN (second byte)")),j|=i<<8,i=c[d++],i===o&&a(Error("invalid uncompressed block header: NLEN (first byte)")),k=i,i=c[d++],i===o&&a(Error("invalid uncompressed block header: NLEN (second byte)")),k|=i<<8,j===~k&&a(Error("invalid uncompressed block header: length verify")),d+j>c.length&&a(Error("input buffer is broken")),this.n){case z:for(;h+j>f.length;){if(m=l-h,j-=m,q)f.set(c.subarray(d,d+m),h),h+=m,d+=m;else for(;m--;)f[h++]=c[d++];this.a=h,f=this.e(),h=this.a}break;case A:for(;h+j>f.length;)f=this.e({H:2});break;default:a(Error("invalid inflate mode"))}if(q)f.set(c.subarray(d,d+j),h),h+=j,d+=j;else for(;j--;)f[h++]=c[d++];this.c=d,this.a=h,this.b=f;break;case 1:this.q(Q,S);break;case 2:g(this);break;default:a(Error("unknown BTYPE: "+b))}}return this.B()};var B,C,D=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],E=q?new Uint16Array(D):D,F=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],G=q?new Uint16Array(F):F,H=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],I=q?new Uint8Array(H):H,J=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],K=q?new Uint16Array(J):J,L=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],M=q?new Uint8Array(L):L,N=new(q?Uint8Array:Array)(288);for(B=0,C=N.length;B<C;++B)N[B]=143>=B?8:255>=B?9:279>=B?7:8;var O,P,Q=c(N),R=new(q?Uint8Array:Array)(30);for(O=0,P=R.length;O<P;++O)R[O]=5;var S=c(R);n=d.prototype,n.q=function(a,b){var c=this.b,d=this.a;this.C=a;for(var g,h,i,j,k=c.length-258;256!==(g=f(this,a));)if(256>g)d>=k&&(this.a=d,c=this.e(),d=this.a),c[d++]=g;else for(h=g-257,j=G[h],0<I[h]&&(j+=e(this,I[h])),g=f(this,b),i=K[g],0<M[g]&&(i+=e(this,M[g])),d>=k&&(this.a=d,c=this.e(),d=this.a);j--;)c[d]=c[d++-i];for(;8<=this.d;)this.d-=8,this.c--;this.a=d},n.V=function(a,b){var c=this.b,d=this.a;this.C=a;for(var g,h,i,j,k=c.length;256!==(g=f(this,a));)if(256>g)d>=k&&(c=this.e(),k=c.length),c[d++]=g;else for(h=g-257,j=G[h],0<I[h]&&(j+=e(this,I[h])),g=f(this,b),i=K[g],0<M[g]&&(i+=e(this,M[g])),d+j>k&&(c=this.e(),k=c.length);j--;)c[d]=c[d++-i];for(;8<=this.d;)this.d-=8,this.c--;this.a=d},n.e=function(){var a,b,c=new(q?Uint8Array:Array)(this.a-32768),d=this.a-32768,e=this.b;if(q)c.set(e.subarray(32768,c.length));else for(a=0,b=c.length;a<b;++a)c[a]=e[a+32768];if(this.l.push(c),this.t+=c.length,q)e.set(e.subarray(d,d+32768));else for(a=0;32768>a;++a)e[a]=e[d+a];return this.a=32768,e},n.W=function(a){var b,c,d,e,f=this.input.length/this.c+1|0,g=this.input,h=this.b;return a&&("number"==typeof a.H&&(f=a.H),"number"==typeof a.P&&(f+=a.P)),2>f?(c=(g.length-this.c)/this.C[2],e=258*(c/2)|0,d=e<h.length?h.length+e:h.length<<1):d=h.length*f,q?(b=new Uint8Array(d),b.set(h)):b=h,this.b=b},n.B=function(){var a,b,c,d,e,f=0,g=this.b,h=this.l,i=new(q?Uint8Array:Array)(this.t+(this.a-32768));if(0===h.length)return q?this.b.subarray(32768,this.a):this.b.slice(32768,this.a);for(b=0,c=h.length;b<c;++b)for(a=h[b],d=0,e=a.length;d<e;++d)i[f++]=a[d];for(b=32768,c=this.a;b<c;++b)i[f++]=g[b];return this.l=[],this.buffer=i},n.R=function(){var a,b=this.a;return q?this.K?(a=new Uint8Array(b),a.set(this.b.subarray(0,b))):a=this.b.subarray(0,b):(this.b.length>b&&(this.b.length=b),a=this.b),this.buffer=a},h.prototype.L=function(a){this.j=a},h.prototype.s=function(a){var b=65535&a[2]|2;return b*(1^b)>>8&255},h.prototype.k=function(a,b){a[0]=(w[255&(a[0]^b)]^a[0]>>>8)>>>0,a[1]=(6681*(20173*(a[1]+(255&a[0]))>>>0)>>>0)+1>>>0,a[2]=(w[255&(a[2]^a[1]>>>24)]^a[2]>>>8)>>>0},h.prototype.T=function(a){var b,c,d=[305419896,591751049,878082192];for(q&&(d=new Uint32Array(d)),b=0,c=a.length;b<c;++b)this.k(d,255&a[b]);return d};var T={O:0,M:8},U=[80,75,1,2],V=[80,75,3,4],W=[80,75,5,6];j.prototype.parse=function(){var b=this.input,c=this.offset;(b[c++]!==U[0]||b[c++]!==U[1]||b[c++]!==U[2]||b[c++]!==U[3])&&a(Error("invalid file header signature")),this.version=b[c++],this.ia=b[c++],this.Z=b[c++]|b[c++]<<8,this.I=b[c++]|b[c++]<<8,this.A=b[c++]|b[c++]<<8,this.time=b[c++]|b[c++]<<8,this.U=b[c++]|b[c++]<<8,this.p=(b[c++]|b[c++]<<8|b[c++]<<16|b[c++]<<24)>>>0,this.z=(b[c++]|b[c++]<<8|b[c++]<<16|b[c++]<<24)>>>0,this.J=(b[c++]|b[c++]<<8|b[c++]<<16|b[c++]<<24)>>>0,this.h=b[c++]|b[c++]<<8,this.g=b[c++]|b[c++]<<8,this.F=b[c++]|b[c++]<<8,this.ea=b[c++]|b[c++]<<8,this.ga=b[c++]|b[c++]<<8,this.fa=b[c++]|b[c++]<<8|b[c++]<<16|b[c++]<<24,this.$=(b[c++]|b[c++]<<8|b[c++]<<16|b[c++]<<24)>>>0,this.filename=String.fromCharCode.apply(null,q?b.subarray(c,c+=this.h):b.slice(c,c+=this.h)),this.X=q?b.subarray(c,c+=this.g):b.slice(c,c+=this.g),this.v=q?b.subarray(c,c+this.F):b.slice(c,c+this.F),this.length=c-this.offset};var X={N:1,ca:8,da:2048};k.prototype.parse=function(){var b=this.input,c=this.offset;(b[c++]!==V[0]||b[c++]!==V[1]||b[c++]!==V[2]||b[c++]!==V[3])&&a(Error("invalid local file header signature")),this.Z=b[c++]|b[c++]<<8,this.I=b[c++]|b[c++]<<8,this.A=b[c++]|b[c++]<<8,this.time=b[c++]|b[c++]<<8,this.U=b[c++]|b[c++]<<8,this.p=(b[c++]|b[c++]<<8|b[c++]<<16|b[c++]<<24)>>>0,this.z=(b[c++]|b[c++]<<8|b[c++]<<16|b[c++]<<24)>>>0,this.J=(b[c++]|b[c++]<<8|b[c++]<<16|b[c++]<<24)>>>0,this.h=b[c++]|b[c++]<<8,this.g=b[c++]|b[c++]<<8,this.filename=String.fromCharCode.apply(null,q?b.subarray(c,c+=this.h):b.slice(c,c+=this.h)),this.X=q?b.subarray(c,c+=this.g):b.slice(c,c+=this.g),this.length=c-this.offset},n=i.prototype,n.Y=function(){var a,b,c,d=[];for(this.i||l(this),c=this.i,a=0,b=c.length;a<b;++a)d[a]=c[a].filename;return d},n.r=function(b,c){var e;this.G||l(this),e=this.G[b],e===o&&a(Error(b+" not found"));var f;f=c||{};var g,h,i,j,n,p,r,s,t=this.input,u=this.i;if(u||l(this),u[e]===o&&a(Error("wrong index")),h=u[e].$,g=new k(this.input,h),g.parse(),h+=g.length,i=g.z,0!==(g.I&X.N)){for(!f.password&&!this.j&&a(Error("please set password")),p=this.S(f.password||this.j),r=h,s=h+12;r<s;++r)m(this,p,t[r]);for(h+=12,i-=12,r=h,s=h+i;r<s;++r)t[r]=m(this,p,t[r])}switch(g.A){case T.O:j=q?this.input.subarray(h,h+i):this.input.slice(h,h+i);break;case T.M:j=new d(this.input,{index:h,bufferSize:g.J}).r();break;default:a(Error("unknown compression type"))}if(this.ba){var v,x=o,y="number"==typeof x?x:x=0,z=j.length;for(v=-1,y=7&z;y--;++x)v=v>>>8^w[255&(v^j[x])];for(y=z>>3;y--;x+=8)v=v>>>8^w[255&(v^j[x])],v=v>>>8^w[255&(v^j[x+1])],v=v>>>8^w[255&(v^j[x+2])],v=v>>>8^w[255&(v^j[x+3])],v=v>>>8^w[255&(v^j[x+4])],v=v>>>8^w[255&(v^j[x+5])],v=v>>>8^w[255&(v^j[x+6])],v=v>>>8^w[255&(v^j[x+7])];n=(4294967295^v)>>>0,g.p!==n&&a(Error("wrong crc: file=0x"+g.p.toString(16)+", data=0x"+n.toString(16)))}return j},n.L=function(a){this.j=a},n.k=h.prototype.k,n.S=h.prototype.T,n.s=h.prototype.s,b("Zlib.Unzip",i),b("Zlib.Unzip.prototype.decompress",i.prototype.r),b("Zlib.Unzip.prototype.getFilenames",i.prototype.Y),b("Zlib.Unzip.prototype.setPassword",i.prototype.L)}.call(this),/** @license zlib.js 2012 - imaya [ https://github.com/imaya/zlib.js ] The MIT License */
function(){"use strict";function a(a){throw a}function b(a,b){var c=a.split("."),d=j;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)c.length||b===i?d=d[e]?d[e]:d[e]={}:d[e]=b}function c(a){var b,c,d,e,f,g,h,i,j,l=a.length,m=0,n=Number.POSITIVE_INFINITY;for(i=0;i<l;++i)a[i]>m&&(m=a[i]),a[i]<n&&(n=a[i]);for(b=1<<m,c=new(k?Uint32Array:Array)(b),d=1,e=0,f=2;d<=m;){for(i=0;i<l;++i)if(a[i]===d){for(g=0,h=e,j=0;j<d;++j)g=g<<1|1&h,h>>=1;for(j=g;j<b;j+=f)c[j]=d<<16|i;++e}++d,e<<=1,f<<=1}return[c,m,n]}function d(b,c){switch(this.g=[],this.h=32768,this.d=this.f=this.a=this.l=0,this.input=k?new Uint8Array(b):b,this.m=!1,this.i=m,this.r=!1,!c&&(c={})||(c.index&&(this.a=c.index),c.bufferSize&&(this.h=c.bufferSize),c.bufferType&&(this.i=c.bufferType),c.resize&&(this.r=c.resize)),this.i){case l:this.b=32768,this.c=new(k?Uint8Array:Array)(32768+this.h+258);break;case m:this.b=0,this.c=new(k?Uint8Array:Array)(this.h),this.e=this.z,this.n=this.v,this.j=this.w;break;default:a(Error("invalid inflate mode"))}}function e(b,c){for(var d,e=b.f,f=b.d,g=b.input,h=b.a;f<c;)d=g[h++],d===i&&a(Error("input buffer is broken")),e|=d<<f,f+=8;return d=e&(1<<c)-1,b.f=e>>>c,b.d=f-c,b.a=h,d}function f(a,b){for(var c,d,e,f=a.f,g=a.d,h=a.input,j=a.a,k=b[0],l=b[1];g<l&&(c=h[j++],c!==i);)f|=c<<g,g+=8;return d=k[f&(1<<l)-1],e=d>>>16,a.f=f>>e,a.d=g-e,a.a=j,65535&d}function g(a){function b(a,b,c){var d,g,h,i;for(i=0;i<a;)switch(d=f(this,b)){case 16:for(h=3+e(this,2);h--;)c[i++]=g;break;case 17:for(h=3+e(this,3);h--;)c[i++]=0;g=0;break;case 18:for(h=11+e(this,7);h--;)c[i++]=0;g=0;break;default:g=c[i++]=d}return c}var d,g,h,i,j=e(a,5)+257,l=e(a,5)+1,m=e(a,4)+4,n=new(k?Uint8Array:Array)(r.length);for(i=0;i<m;++i)n[r[i]]=e(a,3);d=c(n),g=new(k?Uint8Array:Array)(j),h=new(k?Uint8Array:Array)(l),a.j(c(b.call(a,j,d,g)),c(b.call(a,l,d,h)))}function h(b,c){var e,f;switch(this.input=b,this.a=0,!c&&(c={})||(c.index&&(this.a=c.index),c.verify&&(this.A=c.verify)),e=b[this.a++],f=b[this.a++],15&e){case G:this.method=G;break;default:a(Error("unsupported compression method"))}0!==((e<<8)+f)%31&&a(Error("invalid fcheck flag:"+((e<<8)+f)%31)),32&f&&a(Error("fdict flag is not supported")),this.q=new d(b,{index:this.a,bufferSize:c.bufferSize,bufferType:c.bufferType,resize:c.resize})}var i=void 0,j=this,k="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,l=0,m=1,n={t:l,s:m};d.prototype.k=function(){for(;!this.m;){var b=e(this,3);switch(1&b&&(this.m=!0),b>>>=1){case 0:var c=this.input,d=this.a,f=this.c,h=this.b,j=i,n=i,o=i,p=f.length,q=i;switch(this.d=this.f=0,j=c[d++],j===i&&a(Error("invalid uncompressed block header: LEN (first byte)")),n=j,j=c[d++],j===i&&a(Error("invalid uncompressed block header: LEN (second byte)")),n|=j<<8,j=c[d++],j===i&&a(Error("invalid uncompressed block header: NLEN (first byte)")),o=j,j=c[d++],j===i&&a(Error("invalid uncompressed block header: NLEN (second byte)")),o|=j<<8,n===~o&&a(Error("invalid uncompressed block header: length verify")),d+n>c.length&&a(Error("input buffer is broken")),this.i){case l:for(;h+n>f.length;){if(q=p-h,n-=q,k)f.set(c.subarray(d,d+q),h),h+=q,d+=q;else for(;q--;)f[h++]=c[d++];this.b=h,f=this.e(),h=this.b}break;case m:for(;h+n>f.length;)f=this.e({p:2});break;default:a(Error("invalid inflate mode"))}if(k)f.set(c.subarray(d,d+n),h),h+=n,d+=n;else for(;n--;)f[h++]=c[d++];this.a=d,this.b=h,this.c=f;break;case 1:this.j(D,F);break;case 2:g(this);break;default:a(Error("unknown BTYPE: "+b))}}return this.n()};var o,p,q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],r=k?new Uint16Array(q):q,s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],t=k?new Uint16Array(s):s,u=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],v=k?new Uint8Array(u):u,w=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],x=k?new Uint16Array(w):w,y=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],z=k?new Uint8Array(y):y,A=new(k?Uint8Array:Array)(288);for(o=0,p=A.length;o<p;++o)A[o]=143>=o?8:255>=o?9:279>=o?7:8;var B,C,D=c(A),E=new(k?Uint8Array:Array)(30);for(B=0,C=E.length;B<C;++B)E[B]=5;var F=c(E);d.prototype.j=function(a,b){var c=this.c,d=this.b;this.o=a;for(var g,h,i,j,k=c.length-258;256!==(g=f(this,a));)if(256>g)d>=k&&(this.b=d,c=this.e(),d=this.b),c[d++]=g;else for(h=g-257,j=t[h],0<v[h]&&(j+=e(this,v[h])),g=f(this,b),i=x[g],0<z[g]&&(i+=e(this,z[g])),d>=k&&(this.b=d,c=this.e(),d=this.b);j--;)c[d]=c[d++-i];for(;8<=this.d;)this.d-=8,this.a--;this.b=d},d.prototype.w=function(a,b){var c=this.c,d=this.b;this.o=a;for(var g,h,i,j,k=c.length;256!==(g=f(this,a));)if(256>g)d>=k&&(c=this.e(),k=c.length),c[d++]=g;else for(h=g-257,j=t[h],0<v[h]&&(j+=e(this,v[h])),g=f(this,b),i=x[g],0<z[g]&&(i+=e(this,z[g])),d+j>k&&(c=this.e(),k=c.length);j--;)c[d]=c[d++-i];for(;8<=this.d;)this.d-=8,this.a--;this.b=d},d.prototype.e=function(){var a,b,c=new(k?Uint8Array:Array)(this.b-32768),d=this.b-32768,e=this.c;if(k)c.set(e.subarray(32768,c.length));else for(a=0,b=c.length;a<b;++a)c[a]=e[a+32768];if(this.g.push(c),this.l+=c.length,k)e.set(e.subarray(d,d+32768));else for(a=0;32768>a;++a)e[a]=e[d+a];return this.b=32768,e},d.prototype.z=function(a){var b,c,d,e,f=this.input.length/this.a+1|0,g=this.input,h=this.c;return a&&("number"==typeof a.p&&(f=a.p),"number"==typeof a.u&&(f+=a.u)),2>f?(c=(g.length-this.a)/this.o[2],e=258*(c/2)|0,d=e<h.length?h.length+e:h.length<<1):d=h.length*f,k?(b=new Uint8Array(d),b.set(h)):b=h,this.c=b},d.prototype.n=function(){var a,b,c,d,e,f=0,g=this.c,h=this.g,i=new(k?Uint8Array:Array)(this.l+(this.b-32768));if(0===h.length)return k?this.c.subarray(32768,this.b):this.c.slice(32768,this.b);for(b=0,c=h.length;b<c;++b)for(a=h[b],d=0,e=a.length;d<e;++d)i[f++]=a[d];for(b=32768,c=this.b;b<c;++b)i[f++]=g[b];return this.g=[],this.buffer=i},d.prototype.v=function(){var a,b=this.b;return k?this.r?(a=new Uint8Array(b),a.set(this.c.subarray(0,b))):a=this.c.subarray(0,b):(this.c.length>b&&(this.c.length=b),a=this.c),this.buffer=a},h.prototype.k=function(){var b,c,d=this.input;if(b=this.q.k(),this.a=this.q.a,this.A){c=(d[this.a++]<<24|d[this.a++]<<16|d[this.a++]<<8|d[this.a++])>>>0;var e=b;if("string"==typeof e){var f,g,h=e.split("");for(f=0,g=h.length;f<g;f++)h[f]=(255&h[f].charCodeAt(0))>>>0;e=h}for(var i,j=1,k=0,l=e.length,m=0;0<l;){i=1024<l?1024:l,l-=i;do j+=e[m++],k+=j;while(--i);j%=65521,k%=65521}c!==(k<<16|j)>>>0&&a(Error("invalid adler-32 checksum"))}return b};var G=8;b("Zlib.Inflate",h),b("Zlib.Inflate.prototype.decompress",h.prototype.k);var H,I,J,K,L={ADAPTIVE:n.s,BLOCK:n.t};if(Object.keys)H=Object.keys(L);else for(I in H=[],J=0,L)H[J++]=I;for(J=0,K=H.length;J<K;++J)I=H[J],b("Zlib.Inflate.BufferType."+I,L[I])}.call(this),function(a){var b="object"==typeof exports&&exports,c="object"==typeof module&&module&&module.exports==b&&module,d="object"==typeof global&&global;d.global!==d&&d.window!==d||(a=d);var e=function(a){this.message=a};e.prototype=new Error,e.prototype.name="InvalidCharacterError";var f=function(a){throw new e(a)},g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=/<%= spaceCharacters %>/g,i=function(a){a=String(a).replace(h,"");var b=a.length;b%4==0&&(a=a.replace(/==?$/,""),b=a.length),(b%4==1||/[^+a-zA-Z0-9\/]/.test(a))&&f("Invalid character: the string to be decoded is not correctly encoded.");for(var c,d,e=0,i="",j=-1;++j<b;)d=g.indexOf(a.charAt(j)),c=e%4?64*c+d:d,e++%4&&(i+=String.fromCharCode(255&c>>(-2*e&6)));return i},j=function(a){a=String(a),/[^\0-\xFF]/.test(a)&&f("The string to be encoded contains characters outside of the Latin1 range.");for(var b,c,d,e,h=a.length%3,i="",j=-1,k=a.length-h;++j<k;)b=a.charCodeAt(j)<<16,c=a.charCodeAt(++j)<<8,d=a.charCodeAt(++j),e=b+c+d,i+=g.charAt(e>>18&63)+g.charAt(e>>12&63)+g.charAt(e>>6&63)+g.charAt(63&e);return 2==h?(b=a.charCodeAt(j)<<8,c=a.charCodeAt(++j),e=b+c,i+=g.charAt(e>>10)+g.charAt(e>>4&63)+g.charAt(e<<2&63)+"="):1==h&&(e=a.charCodeAt(j),i+=g.charAt(e>>2)+g.charAt(e<<4&63)+"=="),i},k={encode:j,decode:i,version:"<%= version %>"};if("function"==typeof define&&"object"==typeof define.amd&&define.amd)define(function(){return k});else if(b&&!b.nodeType)if(c)c.exports=k;else for(var l in k)k.hasOwnProperty(l)&&(b[l]=k[l]);else a.base64=k}(this),function(){"use strict";function a(a,b,c){var d,e,f,g,h,i;for(d="",f=c,e=0;e<f;)switch(g=a[b+e++],g>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:d+=String.fromCharCode(g);break;case 12:case 13:h=a[b+e++],d+=String.fromCharCode((31&g)<<6|63&h);break;case 14:h=a[b+e++],i=a[b+e++],d+=String.fromCharCode((15&g)<<12|(63&h)<<6|(63&i)<<0)}return d}var b=Autodesk.LMVTK,c=!0;b.utf8ArrayToString=function(b,d,e){if(void 0===d&&(d=0),void 0===e&&(e=b.length),c)return a(b,d,e);for(var f="",g=d,h=d+e;g<h;g++)f+=String.fromCharCode(b[g]);return decodeURIComponent(escape(f))},b.blobToJson=function(a){var c=b.utf8ArrayToString(a,0,a.length);return JSON.parse(c)},b.subBlobToJson=function(a,c){if(void 0===c)return"";for(var d=c;d<a.length-1;){var e=a[d];if(44==e&&(10==a[d+1]||13==a[d+1]))break;if(10==e||13==e)break;d++}var f=b.utf8ArrayToString(a,c,d-c);try{return JSON.parse(f)}catch(a){return console.error("Error parsing property blob to JSON : "+f),f}},b.subBlobToJsonInt=function(a,b){var c=0,d=b;for(34==a[d]&&d++;d<a.length-1;){var e=a[d];if(44==e&&(10==a[d+1]||13==a[d+1]))break;if(10==e||13==e||34==e)break;e>=48&&e<=57&&(c=10*c+(e-48)),d++}return c},b.parseIntArray=function(a,b){for(var c=0,d=0,e=a.length;d<e;d++)44==a[d]&&c++;c++;var f=new Uint32Array(c+(b?1:0));d=0;for(var g=a.length;91!=a[d]&&d<g;)d++;if(d==a.length)return null;d++;var h=!1;c=0;for(var i=0;d<g;){var j=a[d];j>=48&&j<=57?(i=10*i+(j-48),h=!0):44==j||93==j?h&&(f[c++]=i,h=!1,i=0):(h=!1,i=0),d++}return f},b.findValueOffsets=function(a){for(var b=0,c=a.length-1,d=0;d<c;d++)44!=a[d]||10!=a[d+1]&&13!=a[d+1]||b++;if(!b)return null;b++;var e=new Uint32Array(b);for(d=0,b=0;91!=a[d]&&d<c;)d++;d++,e[b++]=d;for(var f=!1;d<c;)10==a[d]||13==a[d]?f=!0:f&&(f=!1,e[b++]=d),d++;return e}}(),function(){"use strict";function a(a){this.buffer=a,this.offset=0,this.byteLength=a.length}var b=Autodesk.LMVTK,c=new ArrayBuffer(8),d=new Uint8Array(c),e=new Uint16Array(c),f=new Int32Array(c),g=new Uint32Array(c),h=new Float32Array(c),i=new Float64Array(c);a.prototype.seek=function(a){this.offset=a},a.prototype.getBytes=function(a){var b=new Uint8Array(this.buffer.buffer,this.offset,a);return this.offset+=a,b},a.prototype.getVarints=function(){var a,b=0,c=0;do a=this.buffer[this.offset++],b|=(127&a)<<c,c+=7;while(128&a);return b},a.prototype.getUint8=function(){return this.buffer[this.offset++]},a.prototype.getUint16=function(){return d[0]=this.buffer[this.offset++],d[1]=this.buffer[this.offset++],e[0]},a.prototype.getInt16=function(){var a=this.getUint16();return a>32767&&(a|=4294901760),a},a.prototype.getInt32=function(){var a=this.buffer,b=d,c=this.offset;return b[0]=a[c],b[1]=a[c+1],b[2]=a[c+2],b[3]=a[c+3],this.offset+=4,f[0]},a.prototype.getUint32=function(){var a=this.buffer,b=d,c=this.offset;return b[0]=a[c],b[1]=a[c+1],b[2]=a[c+2],b[3]=a[c+3],this.offset+=4,g[0]},a.prototype.getFloat32=function(){var a=this.buffer,b=d,c=this.offset;return b[0]=a[c],b[1]=a[c+1],b[2]=a[c+2],b[3]=a[c+3],this.offset+=4,h[0]},a.prototype.getIndicesArray=function(a,b,c){for(var d=this.buffer,e=new Uint8Array(a,b,2*c),f=this.offset,g=0,h=2*c;g<h;g+=2)e[g]=d[f],e[g+1]=d[f+1],f+=4;this.offset=f},a.prototype.getVector3Array=function(a,b,c,d){var e=this.buffer,f=this.offset,g=new Uint8Array(a.buffer,a.byteOffset,a.byteLength);if(3===d&&0===c){var h=12*b;g.set(e.subarray(f,f+h)),this.offset+=h}else{d*=4;for(var i=4*c,j=0;j<b;j++){for(var k=0;k<12;k++)g[i+k]=e[f++];i+=d}this.offset=f}},a.prototype.getVector2Array=function(a,b,c,d){var e=this.buffer,f=new Uint8Array(a.buffer,a.byteOffset,a.byteLength),g=this.offset;d*=4;for(var h=4*c,i=0;i<b;i++){for(var j=0;j<8;j++)f[h+j]=e[g++];h+=d}this.offset=g},a.prototype.getVector4=function(a,b){for(var c=this.buffer,e=d,f=this.offset,g=h,i=0;i<4;i++)e[0]=c[f],e[1]=c[f+1],e[2]=c[f+2],e[3]=c[f+3],a[b+i]=g[0],f+=4;this.offset=f},a.prototype.getFloat64=function(){for(var a=this.buffer,b=d,c=this.offset,e=0;e<8;e++)b[e]=a[c+e];return this.offset+=8,i[0]},a.prototype.getString=function(a){var c=b.utf8ArrayToString(this.buffer,this.offset,a);return this.offset+=a,c},a.prototype.reset=function(a){this.buffer=a,this.offset=0,this.byteLength=a.length},b.InputStream=a}(),function(){"use strict";var a=Autodesk.LMVTK;a.VBUtils={deduceUVRepetition:function(a){for(var b in a.vblayout)if(0==b.indexOf("uv")&&0!=b.indexOf("uvw"))for(var c=a.vblayout[b].offset,d=a.vbstride,e=a.vb,f=a.vb.length/d,g=0,h=c;g<f;g++,h+=d){var i=e[h],j=e[h+1];if(i>2||i<0||j>2||j<0){a.vblayout[b].isPattern=!0;break}}},computeBounds3D:function(a){var b,c,d,e,f,g=1/0,h=1/0,i=1/0,j=-(1/0),k=-(1/0),l=-(1/0),m=a.vbstride,n=a.vblayout.position.offset,o=a.vb,p=a.vb.length/m;for(b=0,c=n;b<p;b++,c+=m)d=o[c],e=o[c+1],f=o[c+2],g>d&&(g=d),h>e&&(h=e),i>f&&(i=f),j<d&&(j=d),k<e&&(k=e),l<f&&(l=f);var q=(a.boundingBox={min:{x:g,y:h,z:i},max:{x:j,y:k,z:l}},.5*(g+j)),r=.5*(h+k),s=.5*(i+l),t=a.boundingSphere={};t.center={x:q,y:r,z:s};var u=0;for(b=0,c=n;b<p;b++,c+=m){d=o[c],e=o[c+1],f=o[c+2];var v=d-q,w=e-r,x=f-s,y=v*v+w*w+x*x;y>u&&(u=y)}t.radius=Math.sqrt(u)},bboxUnion:function(a,b){b.min.x<a.min.x&&(a.min.x=b.min.x),b.min.y<a.min.y&&(a.min.y=b.min.y),b.min.z<a.min.z&&(a.min.z=b.min.z),b.max.x>a.max.x&&(a.max.x=b.max.x),b.max.y>a.max.y&&(a.max.y=b.max.y),b.max.z>a.max.z&&(a.max.z=b.max.z)}}}(),function(){"use strict";function a(a,b,c){var d=b||65536;this.FULL_COUNT=0|(c||32767),this.useInstancing=a,this.stride=12,this.vb=new ArrayBuffer(4*this.stride*(this.useInstancing?d/4:d)),this.vbf=new Float32Array(this.vb),this.vbi=new Int32Array(this.vb),this.ib=this.useInstancing?null:new Uint16Array(d),this.reset(0)}var b=Autodesk.Viewing,c=b.Private,d=2*Math.PI,e=0,f=1,g=2,h=3,i=4,j=5,k=0,l=1,m=2,n=3,o=6,p=7,q=8,r=9,s=[0,1,3,0,3,2];a.prototype.reset=function(a){this.vcount=a,this.icount=0,this.minx=this.miny=1/0,this.maxx=this.maxy=-(1/0),this.dbIds={},this.numEllipticals=0,this.numCirculars=0,this.numTriangleGeoms=0},a.prototype.expandStride=function(){},a.prototype.addToBounds=function(a,b){a<this.minx&&(this.minx=a),a>this.maxx&&(this.maxx=a),b<this.miny&&(this.miny=b),b>this.maxy&&(this.maxy=b)},a.prototype.setCommonVertexAttribs=function(a,b,c,d,e,f,g,h){b&=255,c&=255,h&=255,f&=65535,g&=65535,this.vbi[a+q]=b|c<<8|h<<16,this.vbi[a+o]=d,this.vbi[a+p]=e,this.vbi[a+r]=f|g<<16,this.dbIds[e]=1},a.prototype.addVertexTriangleGeom=function(a,b,c,d,e,f,g,h,i,l){for(var m=this.vcount,n=this.vbf,o=this.useInstancing?1:4,p=0;p<o;p++){var q=(m+p)*this.stride;n[q]=a,n[q+1]=b,n[q+2]=c,n[q+3]=d,n[q+4]=e,n[q+5]=f,this.setCommonVertexAttribs(q,k+p,j,g,h,i,l,0),this.vcount++}return m},a.prototype.addVertexLine=function(a,b,c,d,e,g,h,i,j,l,m){for(var n=this.vcount,o=this.vbf,p=this.useInstancing?1:4,q=0;q<p;q++){var r=(n+q)*this.stride;o[r]=a,o[r+1]=b,o[r+2]=c,o[r+3]=d,o[r+4]=.5*g,o[r+5]=e,this.setCommonVertexAttribs(r,k+q,f,h,i,j,l,m),this.vcount++}return n},a.prototype.addVertexTexQuad=function(a,b,c,d,e,f,g,h,j){for(var l=this.vcount,m=this.vbf,n=this.useInstancing?1:4,o=0;o<n;o++){var p=(l+o)*this.stride;m[p]=a,m[p+1]=b,m[p+2]=e,m[p+3]=c,m[p+4]=d,this.setCommonVertexAttribs(p,k+o,i,f,g,h,j,0),this.vcount++}return l},a.prototype.addVertexArc=function(a,b,c,d,e,f,i,j,l,m,n,o){for(var p=this.vcount,q=this.vbf,r=e==f?g:h,s=this.useInstancing?1:4,t=0;t<s;t++){var u=(p+t)*this.stride;q[u]=a,q[u+1]=b,q[u+2]=c,q[u+3]=d,q[u+4]=.5*j,q[u+5]=e,r===h&&(q[u+10]=f,q[u+11]=i),this.setCommonVertexAttribs(u,k+t,r,l,m,n,o,0),this.vcount++}return p},a.prototype.addVertex=function(a,b,c,d,f,g){if(!this.useInstancing){var h=this.vcount,i=this.stride*h,j=this.vbf;return j[i]=a,j[i+1]=b,this.setCommonVertexAttribs(i,0,e,c,d,f,g,0),this.vcount++,h}},a.prototype.addVertexPolytriangle=function(a,b,c,d,e,f){this.useInstancing||(this.addVertex(a,b,c,d,e,f),this.addToBounds(a,b))},a.prototype.addIndices=function(a,b){if(!this.useInstancing){var c=this.ib,d=this.icount;if(d+a.length>=c.length){for(var e=new Uint16Array(2*Math.max(a.length,c.length)),f=0;f<d;++f)e[f]=c[f];this.ib=c=e}for(var f=0;f<a.length;++f)c[d+f]=b+a[f];this.icount+=a.length}},a.prototype.finalizeQuad=function(a){this.useInstancing||this.addIndices(s,a)},a.prototype.addSegment=function(a,b,c,d,e,f,g,h,i,j,k){var l=c-a,m=d-b,n=l||m?Math.atan2(m,l):0,o=l||m?Math.sqrt(l*l+m*m):0,p=this.addVertexLine(a,b,n,o,e,f,g,h,i,j,k);this.finalizeQuad(p),this.addToBounds(a,b),this.addToBounds(c,d)},a.prototype.addTriangleGeom=function(a,b,c,d,e,f,g,h,i,j){this.numTriangleGeoms++;var k=this.addVertexTriangleGeom(a,b,c,d,e,f,g,h,i,j);this.finalizeQuad(k),this.addToBounds(a,b),this.addToBounds(c,d),this.addToBounds(e,f)},a.prototype.addArc=function(a,b,c,e,f,g,h,i,j,k,l,m){f==g?this.numCirculars++:this.numEllipticals++;var n=t(c,e);c=n.start,e=n.end,0==c&&0==e&&(e=d);var o=Math.abs(c-e);if(o>1e-4&&Math.abs(o-d)>1e-4){var p=a+f*Math.cos(c),q=b+g*Math.sin(c);this.addSegment(p,q,p,q,0,i,j,k,l,m);var r=a+f*Math.cos(e),s=b+g*Math.sin(e);this.addSegment(r,s,r,s,0,i,j,k,l,m)}else this.addToBounds(a-f,b-g),this.addToBounds(a+f,b+g);var u=this.addVertexArc(a,b,c,e,f,g,h,i,j,k,l,m);this.finalizeQuad(u);var o,p,q,r,s},a.prototype.addTexturedQuad=function(a,b,c,d,e,f,g,h,i){var j=this.addVertexTexQuad(a,b,c,d,e,f,g,h,i);this.finalizeQuad(j);var k=.5*Math.cos(e),l=.5*Math.sin(e),m=Math.abs(c*k)+Math.abs(d*l),n=Math.abs(c*l)+Math.abs(d*k);this.addToBounds(a-m,b-n),this.addToBounds(a+m,b+n)},a.prototype.isFull=function(a){a=a||3;var b=this.useInstancing?4:1;return this.vcount*b+a>this.FULL_COUNT},a.prototype.toMesh=function(){var a={};a.vb=new Float32Array(this.vb.slice(0,this.vcount*this.stride*4)),a.vbstride=this.stride;var b=this.useInstancing?1:0;if(a.vblayout={fields1:{offset:0,itemSize:3,bytesPerItem:4,divisor:b,normalize:!1},fields2:{offset:3,itemSize:3,bytesPerItem:4,divisor:b,normalize:!1},color4b:{offset:o,itemSize:4,bytesPerItem:1,divisor:b,normalize:!0},dbId4b:{offset:p,itemSize:4,bytesPerItem:1,divisor:b,normalize:!1},flags4b:{offset:q,itemSize:4,bytesPerItem:1,divisor:b,normalize:!1},layerVp4b:{offset:r,itemSize:4,bytesPerItem:1,divisor:b,normalize:!1}},this.stride>10&&(a.vblayout.extraParams={offset:10,itemSize:2,bytesPerItem:4,divisor:b,normalize:!1}),this.useInstancing){a.numInstances=this.vcount;var c=new Int32Array([k,l,m,n]);a.vblayout.instFlags4b={offset:0,itemSize:4,bytesPerItem:1,divisor:0,normalize:!1},a.vblayout.instFlags4b.array=c.buffer;a.indices=new Uint16Array(s)}else a.indices=new Uint16Array(this.ib.buffer.slice(0,2*this.icount));a.dbIds=this.dbIds;var d=this.maxx-this.minx,e=this.maxy-this.miny,f=Math.max(d,e);a.boundingBox={min:{x:this.minx,y:this.miny,z:.001*-f},max:{x:this.maxx,y:this.maxy,z:.001*f}};a.boundingSphere={center:{x:.5*(this.minx+this.maxx),y:.5*(this.miny+this.maxy),z:0},radius:.5*Math.sqrt(d*d+e*e)};return a};var t=function(a,b){function c(){function c(a,b){return Math.abs(a-b)<.001}c(a,0)&&(a=0),c(b,0)&&(b=0),c(a,d)&&(a=d),c(b,d)&&(b=d)}if(c(),a>b)for(;a>d;)a-=d,b-=d;else for(;b>d;)a-=d,b-=d;return c(),a<0&&b>0&&(a+=d),{start:a,end:b}};c.VertexBufferBuilder=a}(),function(){"use strict";function a(a){switch(a){case"meter":case"meters":case"m":return 1;case"feet and inches":case"foot":case"feet":case"ft":return.3048;case"inch":case"inches":case"in":return.0254;case"centimeter":case"centimeters":case"cm":return.01;case"millimeter":case"millimeters":case"mm":return.001;default:return 1}}function b(a){for(var b=a.elements,c=0;c<4;c++)for(var d=0;d<4;d++)if(c===d){if(1!==b[4*c+d])return!1}else if(0!==b[4*c+d])return!1;return!0}function c(c,d){if(c.placementTransform=d.placementTransform,d.applyScaling){var e="m";c.metadata["distance unit"]&&(e=c.metadata["distance unit"].value),c.scalingUnit=e,"object"==typeof d.applyScaling?(d.applyScaling.from&&(e=d.applyScaling.from),d.applyScaling.to&&(c.scalingUnit=d.applyScaling.to)):c.scalingUnit=d.applyScaling;var f=a(e)/a(c.scalingUnit);if(1!=f){var g=new LmvMatrix4(!0),h=new LmvMatrix4(!0);h.elements[0]=f,h.elements[5]=f,h.elements[10]=f,d.placementTransform&&g.copy(d.placementTransform),c.placementTransform=d.placementTransform=g.multiply(h)}}var i=c.metadata.georeference;if(i){var j=i.refPointLMV;if(j){var k=0,l=c.metadata["custom values"];l&&l.hasOwnProperty("angleToTrueNorth")&&(k=Math.PI/180*l.angleToTrueNorth);var m=new LmvMatrix4(!0),n=m.elements;n[0]=n[5]=Math.cos(k),n[1]=-Math.sin(k),n[4]=Math.sin(k),n[12]=j[0],n[13]=j[1],n[14]=j[2],c.refPointTransform=m}}if(d.applyRefPoint&&c.refPointTransform){var o=new LmvMatrix4(!0);d.placementTransform&&o.copy(d.placementTransform),o.multiply(c.refPointTransform),c.placementTransform=d.placementTransform=o}return c.placementTransform&&b(c.placementTransform)&&(c.placementTransform=null),c.placementTransform}function d(a,b){if(a.metadata){var d=a.metadata["world bounding box"],e=new LmvVector3(d.minXYZ[0],d.minXYZ[1],d.minXYZ[2]),f=new LmvVector3(d.maxXYZ[0],d.maxXYZ[1],d.maxXYZ[2]);a.bbox=new LmvBox3(e,f),a.globalOffset=b.globalOffset||{x:.5*(e.x+f.x),y:.5*(e.y+f.y),z:.5*(e.z+f.z)};var g=c(a,b),h=a.globalOffset;h.x||h.y||h.z?(g?(g=g.clone(),g.elements[12]-=h.x,g.elements[13]-=h.y,g.elements[14]-=h.z):(g=new LmvMatrix4(!0),g.makeTranslation(-h.x,-h.y,-h.z)),a.placementWithOffset=g):a.placementWithOffset=g,g&&a.bbox.applyMatrix4(g),a.metadata.hasOwnProperty("double sided geometry")&&a.metadata["double sided geometry"].value&&(a.doubleSided=!0)}}function e(a,b){a[0]-=b.x,a[1]-=b.y,a[2]-=b.z}function f(a){if(a.animations){var b=a.animations.animations;if(b)for(var c=a.globalOffset,d=(new LmvMatrix4).makeTranslation(c.x,c.y,c.z),f=(new LmvMatrix4).makeTranslation(-c.x,-c.y,-c.z),g=new LmvMatrix4,h=new LmvMatrix4,i=0;i<b.length;i++){var j=b[i];if(j.hierarchy)for(var k=0;k<j.hierarchy.length;k++){var l=j.hierarchy[k].keys;if(l)for(var m=0;m<l.length;m++){var n=l[m].pos;if(n){var o=c,p=l[m].rot;p&&(g.makeRotationFromQuaternion({x:p[0],y:p[1],z:p[2],w:p[3]}),h.multiplyMatrices(d,g).multiply(f),o={x:h.elements[12],y:h.elements[13],z:h.elements[14]}),e(n,o)}var q=l[m].target;q&&e(q,c);var r=l[m].points;if(r)for(var s=0;s<r.length;s++)e(r[s],c)}}}}}var g=Autodesk.LMVTK;g.derivePlacementTransform=c,g.initPlacement=d,g.transformAnimations=f}(),function(){"use strict";function a(a){var c=this.stream=new b.InputStream(a),d=c.getInt32();this.type=c.getString(d),this.version=c.getInt32(),this.types=null,this.entryOffsets=[];var e=c.offset;c.seek(c.byteLength-8);var f=c.getUint32();this.typesOffset=c.getUint32(),c.seek(this.typesOffset);var g=this.readU32V();this.types=[];for(var h=0;h<g;++h)this.types.push({entryClass:this.readString(),entryType:this.readString(),version:this.readU32V()});c.seek(f);for(var i=this.readU32V(),j=this.entryOffsets,h=0;h<i;++h)j.push(c.getUint32());c.seek(e)}var b=Autodesk.LMVTK;a.prototype.readVarint=function(){var a,b=0,c=0;do a=this.stream.getUint8(),b|=(127&a)<<c,c+=7;while(128&a);return b},a.prototype.readU32V=a.prototype.readVarint,a.prototype.readU16=function(){return this.stream.getUint16()},a.prototype.readU8=function(){return this.stream.getUint8()},a.prototype.readString=function(){return this.stream.getString(this.readU32V())},a.prototype.readVector3f=function(){var a=this.stream;return{x:a.getFloat32(),y:a.getFloat32(),z:a.getFloat32()}},a.prototype.readF32=function(){return this.stream.getFloat32()},a.prototype.readVector3d=function(){var a={x:0,y:0,z:0};return function(){var b=this.stream;return a.x=b.getFloat64(),a.y=b.getFloat64(),a.z=b.getFloat64(),a}}(),a.prototype.readQuaternionf=function(){var a={x:0,y:0,z:0,w:0};return function(){var b=this.stream;return a.x=b.getFloat32(),a.y=b.getFloat32(),a.z=b.getFloat32(),a.w=b.getFloat32(),a}}(),a.prototype.readMatrix3f=function(){var a=new LmvMatrix4;return function(b){b||(b=a);var c=this.stream;b.identity();for(var d=0;d<3;++d)for(var e=0;e<3;++e)b.elements[4*d+e]=c.getFloat32();return b}}(),a.prototype.readTransform=function(){var a={x:1,y:1,z:1},b=new LmvMatrix4(!0);return function(c,d,e,f,g,h){var i,j,k=this.stream,l=k.getUint8();switch(l){case 4:b.identity();break;case 0:i=this.readVector3d(),b.makeTranslation(i.x,i.y,i.z);break;case 1:j=this.readQuaternionf(),i=this.readVector3d(),a.x=1,a.y=1,a.z=1,b.compose(i,j,a);break;case 2:var m=k.getFloat32();j=this.readQuaternionf(),i=this.readVector3d(),a.x=m,a.y=m,a.z=m,b.compose(i,j,a);break;case 3:this.readMatrix3f(b),i=this.readVector3d(),b.setPosition(i)}if(h&&(h[0]=b.elements[12],h[1]=b.elements[13],h[2]=b.elements[14]),f&&b.multiplyMatrices(f,b),g&&(b.elements[12]-=g.x,b.elements[13]-=g.y,b.elements[14]-=g.z),void 0===c)return(new LmvMatrix4).copy(b);var n=b.elements;d&&(d[e+0]=n[0],d[e+1]=n[1],d[e+2]=n[2],d[e+3]=n[4],d[e+4]=n[5],d[e+5]=n[6],d[e+6]=n[8],d[e+7]=n[9],d[e+8]=n[10],d[e+9]=n[12],d[e+10]=n[13],d[e+11]=n[14])}}(),a.prototype.getEntryCounts=function(){return this.entryOffsets.length},a.prototype.seekToEntry=function(a){var b=this.getEntryCounts();if(a>=b)return null;this.stream.seek(this.entryOffsets[a]);var c=this.stream.getUint32();return c>=this.types.length?null:this.types[c]},a.prototype.readPathID=function(){var a=this.stream;if(this.version<2){var b=a.getUint16();if(!b)return null;if(a.getUint16(),1==b)return"";for(var c=a.getUint16(),d=2;d<b;++d)c+="/"+a.getUint16()}else{var b=this.readU32V();if(!b)return null;if(this.readU32V(),1==b)return"";for(var c=this.readU32V(),d=2;d<b;++d)c+="/"+this.readU32V()}return c},b.PackFileReader=a}(),function(){"use strict";function a(a,b){var c=Math.abs(b),d=Math.abs(a),e=Math.min(c,d)/Math.max(c,d),f=e*e,g=((-.0464964749*f+.15931422)*f-.327622764)*f*e+e;return d>c&&(g=1.57079637-g),b<0&&(g=3.14159274-g),a<0&&(g=-g),g}function b(b,c,d,g,h){var i=function(){return b.getString(b.getInt32())},j=b.getString(4);if("INDX"!=j)return null;var k=c.vertexCount,l=c.triangleCount,m=c.vbstride,n=k*m,o=n+(3*l*2+3)/4|0;if(c.sharedBufferBytes=4*o,!h){var p;if(d||(d=new ArrayBuffer(4*o),g=0),p=c.vb=new Float32Array(d,g,n),c.indices=new Uint16Array(d,g+4*n,3*l),b.getIndicesArray(p.buffer,g+4*n,3*l),j=b.getString(4),"VERT"!=j)return null;var q;if(c.vblayout.normal&&2===c.vblayout.normal.itemSize&&(q=new Uint16Array(p.buffer,p.byteOffset,p.byteLength/2)),b.getVector3Array(p,k,c.vblayout.position.offset,m),1&c.flags){if(j=b.getString(4),"NORM"!=j)return null;if(q){e.length<3*k&&(e=new Float32Array(3*k)),b.getVector3Array(e,k,0,3);for(var r=0,s=c.vblayout.normal.offset;r<k;r++,s+=m){var t=.5*(a(e[3*r+1],e[3*r])*f+1),u=.5*(e[3*r+2]+1);q[2*s]=65535*t|0,q[2*s+1]=65535*u|0}}else b.getVector3Array(p,k,c.vblayout.normal.offset,m)}for(var v=0;v<c.texMapCount;v++){if(j=b.getString(4),"TEXC"!=j)return null;var w={name:i(),file:i()};c.uvs.push(w);var x="uv";v&&(x+=(v+1).toString()),b.getVector2Array(p,k,c.vblayout[x].offset,m)}for(var y=m-3*(c.attribMapCount||0),v=0;v<c.attribMapCount;v++){if(j=b.getString(4),"ATTR"!=j)return null;var z,A={name:i()};if(A.name.indexOf("Color")!=-1)z="color";else{if(A.name.indexOf("UVW")==-1){c.attrs.push(A),b.getBytes(16*k);continue}z="uvw"}c.vblayout[z]={offset:y,itemSize:3};for(var B=[0,0,0,0],r=0,s=y;r<k;r++,s+=m)b.getVector4(B,0),p[s]=B[0],p[s+1]=B[1],p[s+2]=B[2];y+=3}}}function c(a,b,c){var d=a.seekToEntry(b);return d?"Autodesk.CloudPlatform.OpenCTM"==d.entryType?h(a.stream,c.dstBuffer,c.startOffset,c.estimateSizeOnly,c.packNormals):"Autodesk.CloudPlatform.Lines"==d.entryType?j(a,d,c.estimateSizeOnly):"Autodesk.CloudPlatform.Points"==d.entryType?k(a,d,c.estimateSizeOnly):null:null}var d=Autodesk.LMVTK,e=new Float32Array(3),f=1/Math.PI,g=function(a,b,c,d,e){var f=3;e=a.vbstride,a.vblayout.prev={offset:e,itemSize:f},e+=f,a.vblayout.next={offset:e,itemSize:f},e+=f,a.vblayout.side={offset:e,itemSize:1},a.vbstride+=7;var g=2*a.vertexCount;a.vb=new Float32Array(g*a.vbstride);var h=a.lineWidth;e=a.vblayout.position.offset;for(var i=0;i<a.vertexCount;++i)for(var j=0;j<2;++j){a.vb.set(c.slice(b*i,b*i+f),e),e+=b;var k=i-1;if(k==-1){k=1;for(var l=0;l<f;++l)a.vb[e+l]=2*c[b*i+l]-c[b*k+l]}else a.vb.set(c.slice(b*k,b*k+f),e);if(e+=f,k=i+1,k==a.vertexCount){k=a.vertexCount-2;for(var l=0;l<f;++l)a.vb[e+l]=2*c[b*i+l]-c[b*k+l]}else a.vb.set(c.slice(b*k,b*k+3),e);e+=f,a.vb[e]=j?-h:h,e+=1}a.vertexCount=g;for(var m=new Uint16Array(2*f*d),n=0,o=0;o<d;++o){var p=2*o,q=a.indices[p],r=a.indices[p+1];m[n++]=2*q+1,m[n++]=2*r,m[n++]=2*q,m[n++]=2*r,m[n++]=2*q+1,m[n++]=2*r+1}a.indices=m,a.isWideLines=!0},h=function(a,c,e,f,g){var h=function(){return a.getString(a.getInt32())},i=a.getString(4);if("OCTM"!=i)return null;var j=a.getInt32();if(5!=j)return null;var k=a.getString(3);a.getUint8();var l={stream:null,vertices:null,indices:null,normals:null,colors:null,uvs:[],attrs:[]};l.vertexCount=a.getInt32(),l.triangleCount=a.getInt32(),l.texMapCount=a.getInt32(),l.attribMapCount=a.getInt32(),l.flags=a.getInt32(),l.comment=h();var m=g;l.vbstride=3,1&l.flags&&(l.vbstride+=m?1:3),l.vbstride+=2*(l.texMapCount||0),l.vbstride+=3*(l.attribMapCount||0),l.vblayout={};var n=0;if(l.vblayout.position={offset:n,itemSize:3},n+=3,1&l.flags&&(l.vblayout.normal={offset:n,itemSize:m?2:3,bytesPerItem:m?2:4,normalize:m},n+=m?1:3),l.texMapCount)for(var o=0;o<l.texMapCount;o++){var p="uv";o&&(p+=(o+1).toString()),l.vblayout[p]={offset:n,itemSize:2},n+=2}return"RAW"==k?(b(a,l,c,e,f),f||(d.VBUtils.deduceUVRepetition(l),d.VBUtils.computeBounds3D(l)),l):"MG2"==k?(readOpenCTM_MG2(a,l,c,e,f),f||(d.VBUtils.deduceUVRepetition(l),d.VBUtils.computeBounds3D(l)),l):null},i=function(a,b,c,e){if(c)return null;var f,h={vertices:null,indices:null,colors:null,normals:null,uvs:[],attrs:[],lineWidth:1};if(e){var i;b.version>1?(h.vertexCount=a.readU16(),f=a.readU16(),i=a.readU16(),b.version>2&&(h.lineWidth=a.readF32())):(h.vertexCount=a.readU32V(),f=a.readU32V(),i=a.readU32V()),h.isLines=!0}else h.vertexCount=a.readU16(),f=a.readU16(),h.pointSize=a.readF32(),h.isPoints=!0;var j=0!=a.stream.getUint8();h.vbstride=3,j&&(h.vbstride+=3),h.vblayout={};var k=0;h.vblayout.position={offset:k,itemSize:3},k+=3,j&&(h.vblayout.color={offset:k,itemSize:3}),h.vb=new Float32Array(h.vertexCount*h.vbstride);var l=h.vb,m=h.vbstride,n=a.stream;if(n.getVector3Array(l,h.vertexCount,h.vblayout.position.offset,m),j)for(var o=0,k=h.vblayout.color.offset,p=h.vertexCount;o<p;o++,k+=m)l[k]=n.getFloat32(),l[k+1]=n.getFloat32(),l[k+2]=n.getFloat32(),n.getFloat32();var q=function(a){return a.buffer.slice(a.byteOffset,a.byteOffset+a.length)};if(e){var r,s;b.version>1?(r=new Uint16Array(q(n.getBytes(2*f))),s=new Uint16Array(q(n.getBytes(2*i)))):(r=new Int32Array(q(n.getBytes(4*f))),s=new Int32Array(q(n.getBytes(4*i))));var t=s[i-1]-i+1;h.indices=new Uint16Array(2*t);for(var u=0,v=0;v+1<i;v++)for(var w=s[v];w+1<s[v+1];w++)h.indices[u++]=r[w],h.indices[u++]=r[w+1]}else h.indices=new Uint16Array(q(n.getBytes(2*f)));return 1!=h.lineWidth&&g(h,m,l,t,k),d.VBUtils.computeBounds3D(h),h},j=function(a,b,c){return i(a,b,c,!0)},k=function(a,b,c){return i(a,b,c,!1)};d.readGeometry=c}(),function(){"use strict";function a(a,b){var c=a.seekToEntry(b);if(!c)return null;if(c.version>1)return null;var d=a.stream,e={position:a.readVector3f(),dir:a.readVector3f(),r:d.getFloat32(),g:d.getFloat32(),b:d.getFloat32(),intensity:d.getFloat32(),spotAngle:d.getFloat32(),size:d.getFloat32(),type:d.getUint8()};return e}var b=Autodesk.LMVTK;b.readLightDefinition=a}(),function(){"use strict";function a(a,b){var c=b.definition,d=a.seekToEntry(c);if(!d)return null;if(d.version>2)return null;var e=a.stream,f={isPerspective:!e.getUint8(),position:a.readVector3f(),target:a.readVector3f(),up:a.readVector3f(),aspect:e.getFloat32(),fov:e.getFloat32()*(180/Math.PI)};return d.version<2&&(e.getFloat32(),e.getFloat32()),f.orthoScale=e.getFloat32(),f}var b=Autodesk.LMVTK;b.readCameraDefinition=a}(),function(){"use strict";function a(){this.length=0,
this.numLoaded=0,this.boxes=null,this.transforms=null,this.materials=null,this.packIds=null,this.entityIndexes=null,this.fragId2dbId=null,this.topoIndexes=null}function b(a,b){var c=b.geomDataIndexes.length,d=a.stream,e=0,f={},g=b.mesh2frag={};b.polygonCounts=b.geomDataIndexes;for(var h=0;h<c;h++){var i=b.geomDataIndexes[h];if(f[i]){var j=f[i];b.polygonCounts[h]=b.polygonCounts[j],b.packIds[h]=b.packIds[j],b.entityIndexes[h]=b.entityIndexes[j],e+=b.polygonCounts[h]}else{var k=a.seekToEntry(i);if(!k)return;d.getUint8(),d.seek(d.offset+24),b.polygonCounts[h]=d.getUint16(),b.packIds[h]=parseInt(a.readString()),b.entityIndexes[h]=a.readU32V(),e+=b.polygonCounts[h],f[i]=h}var l=b.packIds[h]+":"+b.entityIndexes[h],m=g[l];void 0===m?g[l]=h:Array.isArray(m)?m.push(h):g[l]=[m,h]}return b.geomDataIndexes=null,f=null,e}function c(a,b){var c=a.getEntryCounts(),d=a.stream;b.length=c;for(var e,f=b.fragTypes=new Uint8Array(c),g=b.primCounts=new Uint16Array(c),h=b.packIds=new Int32Array(c),i=b.entityIndexes=new Int32Array(c),j=0,k=c;j<k;j++){var l=a.seekToEntry(j);if(!l)return;if(f[j]=d.getUint8(),d.seek(d.offset+24),g[j]=d.getUint16(),h[j]=parseInt(a.readString()),i[j]=a.readU32V(),l.version>2){var m=d.getInt32();if(m!=-1&&void 0===e){e=b.topoIndexes=new Int32Array(c);for(var n=0;n<j;n++)e[n]=-1}void 0!=e&&(e[j]=m)}}}function d(a,b){var c=[];if(!b)return c;for(var d=a.getEntryCounts(),e=a.stream,f=0;f<d;f++){var g=a.seekToEntry(f);if(!g)return;if(g.version>5)return;g.version>4&&a.readU8(),a.readU32V(),g.version>2?a.readU32V():(a.readString(),a.readU32V()),a.readTransform(f,null,12*f);for(var h=0;h<6;h++)e.getFloat32();if(g.version>1){var i=a.readU32V();b.indexOf(i)>=0&&c.push(f)}}return c}function e(a,b,c,e,f){function g(a){if(e){var b=6*a;n.setFromArray(p,b),n.applyMatrix4(o),n.copyToArray(p,b)}}function h(a){for(var b=6*a,c=0;c<6;c++)p[b++]=m.getFloat32()}function j(a,b){for(var c=6*a,d=0;d<6;d++)p[c++]=m.getFloat32()+b[d%3]}var k=d(a,f),l=k.length?k.length:a.getEntryCounts(),m=a.stream;i&&l>i&&(l=i),b.totalLength=a.getEntryCounts(),b.length=l,b.numLoaded=0;var n,o,p=b.boxes=new Float32Array(6*l),q=b.transforms=new Float32Array(12*l),r=b.materials=new Int32Array(l),s=b.packIds=new Int32Array(l),t=b.entityIndexes=new Int32Array(l),u=b.geomDataIndexes=new Int32Array(l),v=b.fragId2dbId=new Int32Array(l),w=[0,0,0];e&&(n=new LmvBox3,o=new LmvMatrix4(!0).fromArray(e.elements));for(var x=0,y=b.length;x<y;x++){var z=k.length?a.seekToEntry(k[x]):a.seekToEntry(x);if(!z)return;if(z.version>5)return;var A=!0;if(z.version>4){var B=a.readU8();A=0!=(1&B)}if(r[x]=a.readU32V(),z.version>2?u[x]=a.readU32V():(s[x]=parseInt(a.readString()),t[x]=a.readU32V()),a.readTransform(x,q,12*x,e,c,w),z.version>3?j(x,w):h(x),g(x),c){var C=6*x;p[C++]-=c.x,p[C++]-=c.y,p[C++]-=c.z,p[C++]-=c.x,p[C++]-=c.y,p[C++]-=c.z}z.version>1&&(v[x]=a.readU32V())}b.finishLoading=!0}function f(a,b){a.length=b.length,a.numLoaded=0;for(var c=a.length,d=[1/0,1/0,1/0,-(1/0),-(1/0),-(1/0)],e=new Float32Array(6*c),f=new Float32Array(12*c),g=new Int32Array(c),h=new Int32Array(c),i=new Int32Array(c),j={},k=0;k<b.length;++k){for(var l=b[k],m=6*l,n=6*k,o=0;o<6;++o)e[n++]=a.boxes[m++];m=12*l,n=12*k;for(var o=0;o<12;++o)f[n++]=a.transforms[m++];g[k]=a.materials[l],h[k]=a.packIds[l],i[k]=a.entityIndexes[l];var p=a.packIds[l]+":"+a.entityIndexes[l],q=j[p];void 0==q?j[p]=k:Array.isArray(q)?q.push(k):j[p]=[q,k];for(var r=6*k,o=0;o<3;++o)e[r+o]<d[o]&&(d[o]=e[r+o]);for(var o=3;o<6;++o)e[r+o]>d[o]&&(d[o]=e[r+o])}return a.boxes=e,a.transforms=f,a.materials=g,a.packIds=h,a.entityIndexes=i,a.mesh2frag=j,d}var g=Autodesk.LMVTK,h=Autodesk.Viewing,i=(h.Private,h.isMobileDevice(),null);g.FragList=a,g.readGeometryMetadataIntoFragments=b,g.readGeometryMetadata=c,g.filterFragments=f,g.readFragments=e}(),function(){"use strict";function a(a,b,c,d){var e=a.seekToEntry(b);if(!e)return null;if(e.version>2)return null;var f=!0;if(e.version>1){var g=a.readU8();f=0!=(1&g)}return{definition:a.stream.getUint32(),transform:a.readTransform(void 0,void 0,void 0,c,d),instanceNodePath:a.readPathID()}}function b(a,b){for(var c=[],e=[],f=[],g=[],h=0,i=a.stream;i.offset<i.byteLength-8-1;){if(a.readTransform(h,c,12*h,void 0,void 0,void 0),b<5){var j=i.getUint8();j&&i.getUint32()}var k=i.getUint8();if(b>=5){i.getUint8()}if(b>=3&&(e[h]=i.getVarints()),h)switch(k){case d.NT_Inner:break;case d.NT_Geometry:if(b<2){var l=i.getUint16();if(1===l)f[h]=i.getUint32();else if(l>0){for(var m=[],n=0;n<l;n++)m.push(i.getUint32());f[h]=m}}else{var l=i.getVarints();if(1===l)f[h]=i.getVarints();else if(l>0){for(var m=[],n=0;n<l;n++)m.push(i.getVarints());f[h]=m}}break;case d.NT_Camera:case d.NT_Light:var o=i.getUint8();o&&i.getUint32();break;default:debug("Unrecognized instance tree node type.")}var p=0;k===d.NT_Inner&&(p=b<2?i.getUint16():i.getVarints()),g[h]=p,h++}var q=new Uint32Array(e.length);q.set(e);var r=new Float32Array(c.length);r.set(c);var s=new Uint32Array(g.length);return s.set(g),{dbIds:q,fragIds:f,transforms:r,childCounts:s}}var c=Autodesk.LMVTK,d={NT_Inner:0,NT_Geometry:1,NT_Camera:2,NT_Light:3};c.readInstance=a,c.readInstanceTree=b}(),function(){"use strict";function a(a){this.unzip=new Zlib.Unzip(a),this.manifest=null,this.materials=null,this.metadata=null,this.fragments=null,this.geompacks=[],this.instances=[],this.cameras=[],this.lights=[],this.propertydb={attrs:[],avs:[],ids:[],values:[],offsets:[]},this.bbox=null,this.animations=null,this.pendingRequests=0,this.globalOffset={x:0,y:0,z:0},this.topology=null}var b=Autodesk.Viewing,c=Autodesk.LMVTK,d=b.Private,e=b.isMobileDevice()?50:2e3,f=b.isMobileDevice()?20:100;a.prototype.loadAsyncResource=function(a,b,c,e){function f(b){g.pendingRequests--,e(b),0==g.pendingRequests&&g.postLoad(a)}if(c)return void e(c);var g=this;this.pendingRequests++,d.ViewingService.getItem(a,a.basePath+b,f,a.onFailureCallback,{asynchronous:!0})},a.prototype.loadManifest=function(a){var b=this.unzip.decompress("manifest.json");if(!b)return!1;var d=new c.InputStream(b);this.manifest=JSON.parse(d.getString(b.byteLength))},a.prototype.parseFragmentList=function(a,b,d,e){var f=this;this.loadAsyncResource(b,d,e,function(a){var d=new c.PackFileReader(a),e=f.fragments=new c.FragList;c.readFragments(d,e,f.globalOffset,b.placementTransform),d=null})},a.prototype.parseGeometryMetadata=function(a,b,d,e){var f=this;this.loadAsyncResource(b,d,e,function(a){var b=new c.PackFileReader(a);f.geomMetadata={},c.readGeometryMetadata(b,f.geomMetadata),f.numGeoms=f.geomMetadata.primCounts.length})},a.prototype.parseInstanceTree=function(a,b,d,e){var f=this;this.loadAsyncResource(a,b,d,function(a){var b=new c.PackFileReader(a);f.instanceTransforms=c.readInstanceTree(b,e)})},a.prototype.loadRemainingSvf=function(a){var d=this,e=this.unzip;this.manifest=a.manifest;var g=this.manifest,h=g.assets,i=e.decompress("metadata.json"),j=new c.InputStream(i);i.byteLength>3&&0!==i[3]&&(this.metadata=JSON.parse(j.getString(i.byteLength)).metadata,c.initPlacement(this,a)),this.packFileTotalSize=0,this.primitiveCount=0;for(var k=g.typesets,l={},m=0;m<k.length;m++){var n=k[m];l[n.id]=n.types}for(var m=0;m<h.length;m++){var o=h[m];if(!b.isMobileDevice()||"Set.bin"!==o.id&&"Topology.json.gz"!==o.id){var p=o.type;0==p.indexOf("Autodesk.CloudPlatform.")&&(p=p.substr(23));var q=o.URI,r=o.typeset?l[o.typeset]:null,s=o.usize||0,t=Math.round(s/1048576*1e5)/1e5|0;if(0!=q.indexOf("embed:/"))if("PackFile"==p){var u=r?r[0].class:null;"Autodesk.CloudPlatform.Geometry"==u&&(this.packFileTotalSize+=o.usize||0,this.geompacks.push({id:o.id,uri:q}))}else"PropertyAttributes"==p?this.propertydb.attrs.push(q):"PropertyAVs"==p?this.propertydb.avs.push(q):"PropertyIDs"==p?this.propertydb.ids.push(q):"PropertyOffsets"==p?this.propertydb.offsets.push(q):"PropertyValues"==p&&this.propertydb.values.push(q);var v=o.URI,w=null;if(0==v.indexOf("embed:/")&&(v=v.substr(7),w=e.decompress(v)),"ProteinMaterials"==p)v.indexOf("Protein")==-1?this.loadAsyncResource(a,v,w,function(a){var b=new c.InputStream(a),e=a.byteLength;0<e?d.materials=JSON.parse(b.getString(e)):d.materials=null}):this.loadAsyncResource(a,v,w,function(a){var b=new c.InputStream(a),e=a.byteLength;0<e?d.proteinMaterials=JSON.parse(b.getString(e)):d.proteinMaterials=null});else if("FragmentList"==p)this.parseFragmentList(o,a,v,w);else if("GeometryMetadataList"==p)this.parseGeometryMetadata(o,a,v,w);else if("PackFile"==p)v.indexOf("CameraDefinitions.bin")!=-1?this.loadAsyncResource(a,v,w,function(a){d.camDefPack=new c.PackFileReader(a)}):v.indexOf("CameraList.bin")!=-1?this.loadAsyncResource(a,v,w,function(a){d.camInstPack=new c.PackFileReader(a)}):v.indexOf("LightDefinitions.bin")!=-1?this.loadAsyncResource(a,v,w,function(a){d.lightDefPack=new c.PackFileReader(a)}):v.indexOf("LightList.bin")!=-1&&this.loadAsyncResource(a,v,w,function(a){d.lightInstPack=new c.PackFileReader(a)});else if("Animations"==p)this.loadAsyncResource(a,v,w,function(a){var b=new c.InputStream(a),e=a.byteLength;0<e?(d.animations=JSON.parse(b.getString(e)),c.transformAnimations(d)):d.animations=null});else if("Topology"==p)t<f?this.loadAsyncResource(a,v,w,function(a){var b=new c.InputStream(a),e=a.byteLength;0<e?d.topology=JSON.parse(b.getString(e)):d.topology=null}):d.topologyTooBig=!0;else if(a.loadInstanceTree&&("InstanceTree"==p||"InstanceTreeTree"==p)){var x=r?r[0].version:1;this.parseInstanceTree(a,v,w,x)}}}0==this.pendingRequests&&this.postLoad(a),delete this.unzip},a.prototype.addTransparencyFlagsToMaterials=function(a){for(var b in a){var c=a[b],d=c.userassets,e=c.materials,f=e[d[0]];c.transparent=f.transparent}},a.prototype.postLoadOfCam=function(a){if(this.camDefPack&&this.camInstPack){for(var b=0,d=this.camInstPack.getEntryCounts();b<d;b++){var e=c.readInstance(this.camInstPack,b,this.placementTransform,this.globalOffset),f=c.readCameraDefinition(this.camDefPack,e);e.transform&&(e.transform.transformPoint(f.position),e.transform.transformPoint(f.target),e.transform.transformDirection(f.up)),this.cameras.push(f)}delete this.camDefPack,delete this.camInstPack}},a.prototype.postLoadOfLight=function(a){if(this.lightDefPack&&this.lightInstPack){for(var b=0,d=this.lightInstPack.getEntryCounts();b<d;b++){var e=c.readInstance(this.lightInstPack,b,this.placementTransform,this.globalOffset);this.lights.push(c.readLightDefinition(this.lightDefPack,e.definition))}delete this.lightInstPack,delete this.lightDefPack}},a.prototype.postLoadOfFragments=function(a){var b=this.fragments;if(this.geomMetadata){b.polygonCounts=b.geomDataIndexes;var c=this.geomMetadata;void 0!=c.topoIndexes&&(b.topoIndexes=new Int32Array(b.length));for(var d=0,f=b.length;d<f;d++){var g=b.geomDataIndexes[d];b.entityIndexes[d]=c.entityIndexes[g],b.packIds[d]=c.packIds[g],b.polygonCounts[d]=c.primCounts[g],this.primitiveCount+=c.primCounts[g],void 0!=c.topoIndexes&&(b.topoIndexes[d]=c.topoIndexes[g])}b.geomDataIndexes=null,this.geomMetadata=null}this.calculateMesh2Frag(b),this.geompacks.length>e&&this.geompacks.splice(e,this.geompacks.length-e)},a.prototype.calculateMesh2Frag=function(a){for(var b=a.mesh2frag={},c=a.packIds,d=a.entityIndexes,e=0,f=a.length;e<f;e++){var g=c[e]+":"+d[e],h=b[g];void 0===h?b[g]=e:Array.isArray(h)?h.push(e):b[g]=[h,e]}},a.prototype.postLoadOfBBox=function(a){if(!this.bbox||a.placementTransform){this.bbox&&a.placementTransform&&(this.modelBox=this.bbox);for(var b=[1/0,1/0,1/0,-(1/0),-(1/0),-(1/0)],c=this.fragments,d=c.boxes,e=0,f=c.length;e<f;e++){var g,h=6*e;for(g=0;g<3;g++)d[h+g]<b[g]&&(b[g]=d[h+g]);for(g=3;g<6;g++)d[h+g]>b[g]&&(b[g]=d[h+g])}this.bbox={min:{x:b[0],y:b[1],z:b[2]},max:{x:b[3],y:b[4],z:b[5]}}}},a.prototype.postLoadOfObjectIds=function(a){var b=a.objectIds;if(null!=b){for(var d=[],e=[],f=0;f<b.length;++f)for(var g=0;g<this.fragments.length;++g)this.fragments.fragId2dbId[g]==b[f]&&(d.push(this.fragments.packIds[g]),e.push(g));for(var h=1,i=d.length,f=1;f<i;){for(;f<i&&d[f]==d[f-1];)++f;if(i==f)break;d[h++]=d[f++]}d.splice(h-1,i-h);for(var j=[],f=0;f<this.geompacks.length;++f)for(var g=0;g<d.length;++g)parseInt(this.geompacks[f].id)==d[g]&&j.push(this.geompacks[f]);this.geompacks=j;var k=c.filterFragments(this.fragments,e);this.bbox={min:{x:k[0],y:k[1],z:k[2]},max:{x:k[3],y:k[4],z:k[5]}}}},a.prototype.postLoadComplete=function(a){if(a.loadDoneCB("svf"),this.fragments.polygonCounts){var b=performance.now(),c=this.materials?this.materials.materials:null;c&&this.addTransparencyFlagsToMaterials(c),this.bvh=new d.BVHBuilder(this.fragments,c),this.bvh.build(a.bvhOptions);var e=performance.now();a.worker.debug("BVH build time (worker thread):"+(e-b)),a.loadDoneCB("bvh")}a.loadDoneCB("done")},a.prototype.postLoad=function(a){this.postLoadOfCam(a),this.postLoadOfLight(a),this.postLoadOfFragments(a),this.postLoadOfBBox(a),this.postLoadOfObjectIds(a),this.postLoadComplete(a)},c.Package=a}(),function(){"use strict";function a(a){function c(a){for(var b={},c=0,d=a.length;c<d;c++){var e=a[c];Array.isArray(e)||(e=[e]);for(var f=0;f<e.length;f++){var g=e[f],h=b[g];void 0===h?b[g]=c:Array.isArray(h)?h.push(c):b[g]=[h,c]}}return b}var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r=this;for(var s in a.attrs){d=b.blobToJson(a.attrs[s]);for(var t=0;t<d.length;t++){var u=d[t][1];switch(u){case"__parent__":l=t;break;case"__child__":k=t;break;case"__name__":m=t;break;case"__instanceof__":n=t;break;case"__viewable_in__":o=t;break;case"__externalref__":p=t;break;case"__node_flags__":q=t}}break}for(var s in a.avs){f=b.parseIntArray(a.avs[s],0),delete a.avs;break}for(var s in a.offsets){e=b.parseIntArray(a.offsets[s],1),e[e.length-1]=f.length/2,delete a.offsets;break}for(var s in a.values){g=a.values[s],h=b.findValueOffsets(g);break}for(var s in a.ids){i=a.ids[s],j=b.findValueOffsets(i);break}this.getObjectCount=function(){return e.length-1},this.getValueAt=function(a){return b.subBlobToJson(g,h[a])},this.getIntValueAt=function(a){return b.subBlobToJsonInt(g,h[a])},this.getIdAt=function(a){return b.subBlobToJson(i,j[a])},this.getObjectProperties=function(a,b,c,e){var f={dbId:a,properties:[]},g=!1,h=!1;if((!b||b.indexOf("externalId")!==-1)&&(f.externalId=this.getIdAt(a),g=!0,b&&1===b.length))return f;var i=null;if(this.enumObjectProperties(a,function(a,g){if(a==n){var j=r.getObjectProperties(r.getValueAt(g),b,c);return void(j&&j.properties&&(i=j))}var q=d[a];if(!(b&&b.indexOf(q[0])===-1&&b.indexOf(q[5])===-1||e&&(e.indexOf(q[0])>-1||e.indexOf(q[5])>-1)))if(a==m){var s=r.getValueAt(g);h=!0,f.name=s}else{var t=q[6]?q[6]:0,u=q[5]?q[5]:q[0],v=1&t||a==l||a==k||a==o||a==p;if(c&&v)return;f.properties.push({displayName:u,displayValue:r.getValueAt(g),displayCategory:q[1],attributeName:q[0],type:q[2],units:q[3],hidden:v,precision:q[7]||0})}}),i){for(var j={},q=f.properties,s=0;s<q.length;s++)j[q[s].displayName]=1;f.name||(f.name=i.name);for(var t=i.properties,s=0;s<t.length;s++)j.hasOwnProperty(t[s].displayName)||q.push(t[s])}return!b||f.properties.length||g||h?f:null},this.getExternalIdMapping=function(){var a={};if(j&&"length"in j)for(var b=1,c=j.length;b<c;++b){var d=this.getIdAt(b);a[d]=b}return a},this.findRootNodes=function(){var a=[];return this.enumObjects(function(b){var c=!1,d=!1,e=!1;r.enumObjectProperties(b,function(a,b){a==l?r.getIntValueAt(b)&&(d=!0):a==k?c=!0:a==m&&(e=!0)}),c&&e&&!d&&a.push(b)}),a},this.getNodeNameAndChildren=function(a,b){var c,d=a.dbId;return this.enumObjectProperties(d,function(d,e){var f;if(d==l);else if(d!=k||b)d==m?a.name=r.getValueAt(e):d==q&&(a.flags=r.getIntValueAt(e));else{f=r.getIntValueAt(e);var g={dbId:f,parent:a.dbId};c?c.push(g):c=[g]}}),a.name||this.enumObjectProperties(d,function(b,c){if(b==n){var d={dbId:r.getIntValueAt(c),name:null};r.getNodeNameAndChildren(d,!0),d&&d.name&&!a.name&&(a.name=d.name)}}),c};var v=0,w=6;this.buildObjectTree=function(a,b,d,e){var f;return b&&(f=c(b)),this.buildObjectTreeRec(a,0,f,0,d,e)},this.buildObjectTreeRec=function(a,b,c,d,e,f){d>e[0]&&(e[0]=d);var g={dbId:a},h=this.getNodeNameAndChildren(g),i=[];if(h)for(var j=0;j<h.length;j++){var k=this.buildObjectTreeRec(h[j].dbId,a,c,d+1,e,f);k&&i.push(h[j].dbId)}var l;if(c){var m=c[a];void 0!==m&&(l=Array.isArray(m)?m:[m])}var n=g.flags||0;return void 0===n&&(n=l&&l.length?w:i.length?v:0),f.setNode(a,b,g.name,n,i,l),i.length+(l?l.length:0)},this.bruteForceSearch=function(a,b,c){a=a.toLowerCase();for(var e=a.match(/"[^"]+"|[^\s]+/g)||[],f=e.length;f--;)e[f]=e[f].replace(/"/g,"");for(var g=[],f=0;f<e.length;f++)(c||e[f].length>1)&&g.push(e[f]);if(0===g.length)return[];for(var i=[],j={},k=[],l=0;l<g.length;l++){for(var m=[],n=[],f=0,o=h.length;f<o;f++){var p=this.getValueAt(f);"string"==typeof p?p.toLowerCase().indexOf(g[l])!=-1&&n.push(f):p.toString().toLowerCase().indexOf(g[l])!=-1&&n.push(f)}this.enumObjects(function(a){var e="",f=null;r.enumObjectProperties(a,function(g,h){var i=d[g],j=i[5]?i[5]:i[0];if(c&&"name"===j.toLowerCase()&&(e=r.getValueAt(h)),n.indexOf(h)!=-1){if(b&&b.length&&b.indexOf(d[g][0])===-1)return;return m.push(a),f={id:a,nodeName:"",value:r.getValueAt(h),name:j},!0}}),f&&c&&0===l&&(f.nodeName=e,1===g.length?k.push(f):j[a]=f)}),i.push(m)}if(1===i.length)return c?k:i[0];for(var q={},s=i[0],f=0;f<s.length;f++)q[s[f]]=1;for(var t=1;t<i.length;t++){s=i[t];for(var u={},f=0;f<s.length;f++)1===q[s[f]]&&(u[s[f]]=1);q=u}var m=[];for(var l in q)m.push(parseInt(l)),c&&k.push(j[l]);return c?k:m},this.getAttributeDef=function(a){var b=d[a];return{name:b[0],category:b[1],dataType:b[2],dataTypeContext:b[3],description:b[4],displayName:b[5],flags:b[6]}},this.enumAttributes=function(a){for(var b=1;b<d.length&&!a(b,this.getAttributeDef(b),d[b]);b++);},this.enumObjectProperties=function(a,b){for(var c=2*e[a],d=2*e[a+1],g=c;g<d;g+=2){var h=f[g],i=f[g+1];if(b(h,i))break}},this.enumObjects=function(a){for(var b=1,c=e.length;b<c&&!a(b);b++);},this.getAttrChild=function(){return k},this.getAttrParent=function(){return l},this.getAttrName=function(){return m},this.getAttrInstanceOf=function(){return n},this.getAttrViewableIn=function(){return o},this.getAttrXref=function(){return p},this.getAttrNodeFlags=function(){return q}}var b=Autodesk.LMVTK;b.PropertyDatabase=a}(),function(){"use strict";function a(a,b,d,f){if(this.metadata=a,this.scaleX=1,this.scaleY=1,this.bbox={min:{x:0,y:0,z:0},max:{x:0,y:0,z:0}},this.is2d=!0,this.layersMap={},this.fontDefs={},this.fontCount=0,this.fontId=0,this.manifestAvailable=!1,this.objectMemberQueue=[],this.propertydb={attrs:[],avs:[],ids:[],values:[],offsets:[],rcv_offsets:[],rcvs:[],viewables:[]},a){var g=a.page_dimensions;this.paperWidth=g.page_width,this.paperHeight=g.page_height,this.scaleX=this.paperWidth/g.plot_width,this.scaleY=this.paperHeight/g.plot_height,this.hidePaper=g.hide_paper,this.bbox.max.x=this.paperWidth,this.bbox.max.y=this.paperHeight;var h=0;this.layersMap[0]=h++;for(var i in a.layers){var j=parseInt(i);this.layersMap[j]=h++}this.layerCount=h,this.createLayerGroups(a.layers)}if(this.hidePaper=this.hidePaper||f&&f.modelSpace,this.opCount=0,this.fontFaces=[],this.fontFamilies=[],this.viewports=[0],this.currentVpId=0,this.clips=[0],this.strings=[],this.stringDbIds=[],this.stringBoxes=[],this.currentStringNumber=-1,this.currentStringBox=new LmvBox3,this.objectNumber=0,this.currentFakeId=-2,this.imageNumber=0,this.maxObjectNumber=0,this.objectStack=[],this.objectNameStack=[],this.parseObjState={polyTriangle:{},viewport:{},clip:{},raster:{},text:{},fontDef:{},uknown:{}},this.layer=0,this.bgColor="number"==typeof f.bgColor?f.bgColor:4294967295,this.contrastColor=this.color=this.fillColor=4278190080,this.hidePaper&&(this.contrastColor=4294967040),this.useInstancing=f&&!!f.useInstancing,this.isMobile=f&&!!f.isMobile,this.max_vcount=this.isMobile?e:void 0,this.currentVbb=new c.VertexBufferBuilder(this.useInstancing,void 0,this.max_vcount),this.meshes=[],this.numCircles=this.numEllipses=this.numPolylines=this.numLineSegs=0,this.numPolytriangles=this.numTriangles=0,this.error=!1,this.offsetX=0,this.offsetY=0,b){this.manifestAvailable=!0,this.imageId2URI={};for(var k=b.assets,l=0,m=k.length;l<m;++l){var n=k[l],o=n.mime;if(o.indexOf("image/")!=-1){var p=n.id;p=p.substr(0,p.indexOf(".")),this.imageId2URI[p]=d+n.URI}"Autodesk.CloudPlatform.PropertyAttributes"==n.type&&this.propertydb.attrs.push(n.URI),"Autodesk.CloudPlatform.PropertyValues"==n.type&&this.propertydb.values.push(n.URI),"Autodesk.CloudPlatform.PropertyIDs"==n.type&&this.propertydb.ids.push(n.URI),"Autodesk.CloudPlatform.PropertyViewables"==n.type&&this.propertydb.viewables.push(n.URI),"Autodesk.CloudPlatform.PropertyOffsets"==n.type&&(n.id.indexOf("rcv")!=-1?this.propertydb.rcv_offsets.push(n.URI):this.propertydb.offsets.push(n.URI)),"Autodesk.CloudPlatform.PropertyAVs"==n.type&&this.propertydb.avs.push(n.URI),"Autodesk.CloudPlatform.PropertyRCVs"==n.type&&this.propertydb.rcvs.push(n.URI)}}}var b=Autodesk.Viewing,c=b.Private,d=Autodesk.LMVTK,e=16383,f={dt_object:0,dt_void:1,dt_byte:2,dt_int:3,dt_float:4,dt_double:5,dt_varint:6,dt_point_varint:7,dt_byte_array:32,dt_int_array:33,dt_float_array:34,dt_double_array:35,dt_varint_array:36,dt_point_varint_array:37,dt_arc:38,dt_circle:39,dt_circular_arc:40,dt_string:63,dt_last_data_type:127},g={st_object_member:0,st_fill:1,st_fill_off:2,st_clip_off:3,st_layer:4,st_link:5,st_line_weight:6,st_miter_angle:7,st_miter_length:8,st_line_pattern_ref:9,st_back_color:10,st_color:11,st_markup:12,st_object_id:13,st_markup_id:14,st_reset_rel_offset:15,st_font_ref:16,st_begin_object:32,st_clip:33,st_line_caps:34,st_line_join:35,st_line_pattern_def:36,st_font_def:37,st_viewport:38,st_sheet:42,st_arc:43,st_polyline:44,st_raster:45,st_text:46,st_polytriangle:47,st_dot:48,st_end_object:63,st_last_semantic_type:127};a.prototype.load=function(a,b){if(b instanceof Uint8Array||(b=new Uint8Array(b)),this.data=b,this.parse(),this.stringBoxes.length){var c=new Float32Array(this.stringBoxes.length);c.set(this.stringBoxes),this.stringBoxes=c}a.loadDoneCB(!0)},a.prototype.loadFrames=function(a){this.loadContext=a;var b=a.data;if(b)b instanceof Uint8Array||(b=new Uint8Array(b)),this.data=b;else if(a.finalFrame&&(this.data=null,this.stringBoxes.length)){var c=new Float32Array(this.stringBoxes.length);c.set(this.stringBoxes),this.stringBoxes=c}this.parseFrames(a.finalFrame),a.loadDoneCB(!0)},a.prototype.pushMesh=function(a){this.meshes.push(a),a.material={skipEllipticals:!this.currentVbb.numEllipticals,skipCircles:!this.currentVbb.numCirculars,skipTriangleGeoms:!this.currentVbb.numTriangleGeoms,useInstancing:this.currentVbb.useInstancing},this.currentImage&&(a.material.image=this.currentImage,a.material.image.name=this.imageNumber++,this.currentImage=null)},a.prototype.flushBuffer=function(a,b){if(this.currentVbb.vcount||b){var e=b;if(e=e||this.currentVbb.isFull(a)){if(this.currentVbb.vcount){var f=this.currentVbb.toMesh();d.VBUtils.bboxUnion(this.bbox,f.boundingBox),this.pushMesh(f),this.currentVbb=new c.VertexBufferBuilder(this.useInstancing,void 0,this.max_vcount)}this.loadContext&&this.loadContext.loadDoneCB(!0,b)}}},a.prototype.tx=function(a){return this.sx(a)},a.prototype.ty=function(a){return this.sy(a)},a.prototype.sx=function(a){return a*this.scaleX},a.prototype.sy=function(a){return a*this.scaleY},a.prototype.invertColor=function(a){var b=a>>24&255,c=a>>16&255,d=a>>8&255,e=255&a;return c=255-c,d=255-d,e=255-e,b<<24|c<<16|d<<8|e},a.prototype.mapColor=function(a,b){if(!this.hidePaper)return a;if(0!==this.bgColor)return a;var c=255&a,d=(65280&a)>>8,e=(16711680&a)>>16,f=c===d&&c===e;return c<127||f&&b&&(a&=2583691263),a},a.prototype.restoreSignBitFromLSB=function(a){return 1&a?-(a>>>1):a>>>1},a.prototype.parsePointPositions=function(){var a=this.stream.getVarints(),b=this.stream.getVarints();return a=this.restoreSignBitFromLSB(a),b=this.restoreSignBitFromLSB(b),a+=this.offsetX,b+=this.offsetY,this.offsetX=a,this.offsetY=b,[this.tx(a),this.ty(b)]},a.prototype.parserAssert=function(a,b,d){return a!=b&&(c.logger.warn("Expect "+b+"; actual type is "+a+"; in function "+d),this.error=!0,!0)},a.prototype.unhandledTypeWarning=function(a,b){c.logger.warn("Unhandled semantic type : "+b+" in function "+a)},a.prototype.parseObject=function(){var a=this.stream.getVarints();switch(this.objectStack.push(a),a){case g.st_sheet:this.objectNameStack.push("sheet"),this.objectMemberQueue.unshift("paperColor");break;case g.st_viewport:this.objectNameStack.push("viewport"),this.objectMemberQueue.unshift("units","transform");break;case g.st_clip:this.objectNameStack.push("clip"),this.objectMemberQueue.unshift("contourCounts","points","indices");break;case g.st_polytriangle:this.objectNameStack.push("polyTriangle"),this.objectMemberQueue.unshift("points","indices","colors");break;case g.st_raster:this.objectNameStack.push("raster"),this.objectMemberQueue.unshift("position","width","height","imageId");break;case g.st_text:this.currentStringNumber=this.strings.length,0===this.objectNumber&&(this.objectNumber=this.currentFakeId--),this.currentStringBox.makeEmpty(),this.objectNameStack.push("text"),this.objectMemberQueue.unshift("string","position","height","widthScale","rotation","oblique","charWidths");break;case g.st_font_def:this.objectNameStack.push("fontDef"),this.objectMemberQueue.unshift("name","fullName","flags","spacing","panose");break;case g.st_end_object:if(this.objectStack.pop(),this.objectStack.length){var b=this.objectStack.pop();switch(b){case g.st_polytriangle:this.actOnPolyTriangle();break;case g.st_viewport:this.actOnViewport();break;case g.st_clip:this.actOnClip();break;case g.st_raster:this.actOnRaster();break;case g.st_text:this.actOnText();break;case g.st_font_def:this.actOnFontDef()}var c=this.objectNameStack.pop(),d=this.parseObjState[c];for(var e in d)d[e]=null}else this.parserAssert(0,1,"parseEndObject (Stack Empty)");this.objectMemberQueue.length=0;break;default:this.objectNameStack.push("unknown"),this.error=!0,this.unhandledTypeWarning("parseObject",a)}},a.prototype.initSheet=function(a){if(this.bgColor=a,!this.hidePaper&&this.metadata){var b=this.paperWidth,c=this.paperHeight,d=this.currentVbb,e=.0075*b,f=4283782485,g=[0,0,b,0,b,c,0,c,e,-e,b+e,-e,b+e,0,e,0,b,0,b+e,0,b+e,c-e,b,c-e],h=[a,a,a,a,f,f,f,f,f,f,f,f],i=[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11],j=0,k=-1;this.addPolyTriangle(g,h,i,4294967295,k,j,!1),d.addSegment(0,0,b,0,0,1e-6,4278190080,k,j,this.currentVpId),d.addSegment(b,0,b,c,0,1e-6,4278190080,k,j,this.currentVpId),d.addSegment(b,c,0,c,0,1e-6,4278190080,k,j,this.currentVpId),d.addSegment(0,c,0,0,0,1e-6,4278190080,k,j,this.currentVpId)}},a.prototype.setObjectMember=function(a){if(!this.objectMemberQueue.length)return c.logger.warn("Unexpected object member. "+a+" on object "+this.objectNameStack[this.objectNameStack.length-1]),!1;var b=this.objectMemberQueue.shift(),d=this.objectNameStack[this.objectNameStack.length-1];return"sheet"==d&&"paperColor"==b?(this.initSheet(a),!0):!!d&&(this.parseObjState[d][b]=a,!0)},a.prototype.parseString=function(){var a=this.stream,b=a.getVarints(),d=a.getVarints(),e=a.getString(d);switch(b){case g.st_object_member:if(this.setObjectMember(e))return;break;default:c.logger.info("Unexpected opcode semantic type for string.")}return e},a.prototype.actOnFontDef=function(){var a=this.parseObjState.fontDef;this.fontDefs[++this.fontCount]=a,this.fontId=this.fontCount},a.prototype.parsePoint=function(){var a=this.stream,b=a.getVarints(),d=this.parsePointPositions();switch(b){case g.st_object_member:if(this.setObjectMember(d))return;break;default:c.logger.info("Unexpected opcode semantic type for point.")}return d},a.prototype.parsePointsArray=function(){var a=this.stream,b=a.getVarints(),d=a.getVarints();if(d){d/=2;for(var e,f=[],h=0;h<d;++h)e=this.parsePointPositions(),f.push(e[0]),f.push(e[1]);switch(b){case g.st_polyline:return void this.actOnPolylinePointsArray(f);case g.st_dot:return void this.actOnDot(f);case g.st_object_member:if(this.setObjectMember(f))return;break;default:c.logger.info("Unexpected opcode semantic type for points array.")}return f}},a.prototype.parseIntArray=function(){for(var a=this.stream,b=a.getVarints(),c=a.getVarints(),d=[],e=0;e<c;++e)d.push(a.getUint32());switch(b){case g.st_object_member:if(this.setObjectMember(d))return;break;default:this.unhandledTypeWarning("parseIntArray",b)}return d},a.prototype.parseDoubleArray=function(){for(var a=this.stream,b=a.getVarints(),c=a.getVarints(),d=[],e=0;e<c;++e)d.push(a.getFloat64());switch(b){case g.st_object_member:if(this.setObjectMember(d))return;break;default:this.unhandledTypeWarning("parseDoubleArray",b)}return d},a.prototype.parseByteArray=function(){for(var a=this.stream,b=a.getVarints(),c=a.getVarints(),d=[],e=0;e<c;++e)d.push(a.getUint8());switch(b){case g.st_object_member:if(this.setObjectMember(d))return;break;default:this.unhandledTypeWarning("parseByteArray",b)}return d},a.prototype.parseVarintArray=function(){for(var a=this.stream,b=a.getVarints(),c=[],d=a.getVarints(),e=0;e<d;++e)c.push(a.getVarints());switch(b){case g.st_object_member:if(this.setObjectMember(c))return;break;default:this.unhandledTypeWarning("parseVarIntArray",b)}return c},a.prototype.parseInt=function(){var a=this.stream,b=a.getVarints(),c=a.getUint32();switch(b){case g.st_color:this.color=this.mapColor(c,!1);break;case g.st_fill:this.fill=!0,this.fillColor=this.mapColor(c,!0);break;case g.st_object_member:if(this.setObjectMember(c))return;default:this.unhandledTypeWarning("parseInt",b)}return c},a.prototype.parseVoid=function(){var a=this.stream.getVarints();switch(a){case g.st_fill_off:this.fill=!1;break;default:this.unhandledTypeWarning("parseVoid",a)}},a.prototype.parseVarint=function(){var a=this.stream,b=a.getVarints(),c=a.getVarints();switch(b){case g.st_line_weight:this.lineWeight=this.tx(c);break;case g.st_object_id:case g.st_markup_id:this.objectNumber=c,this.maxObjectNumber=Math.max(this.maxObjectNumber,c);break;case g.st_layer:this.layer=this.layersMap[c];break;case g.st_font_ref:this.fontId=c;break;case g.st_object_member:if(this.setObjectMember(c))return}return c},a.prototype.parseFloat=function(){var a=this.stream,b=a.getVarints(),c=a.getFloat32();switch(b){case g.st_miter_angle:break;case g.st_miter_length:break;case g.st_object_member:if(this.setObjectMember(c))return}return c},a.prototype.parseCircularArc=function(){var a=this.stream,b=a.getVarints();if(!this.parserAssert(b,g.st_arc,"parseCircularArc")){var c=this.parsePointPositions(),d=a.getVarints(),e=a.getFloat32(),f=a.getFloat32();this.actOnCircularArc(c[0],c[1],e,f,this.sx(d))}},a.prototype.parseCircle=function(){var a=this.stream,b=a.getVarints();if(!this.parserAssert(b,g.st_arc,"parseCircle")){var c=this.parsePointPositions(),d=a.getVarints();this.actOnCompleteCircle(c[0],c[1],this.sx(d))}},a.prototype.parseArc=function(){var a=this.stream,b=a.getVarints();if(!this.parserAssert(b,g.st_arc,"parseArc")){var c=this.parsePointPositions(),d=a.getVarints(),e=a.getVarints(),f=a.getFloat32(),h=a.getFloat32(),i=a.getFloat32();this.actOnArc(c[0],c[1],h,i,this.sx(d),this.sy(e),f)}},a.prototype.parseDataType=function(){var a=this.stream.getVarints();switch(a){case f.dt_void:this.parseVoid();break;case f.dt_int:this.parseInt();break;case f.dt_object:this.parseObject();break;case f.dt_varint:this.parseVarint();break;case f.dt_point_varint:this.parsePoint();break;case f.dt_float:this.parseFloat();break;case f.dt_point_varint_array:this.parsePointsArray();break;case f.dt_circular_arc:this.parseCircularArc();break;case f.dt_circle:this.parseCircle();break;case f.dt_arc:this.parseArc();break;case f.dt_int_array:this.parseIntArray();break;case f.dt_varint_array:this.parseVarintArray();break;case f.dt_byte_array:this.parseByteArray();break;case f.dt_string:this.parseString();break;case f.dt_double_array:this.parseDoubleArray();break;default:this.error=!0,c.logger.info("Data type not supported yet: "+a)}},a.prototype.readHeader=function(){var a=this.stream=new d.InputStream(this.data),e=a.getString(3);if("F2D"!=e)return c.logger.error("Invalid F2D header : "+e,b.errorCodeString(b.ErrorCodes.BAD_DATA)),!1;var f=a.getString(2);if("01"!=f)return c.logger.error("Only support f2d major version 1; actual version is : "+f,b.errorCodeString(b.ErrorCodes.BAD_DATA)),
!1;var g=a.getString(1);if("."!=g)return c.logger.error("Invalid version delimiter.",b.errorCodeString(b.ErrorCodes.BAD_DATA)),!1;a.getString(2);return!0},a.prototype.parse=function(){if(this.readHeader()){for(var a=this.stream;a.offset<a.byteLength&&(this.parseDataType(),!this.error);)this.opCount++;this.flushBuffer(0,!0),this.currentVbb=null,this.stream=null,this.data=null,c.logger.info("F2d parse: data types count : "+this.opCount)}},a.prototype.parseFrames=function(a){if(this.data)for(var b=this.stream=new d.InputStream(this.data);b.offset<b.byteLength&&(this.parseDataType(),!this.error);)this.opCount++;else a||c.logger.warn("Unexpected F2D parse state: If there is no data, we only expect a flush command, but flush was false.");a&&this.flushBuffer(0,!0),this.stream=null,this.data=null},a.prototype.actOnPolylinePointsArray=function(a){this.flushBuffer(),this.numPolylines++;for(var b=a.length/2,c=0,d=a[0],e=a[1],f=1;f<b;++f){var g=a[2*f],h=a[2*f+1];this.currentVbb.addSegment(d,e,g,h,c,this.lineWeight,this.color,this.objectNumber,this.layer,this.currentVpId),c+=Math.sqrt((g-d)*(g-d)+(h-e)*(h-e)),d=g,e=h}this.numLineSegs+=b-1},a.prototype.actOnDot=function(a){var b=a[0],c=a[1];this.actOnCompleteCircle(b,c,this.sx(1))},a.prototype.actOnCompleteCircle=function(a,b,c){this.flushBuffer(),this.numCircles++,this.fill?this.currentVbb.addSegment(a,b,a,b,0,2*c,this.color,this.objectNumber,this.layer,this.currentVpId,!0,!1,!0):this.currentVbb.addArc(a,b,0,2*Math.PI,c,c,0,this.lineWeight,this.color,this.objectNumber,this.layer,this.currentVpId)},a.prototype.actOnCircularArc=function(a,b,c,d,e){this.numCircles++,this.flushBuffer(),this.currentVbb.addArc(a,b,c,d,e,e,0,this.lineWeight,this.color,this.objectNumber,this.layer,this.currentVpId)},a.prototype.actOnArc=function(a,b,c,d,e,f,g){this.numEllipses++,this.flushBuffer(),this.currentVbb.addArc(a,b,c,d,e,f,g,this.lineWeight,this.color,this.objectNumber,this.layer,this.currentVpId)},a.prototype.actOnRaster=function(){if(this.manifestAvailable){this.flushBuffer(4,!0);var a=this.parseObjState.raster,b=a.position,c=a.imageId,d=this.imageId2URI[c],e=this.sx(a.width),f=this.sy(a.height),g=b[0]+.5*e,h=b[1]-.5*f;this.currentVbb.addTexturedQuad(g,h,e,f,0,4278255615,this.objectNumber,this.layer,this.currentVpId),this.currentImage={dataURI:d},this.flushBuffer(0,!0)}},a.prototype.actOnClip=function(){var a=this.parseObjState.clip;this.parseObjState.clip={},this.clips.push(a)},a.prototype.actOnText=function(){this.strings[this.currentStringNumber]=this.parseObjState.text.string,this.stringDbIds[this.currentStringNumber]=this.objectNumber,this.stringBoxes.push(this.currentStringBox.min.x,this.currentStringBox.min.y,this.currentStringBox.max.x,this.currentStringBox.max.y),this.currentStringBox.makeEmpty(),this.currentStringNumber=-1,this.objectNumber<-1&&(this.objectNumber=0)};var h=new LmvVector3;a.prototype.addPolyTriangle=function(a,b,d,e,f,i,j){function k(a,b){if(a>b){var c=a;a=b,b=c}if(o[a]){var d=o[a],e=d.lastIndexOf(b);e==-1?d.push(b):d[e]=-1}else o[a]=[b]}function l(){for(var d=0,g=o.length;d<g;d++){var h=o[d];if(h)for(var j=0;j<h.length;j++){var k=h[j];k!=-1&&(n.flushBuffer(4),n.currentVbb.addSegment(a[2*d],a[2*d+1],a[2*k],a[2*k+1],0,p,n.mapColor(b?b[d]:e,!0),f,i,n.currentVpId),b&&b[d]!=b[k]&&c.logger.warn("Gouraud triangle encountered. Will have incorrect antialiasing."))}}}function m(d,g){if(d>g){var h=d;d=g,g=h}var j=o[d];if(j){var k=j.indexOf(g);k!=-1&&(n.flushBuffer(4),n.currentVbb.addSegment(a[2*d],a[2*d+1],a[2*g],a[2*g+1],0,p,n.mapColor(b?b[d]:e,!0),f,i,n.currentVpId),b&&b[d]!=b[g]&&c.logger.warn("Gouraud triangle encountered. Will have incorrect antialiasing."))}}var n=this,o=null,p=-1;if(this.objectStack[this.objectStack.length-1]==g.st_text&&(p=-.5),j){o=new Array(a.length/2);for(var q=0,r=d.length;q<r;q+=3){var s=d[q],t=d[q+1],u=d[q+2];k(s,t),k(t,u),k(u,s)}}if(this.currentStringNumber!==-1)for(var v=a.length/2,q=0;q<v;++q)h.set(a[2*q],a[2*q+1],0),this.currentStringBox.expandByPoint(h);if(this.currentVbb.useInstancing)for(var v=d.length,q=0;q<v;q+=3){var s=d[q],t=d[q+1],u=d[q+2];this.flushBuffer(4),this.currentVbb.addTriangleGeom(a[2*s],a[2*s+1],a[2*t],a[2*t+1],a[2*u],a[2*u+1],this.mapColor(b?b[s]:e,!0),f,i,this.currentVpId),j&&(m(s,t),m(t,u),m(u,s))}else{var v=a.length/2;this.flushBuffer(v);for(var w=this.currentVbb,x=w.vcount,q=0;q<v;++q){var y=a[2*q],z=a[2*q+1];w.addVertexPolytriangle(y,z,this.mapColor(b?b[q]:e,!0),f,i,this.currentVpId)}w.addIndices(d,x),j&&l()}},a.prototype.actOnPolyTriangle=function(){var a=this.parseObjState.polyTriangle;this.parseObjState.polyTriangle={};var b=a.points,d=a.indices,e=a.colors;return b&&d?(this.numPolytriangles++,this.numTriangles+=d.length/3,void this.addPolyTriangle(b,e,d,this.color,this.objectNumber,this.layer,!0)):void c.logger.warn("Malformed polytriangle.")},a.prototype.actOnViewport=function(){var a=this.parseObjState.viewport;this.parseObjState.viewport={},this.viewports.push(a),this.currentVpId=this.viewports.length-1},a.prototype.createLayerGroups=function(a){function b(a){var c=Object.keys(a.childrenByName).map(function(b){return a.childrenByName[b]});if(delete a.childrenByName,c.length){a.children=c,a.childCount=0;for(var d=0;d<c.length;++d)a.childCount+=b(c[d]);c.sort(function(a,b){return a.isLayer&&!b.isLayer?-1:!a.isLayer&&b.isLayer?1:a.name.localeCompare(b.name,void 0,{sensitivity:"base",numeric:!0})})}return a.isLayer?1:a.childCount}var c=this.layersRoot={name:"root",id:"root",childrenByName:{},isLayer:!1},d=0,e=0;for(var f in a){var g=parseInt(f),h=a[f],i="string"==typeof h?h:h.name;i||(i=f);var j=i.split("|"),k=c;if(j.length>1)for(var l=0;l<j.length-1;++l){var m=j[l],n=k.childrenByName[m];n||(n={name:m,id:"group-"+d++,childrenByName:{},isLayer:!1},k.childrenByName[m]=n),k=n}k.childrenByName[i]={name:i,index:g,id:e++,childrenByName:{},isLayer:!0}}b(this.layersRoot)},d.F2D=a,d.F2dDataType=f,d.F2dSemanticType=g}(),function(){"use strict";function a(a,b,c,e){d.F2D.call(this,a,b,c,e)}var b=Autodesk.Viewing,c=b.Private,d=Autodesk.LMVTK;a.prototype=Object.create(d.F2D.prototype),a.prototype.constructor=a,a.prototype.load=function(a,b){b instanceof Uint8Array||(b=new Uint8Array(b)),this.data=b,this.readHeader()},a.prototype.loadFrames=function(a){if(this.loadContext=a,this.acceptMeshCB=a.acceptMeshCB,null==this.stream){var b=a.data;if(b)b instanceof Uint8Array||(b=new Uint8Array(b)),this.data=b;else if(a.finalFrame&&(this.data=null,this.stringBoxes.length)){var c=new Float32Array(this.stringBoxes.length);c.set(this.stringBoxes),this.stringBoxes=c}}this.parseFrames(a.finalFrame),a.loadDoneCB(!0)},a.prototype.pushMesh=function(a){this.acceptMeshCB&&!this.acceptMeshCB(a)||d.F2D.prototype.pushMesh.call(this,a)},a.prototype.parseFrames=function(a){if(this.data||this.stream){this.stream||(this.stream=new d.InputStream(this.data));for(var b=this.stream;b.offset<b.byteLength;){if(this.meshes.length>0)return;if(this.parseDataType(),this.error)break;this.opCount++}}else a||c.logger.warn("Unexpected F2D parse state: If there is no data, we only expect a flush command, but flush was false.");a&&this.flushBuffer(0,!0),this.stream=null,this.data=null},a.prototype.saveState=function(){var a={};a.fontCount=this.fontCount,a.fontId=this.fontId,a.objectMemberQueue=[].concat(this.objectMemberQueue),a.viewportCount=this.viewports.length,a.currentVpId=this.currentVpId,a.clipsCount=this.clips.length,a.stringsCount=this.strings.length,a.currentStringNumber=this.currentStringNumber,a.currentStringBox=this.currentStringBox.clone(),a.objectNumber=this.objectNumber,a.currentFakeId=this.currentFakeId,a.maxObjectNumber=this.maxObjectNumber,a.objectStack=[].concat(this.objectStack),a.objectNameStack=[].concat(this.objectNameStack);var b=a.parseObjState={},c=b.polyTriangle={};c.points=this.parseObjState.polyTriangle.points,c.indices=this.parseObjState.polyTriangle.indices,c.colors=this.parseObjState.polyTriangle.colors;var d=b.viewport={};d.units=this.parseObjState.viewport.units,d.transform=this.parseObjState.viewport.transform;var e=b.clip={};e.contourCounts=this.parseObjState.clip.contourCounts,e.points=this.parseObjState.clip.points,e.indices=this.parseObjState.clip.indices;var f=b.raster={};f.position=this.parseObjState.raster.position,f.width=this.parseObjState.raster.width,f.height=this.parseObjState.raster.height,f.imageId=this.parseObjState.raster.imageId;var g=b.text={};g.string=this.parseObjState.text.string,g.position=this.parseObjState.text.position,g.height=this.parseObjState.text.height,g.widthScale=this.parseObjState.text.widthScale,g.rotation=this.parseObjState.text.rotation,g.oblique=this.parseObjState.text.oblique,g.charWidths=this.parseObjState.text.charWidths;var h=b.fontDef={};return h.name=this.parseObjState.fontDef.name,h.fullName=this.parseObjState.fontDef.fullName,h.flags=this.parseObjState.fontDef.flags,h.spacing=this.parseObjState.fontDef.spacing,h.panose=this.parseObjState.fontDef.panose,b.uknown={},a.lineWeight=this.lineWeight,a.color=this.color,a.layer=this.layer,a.bgColor=this.bgColor,a.vbbCount=this.currentVbb.vcount,a.numCircles=this.numCircles,a.numEllipses=this.numEllipses,a.numPolylines=this.numPolylines,a.numLineSegs=this.numLineSegs,a.numPolytriangles=this.numPolytriangles,a.numTriangles=this.numTriangles,a.error=this.error,a.offsetX=this.offsetX,a.offsetY=this.offsetY,a.streamPosition=null==this.stream?0:this.stream.offset,a},a.prototype.restoreState=function(a,b){if(b||!this.stream||a.streamPosition!=this.stream.offset){if(b)this.stream=new d.InputStream(b);else if(!this.stream)return!1;this.stream.seek(a.streamPosition),this.currentVbb.reset(a.vbbCount),this.fontCount=a.fontCount,this.fontId=a.fontId,this.objectMemberQueue=[].concat(a.objectMemberQueue),this.viewports.length=a.viewportCount,this.currentVpId=a.currentVpId,this.clips.length=a.clipsCount,this.strings.length=a.stringsCount,this.currentStringNumber=a.currentStringNumber,this.currentStringBox=a.currentStringBox,this.objectNumber=a.objectNumber,this.currentFakeId=a.currentFakeId,this.maxObjectNumber=a.maxObjectNumber,this.objectStack=[].concat(a.objectStack),this.objectNameStack=[].concat(a.objectNameStack);var c=this.parseObjState,e=c.polyTriangle;e.points=a.parseObjState.polyTriangle.points,e.indices=a.parseObjState.polyTriangle.indices,e.colors=a.parseObjState.polyTriangle.colors;var f=c.viewport;f.units=a.parseObjState.viewport.units,f.transform=a.parseObjState.viewport.transform;var g=c.clip;g.contourCounts=a.parseObjState.clip.contourCounts,g.points=a.parseObjState.clip.points,g.indices=a.parseObjState.clip.indices;var h=c.raster;h.position=a.parseObjState.raster.position,h.width=a.parseObjState.raster.width,h.height=a.parseObjState.raster.height,h.imageId=a.parseObjState.raster.imageId;var i=c.text;i.string=a.parseObjState.text.string,i.position=a.parseObjState.text.position,i.height=a.parseObjState.text.height,i.widthScale=a.parseObjState.text.widthScale,i.rotation=a.parseObjState.text.rotation,i.oblique=a.parseObjState.text.oblique,i.charWidths=a.parseObjState.text.charWidths;var j=c.fontDef;j.name=a.parseObjState.fontDef.name,j.fullName=a.parseObjState.fontDef.fullName,j.flags=a.parseObjState.fontDef.flags,j.spacing=a.parseObjState.fontDef.spacing,j.panose=a.parseObjState.fontDef.panose,this.lineWeight=a.lineWeight,this.color=a.color,this.layer=a.layer,this.bgColor=a.bgColor,this.numCircles=a.numCircles,this.numEllipses=a.numEllipses,this.numPolylines=a.numPolylines,this.numLineSegs=a.numLineSegs,this.numPolytriangles=a.numPolytriangles,this.numTriangles=a.numTriangles,this.error=a.error,this.offsetX=a.offsetX,this.offsetY=a.offsetY}return!0},d.F2DOnDemand=a}(),function(){"use strict";function a(){this.data=null,this.frameStart=0,this.frameEnd=0,this.stream=null,this.opCount=0,this.marker={frameStart:this.frameStart,frameEnd:this.frameEnd}}var b=Autodesk.LMVTK,c=Autodesk.Viewing,d=Autodesk.Viewing.Private;a.prototype.load=function(a){return this.data=a,this.frameStart=0,this.stream?(this.stream.reset(this.data),this.stream.seek(0),this.frameEnd=0):(this.stream=new b.CheckedInputStream(this.data),this.stream.seek(8),this.frameStart=8,this.frameEnd=8),this.probe(),this.marker.frameStart=this.frameStart,this.marker.frameEnd=this.frameEnd,this.marker};var e=b.F2dDataType,f=b.F2dSemanticType;a.prototype.readColor=function(){var a=this.stream;a.getVarints(),a.getVarints(),a.skipUint32()},a.prototype.parsePointPositions=function(){this.stream.getVarints(),this.stream.getVarints()},a.prototype.unhandledTypeWarning=function(a,b){d.logger.warn("Unhandled semantic type when probing F2d : "+b+" in function "+a)},a.prototype.parseObject=function(){this.stream.getVarints()},a.prototype.parseString=function(){var a=this.stream;a.getVarints();var b=a.getVarints();a.skipBytes(b)},a.prototype.parsePoint=function(){this.stream.getVarints(),this.parsePointPositions()},a.prototype.parseVarintArray=function(){var a=this.stream;a.getVarints();for(var b=a.getVarints(),c=0;c<b;++c)a.getVarints()},a.prototype.parseByteArray=function(){var a=this.stream;a.getVarints();var b=a.getVarints();a.skipBytes(b)},a.prototype.parseEndOfObject=function(){var a=this.stream;a.getVarints(),a.getVarints()},a.prototype.parsePointsArray=function(a){var b=this.stream,c=(b.getVarints(),b.getVarints());if(c){c/=2;for(var d=0;d<c;++d)this.parsePointPositions()}},a.prototype.parsePoint=function(a){var b=this.stream;b.getVarints();this.parsePointPositions()},a.prototype.parseInt=function(){var a=this.stream,b=a.getVarints();switch(b){case f.st_color:a.skipUint32();break;case f.st_fill:a.skipUint32();break;default:a.skipUint32(),this.unhandledTypeWarning("parseInt",b)}},a.prototype.parseVoid=function(){var a=this.stream.getVarints();switch(a){case f.st_fill_off:break;default:this.unhandledTypeWarning("parseVoid",a)}},a.prototype.parseVarint=function(){this.stream.getVarints(),this.stream.getVarints()},a.prototype.parseIntArray=function(){var a=this.stream;a.getVarints();for(var b=a.getVarints(),c=0;c<b;++c)a.skipUint32()},a.prototype.parseFloat=function(){var a=this.stream;a.getVarints(),a.getFloat32()},a.prototype.parseDoubleArray=function(){var a=this.stream;a.getVarints();for(var b=a.getVarints(),c=0;c<b;++c)a.skipFloat64()},a.prototype.parseCircularArc=function(){var a=this.stream;a.getVarints(),this.parsePointPositions(),a.getVarints(),a.getFloat32(),a.getFloat32()},a.prototype.parseCircle=function(){var a=this.stream;a.getVarints(),this.parsePointPositions(),a.getVarints()},a.prototype.parseArc=function(){var a=this.stream;a.getVarints(),this.parsePointPositions(),a.getVarints(),a.getVarints(),a.getFloat32(),a.getFloat32(),a.getFloat32()},a.prototype.parseDataType=function(){var a=this.stream.getVarints();switch(a){case e.dt_void:this.parseVoid();break;case e.dt_int:this.parseInt();break;case e.dt_object:this.parseObject();break;case e.dt_varint:this.parseVarint();break;case e.dt_float:this.parseFloat();break;case e.dt_point_varint:this.parsePoint();break;case e.dt_point_varint_array:this.parsePointsArray();break;case e.dt_circular_arc:this.parseCircularArc();break;case e.dt_circle:this.parseCircle();break;case e.dt_arc:this.parseArc();break;case e.dt_varint_array:this.parseVarintArray();break;case e.dt_int_array:this.parseIntArray();break;case e.dt_byte_array:this.parseByteArray();break;case e.dt_string:this.parseString();break;case e.dt_double_array:this.parseDoubleArray();break;default:this.error=!0,d.logger.error("Bad op code encountered : "+a+" , bail out.",c.errorCodeString(c.ErrorCodes.BAD_DATA))}this.error||(this.frameEnd=this.stream.offset)},a.prototype.probe=function(){var a=this.stream;try{for(;a.offset<a.byteLength&&(this.parseDataType(),!this.error);)this.opCount++}catch(a){a.toString(),a.stack?a.stack.toString():"..."}},b.F2DProbe=a}(),function(){"use strict";function a(a){this.buffer=a,this.offset=0,this.byteLength=a.length,this.convBuf=new ArrayBuffer(8),this.convUint8=new Uint8Array(this.convBuf),this.convUint16=new Uint16Array(this.convBuf),this.convInt32=new Int32Array(this.convBuf),this.convUint32=new Uint32Array(this.convBuf)}function b(a){this.offset=a,this.message="try to access an offset that is out of bounds: "+this.offset,this.toString=function(){return this.message}}var c=Autodesk.LMVTK;a.prototype.boundsCheck=function(a){if(a>=this.byteLength)throw new b(a)},a.prototype.seek=function(a){this.boundsCheck(a),this.offset=a},a.prototype.getBytes=function(a){this.boundsCheck(this.offset+a);var b=new Uint8Array(this.buffer.buffer,this.offset,a);return this.offset+=a,b},a.prototype.skipBytes=function(a){this.boundsCheck(this.offset+a),this.offset+=a},a.prototype.getVarints=function(){var a,b=0,c=0;do this.boundsCheck(this.offset),a=this.buffer[this.offset++],b|=(127&a)<<c,c+=7;while(128&a);return b},a.prototype.getUint8=function(){return this.boundsCheck(this.offset+1),this.buffer[this.offset++]},a.prototype.getUint16=function(){return this.boundsCheck(this.offset+2),this.convUint8[0]=this.buffer[this.offset++],this.convUint8[1]=this.buffer[this.offset++],this.convUint16[0]},a.prototype.getInt16=function(){var a=this.getUint16();return a>32767&&(a|=4294901760),a},a.prototype.getInt32=function(){this.boundsCheck(this.offset+4);var a=this.buffer,b=this.convUint8,c=this.offset;return b[0]=a[c],b[1]=a[c+1],b[2]=a[c+2],b[3]=a[c+3],this.offset+=4,this.convInt32[0]},a.prototype.getUint32=function(){this.boundsCheck(this.offset+4);var a=this.buffer,b=this.convUint8,c=this.offset;return b[0]=a[c],b[1]=a[c+1],b[2]=a[c+2],b[3]=a[c+3],this.offset+=4,this.convUint32[0]},a.prototype.skipUint32=function(){this.boundsCheck(this.offset+4),this.offset+=4},a.prototype.getFloat32=function(){return this.boundsCheck(this.offset+4),this.offset+=4,0},a.prototype.getFloat64=function(){return this.boundsCheck(this.offset+8),this.offset+=8,0},a.prototype.skipFloat64=function(){this.boundsCheck(this.offset+8),this.offset+=8},a.prototype.reset=function(a){this.buffer=a,this.offset=0,this.byteLength=a.length},c.CheckedInputStream=a}(),Autodesk.LMVTK.GltfPackage=function(){function a(a){var b;if(void 0!==typeof TextDecoder)b=new TextDecoder("utf-8").decode(a);else{for(var c="",d=0;d<a.length;d++)c+=String.fromCharCode(a[d]);b=decodeURIComponent(escape(c))}return JSON.parse(b)}function b(b){if(this.loadedBuffers={},b instanceof Uint8Array){var c=new Int32Array(b.buffer,0,20);1179937895!==c[0]&&debug("glb header "+c[0]);var d=c[3],e=new Uint8Array(b.buffer,20,d),f=b.buffer.slice(20+d);b=a(e),this.loadedBuffers.binary_glTF=f}this.gltf=b,this.manifest=null,this.metadata=this.gltf.asset||{},this.metadata.gltf=this.metadata.version||1,this.materials=this.gltfMaterials={name:"GLTF Materials",version:"1.0",scene:{SceneUnit:"m"},materials:{}},this.materialToIndex={},this.materialList=[],this.geomToIndex={},this.geomList=[],this.geomsLoaded=0,this.fragments={length:0,numLoaded:0,boxes:null,transforms:null,materials:null,fragId2dbId:null,entityIndexes:null,mesh2frag:{}},this.geompacks=[],this.instances=[],this.cameras=[],this.lights=[],this.bbox=null,this.animations=null,this.pendingRequests=0,this.globalOffset={x:0,y:0,z:0},this.bbox=new LmvBox3,this.nodeToDbId={},this.nextDbId=1,this.nextFragId=0}function c(a,b){return m[0]=a[b],m[1]=a[b+1],m[2]=a[b+2],m[3]=a[b+3],l[0]}for(var d=Autodesk.LMVTK,e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=new Uint8Array(256),g=0;g<e.length;g++)f[e.charCodeAt(g)]=g;var h=function(a){var b,c,d,e,g,h=.75*a.length,i=a.length,j=0;"="===a[a.length-1]&&(h--,"="===a[a.length-2]&&h--);var k=new ArrayBuffer(h),l=new Uint8Array(k);for(b=0;b<i;b+=4)c=f[a.charCodeAt(b)],d=f[a.charCodeAt(b+1)],e=f[a.charCodeAt(b+2)],g=f[a.charCodeAt(b+3)],l[j++]=c<<2|d>>4,l[j++]=(15&d)<<4|e>>2,l[j++]=(3&e)<<6|63&g;return k},i="data:application/octet-stream;base64,";b.prototype.loadManifest=function(a){var b={name:"LMV Manifest",toolkitversion:"LMVTK 2.6.4",manifestversion:2,adskID:{sourceSystem:"",type:"",id:"",version:""},assets:[],typesets:[]};this.manifest=b;var c=this.gltf.buffers;for(var d in c)if("binary_glTF"!==d){var e=c[d];if(0!==e.uri.indexOf(i)){var f={id:d,URI:e.uri,uri:e.uri,usize:e.byteLength,type:e.type};this.manifest.assets.push(f)}else this.loadedBuffers[d]=h(e.uri.slice(i.length)),e.uri="embed://"+d}var g=this.gltf.images;for(var j in g){var k=g[j],f={id:j,URI:k.uri,uri:k.uri,name:k.name,type:"image"};this.manifest.assets.push(f)}},b.prototype.loadRemainingSvf=function(a){a.manifest&&(this.manifest=a.manifest),this.manifest.assetMap={};for(var b=0;b<this.manifest.assets.length;b++){var c=this.manifest.assets[b];this.manifest.assetMap[c.id]=c}this.processMeshesList(),this.processMaterialsList(),this.deriveInstanceTree(),a.loadDoneCB("svf");for(var d in this.loadedBuffers)this.loadGeometry(a,d);this.loadBuffers(a)},b.prototype.loadBuffers=function(a){function b(e){if(g<d.length-1){var f=d[g+1],h={responseType:f.type||"arraybuffer"};avp.ViewingService.getItem(a,a.basePath+f.URI,b,a.onFailureCallback,h)}if(e){var i=d[g];c.loadedBuffers[i.id]=e.buffer,c.loadGeometry(a,i.id)}g++}for(var c=this,d=[],e=this.manifest.assets,f=0;f<e.length;f++)"image"!==e[f].type&&d.push(e[f]);var g=-1;b(null)};var j={5120:1,5121:1,5122:2,5123:2,5124:4,5125:4,5126:4},k={SCALAR:1,VEC2:2,VEC3:3,VEC4:4},l=new Float32Array(1),m=new Uint8Array(l.buffer);return b.prototype.loadGeometry=function(a,b){function e(a){var b=h.gltf.accessors[a],c=b.bufferView;if(c){var d=h.gltf.bufferViews[c].buffer;if(d)return!!h.loadedBuffers[d]}return!1}for(var f=this.gltf.buffers[b],g=f.meshes,h=this,i=0;i<g.length;i++)for(var l=this.gltf.meshes[g[i]],m=l.primitives,n="undefined"==typeof a.packNormals||a.packNormals,o=0;o<m.length;o++){var p=m[o],l={vblayout:{},vbstride:0,packedNormals:n},q=!0;if(p.indices&&(q=q&&e(p.indices))){var r=h.gltf.accessors[p.indices];l.triangleCount=r.count/3;var s,t,u=r.byteStride,v=2,w=h.gltf.bufferViews[r.bufferView],x=r.byteOffset+w.byteOffset,f=h.loadedBuffers[w.buffer];5123===r.componentType?(t=l.indices=new Uint16Array(r.count),v=2,s=new Uint16Array(f)):debug("Unimplemented component type for index buffer");var y=x/v;0===u?u=1:u/=v;for(var z=0;z<r.count;z++)t[z]=s[y+z*u]}var A=0;for(var B in p.attributes){q=q&&e(p.attributes[B]);var C=h.gltf.accessors[p.attributes[B]];if(q)if("NORMAL"===B)l.vbstride+=n?1:3,l.vblayout.normal={offset:A,itemSize:n?2:3,bytesPerItem:n?2:4,normalize:n},A+=n?1:3;else{var D=B;if("POSITION"===B)D="position",l.vertexCount=C.count;else if(0===B.indexOf("TEXCOORD")){var E=parseInt(B.split("_")[1]);D="uv"+(E||"")}else 0===B.indexOf("COLOR")&&(D="color");var F=j[C.componentType]*k[C.type];l.vbstride+=F/4,l.vblayout[D]={offset:A,itemSize:k[C.type],bytesPerItem:j[C.componentType],normalize:!1},A+=F/4}}if(q){var G,H=l.vb=new Float32Array(l.vertexCount*l.vbstride);n&&(G=new Uint16Array(l.vb.buffer));for(var B in p.attributes){var C=h.gltf.accessors[p.attributes[B]],w=h.gltf.bufferViews[C.bufferView],x=C.byteOffset+w.byteOffset,I=new Uint8Array(h.loadedBuffers[w.buffer]);if("NORMAL"===B){var J=l.vblayout.normal;C.count!=l.vertexCount&&debug("Normals count does not equal vertex count");for(var K=x,A=J.offset,z=0;z<l.vertexCount;z++,A+=l.vbstride){var L=c(I,K),M=c(I,K+4),N=c(I,K+8);if(G){var O=.5*(Math.atan2(M,L)/Math.PI+1),P=.5*(N+1);G[2*A]=65535*O|0,G[2*A+1]=65535*P|0}else H[A]=L,H[A+1]=M,H[A+2]=N;K+=C.byteStride}}else{var D=B;if("POSITION"===B)D="position",l.vertexCount=C.count;else if(0===B.indexOf("TEXCOORD")){var E=parseInt(B.split("_")[1]);D="uv"+(E||"")}else 0===B.indexOf("COLOR")&&(D="color");for(var J=l.vblayout[D],Q=j[C.componentType],s=new Uint8Array(I),t=new Uint8Array(H.buffer,4*J.offset),K=x,A=0,z=0;z<l.vertexCount;z++){for(var R=0;R<J.itemSize*Q;R++)t[A+R]=s[K+R];A+=l.vbstride*Q,K+=C.byteStride}}var S=h.gltf.buffers[w.buffer];S.refCount--,0===S.refCount&&delete h.loadedBuffers[w.buffer]}h.geomsLoaded++,d.VBUtils.computeBounds3D(l),a.loadDoneCB("mesh",{mesh:l,packId:g[i],meshIndex:o,progress:h.geomsLoaded/h.geomList.length})}}f.meshes=null},b.prototype.processMaterialsList=function(){var a=this.gltf.materials;for(var b in a){var c=this.materialList.length;this.materialToIndex[b]=c,this.gltfMaterials.materials[c]=a[b],this.materialList.push(b)}},b.prototype.processMeshesList=function(){function a(a){var b=c.gltf.accessors[a],e=b.bufferView;if(e){var g=c.gltf.bufferViews[e].buffer;if(g){var h=c.gltf.buffers[g];h.refCount?h.refCount++:h.refCount=1,h.meshes||(h.meshes=[]),f||(h.meshes.push(d),f=!0)}}}var b=this.gltf.meshes,c=this;for(var d in b)for(var e=b[d],f=!1,g=0;g<e.primitives.length;g++){var h=d+":"+g;this.geomToIndex[h]=this.geomList.length,this.geomList.push(h);var i=e.primitives[g];i.indices&&a(i.indices);for(var j in i.attributes)a(i.attributes[j])}this.numGeoms=this.geomList.length},b.prototype.countFragments=function(){function a(b){var c=b.meshes;if(b.meshes)for(var g=0;g<c.length;g++)for(var h=f.gltf.meshes[c[g]].primitives,i=0;i<h.length;i++)e++;var j=b.children||b.nodes;if(j)for(var k=0;k<j.length;k++){var l=d[j[k]];a(l)}}var b=this.gltf.scene,c=this.gltf.scenes[b],d=this.gltf.nodes,e=0,f=this;a(c),this.fragments.length=e,this.fragments.boxes=new Float32Array(6*e),this.fragments.transforms=new Float32Array(12*e),this.fragments.materials=new Int32Array(e),this.fragments.entityIndexes=new Int32Array(e),this.fragments.fragId2dbId=new Int32Array(e),this.fragments.packIds=new Int32Array(e)},b.prototype.deriveInstanceTree=function(){function a(b,c,j,k){k>f&&(f=k);var l=j.clone();if(c.matrix){var m=new LmvMatrix4(!0);m.fromArray(c.matrix),l.multiply(m)}else{var n=c.translation,o=c.rotation,p=c.scale;if(void 0!==n||void 0!==o||void 0!==p){Quat=function(a,b,c,d){this.x=a||0,this.y=b||0,this.z=c||0,this.w=d||0};var q=n?new LmvVector3(n[0],n[1],n[2]):new LmvVector3,r=o?new Quat(o[0],o[1],o[2],o[3]):new Quat,s=p?new LmvVector3(p[0],p[1],p[2]):new LmvVector3(1,1,1),m=new LmvMatrix4(!0);m.compose(q,r,s),l.multiply(m)}}var t=new LmvBox3,u=c.meshes;if(c.meshes){b.fragIds=[];for(var v=0;v<u.length;v++)for(var w=g.gltf.meshes[u[v]].primitives,x=0;x<w.length;x++){var y=u[v]+":"+x,z=g.nextFragId++;b.fragIds.push(z),h.fragId2dbId[z]=b.dbId,h.entityIndexes[z]=g.geomToIndex[y],h.mesh2frag[y]?h.mesh2frag[y].push(z):h.mesh2frag[y]=[z],h.materials[z]=g.materialToIndex[w[x].material];var A=12*z,B=l.elements,C=h.transforms;C[A]=B[0],C[A+1]=B[1],C[A+2]=B[2],C[A+3]=B[4],C[A+4]=B[5],C[A+5]=B[6],C[A+6]=B[8],C[A+7]=B[9],C[A+8]=B[10],C[A+9]=B[12],C[A+10]=B[13],C[A+11]=B[14];var D=w[x].attributes.POSITION;if(D){var E=g.gltf.accessors[D];E.min&&E.max?(i.min.x=E.min[0],i.min.y=E.min[1],i.min.z=E.min[2],i.max.x=E.max[0],i.max.y=E.max[1],i.max.z=E.max[2]):(i.min.x=-.5,i.min.y=-.5,i.min.z=-.5,i.max.x=.5,i.max.y=.5,i.max.z=.5,debug("unknown bbox for mesh, using unit box",u[v])),i.applyMatrix4(l),A=6*z;var F=h.boxes;F[A]=i.min.x,F[A+1]=i.min.y,F[A+2]=i.min.z,F[A+3]=i.max.x,F[A+4]=i.max.y,F[A+5]=i.max.z,t.union(i)}}}var G=c.children||c.nodes;if(G){b.children=[];for(var H=0;H<G.length;H++){var I=d[G[H]],J={name:I.name||G[H],dbId:g.nextDbId++};g.nodeToDbId[G[H]]=J.dbId,b.children.push(J);var K=a(J,I,l,k+1);t.union(K)}}var L=6*b.dbId,F=e;return F[L]=t.min.x,F[L+1]=t.min.y,F[L+2]=t.min.z,F[L+3]=t.max.x,F[L+4]=t.max.y,F[L+5]=t.max.z,t}this.countFragments();var b=this.gltf.scene,c=this.gltf.scenes[b],d=this.gltf.nodes;this.instanceTree={name:b,dbId:this.nextDbId++,children:[]},this.nodeToDbId[b]=this.instanceTree.dbId;var e=[],f=1,g=this,h=this.fragments,i=new LmvBox3,j=a(this.instanceTree,c,new LmvMatrix4(!0),1);g.bbox.union(j),this.instanceBoxes=new Float32Array(e.length),this.instanceBoxes.set(e),this.objectCount=this.nextDbId,this.maxTreeDepth=f},b}(),function(){"use strict";function a(a,b){var c=255*b[2]+b[3],d=Math.pow(2,(c-127)/2),e=d/b[1],f=b[0]*e,g=h[0]*f+h[3]*d+h[6]*e,i=h[1]*f+h[4]*d+h[7]*e,j=h[2]*f+h[5]*d+h[8]*e;g<0&&(g=0),i<0&&(i=0),j<0&&(j=0),a[0]=g,a[1]=i,a[2]=j}function b(a,b,c){var d=.0625*Math.sqrt(b[0]*c),e=.0625*Math.sqrt(b[1]*c),f=.0625*Math.sqrt(b[2]*c),g=Math.max(Math.max(d,e),Math.max(f,1e-6));g>1&&(g=1);var h=Math.ceil(255*g)/255;d>1&&(d=1),e>1&&(e=1),f>1&&(f=1),a[3]=h;var i=1/h;a[0]=d*i,a[1]=e*i,a[2]=f*i}function c(a,b,c){var d=Math.sqrt(b[0]*c),e=Math.sqrt(b[1]*c),f=Math.sqrt(b[2]*c),g=65504;d>g&&(d=g),e>g&&(e=g),f>g&&(f=g),a[0]=d,a[1]=e,a[2]=f}function d(a){for(var b=[],c=Array.isArray(a.image)?a.image:[a.image],d=0;d<c.length;d++)for(var e=c[d],f=0;f<e.mipmaps.length;f++){var g=e.mipmaps[f];b.push(g.data.buffer)}return b}var e=(Autodesk.Viewing,Autodesk.Viewing.Private),f=Autodesk.LMVTK;e.DefaultLightPreset=1,e.DefaultLightPreset2d=0,e.ModelSettingsEnvironment=null,e.BackgroundPresets={"Fusion Grey":[230,230,230,150,150,150],"Sky Blue":[226,244,255,156,172,180],Snow:[181,186,199,181,186,199],Midnight:[41,76,120,1,2,3],White:[255,255,255,255,255,255],AutoCADModel:[30,40,48,30,40,48],"Dark Grey":[51,51,51,51,51,51],"Dark Sky":[51,51,51,51,51,51],"Infinity Pool":[255,255,255,255,255,255],Tranquility:[0,84,166,0,84,166],"Grey Room":[129,129,129,129,129,129],"Photo Booth":[237,237,237,237,237,237],"RaaS SBS":[1,1,1,90,90,90],Plaza:[79,102,130,79,102,130],Custom:[230,230,230,150,150,150]};var g=e.BackgroundPresets;e.LightPresets=[{name:"Simple Grey",path:null,tonemap:0,E_bias:0,directLightColor:[1,.84,.67],ambientColor:[.2,.225,.25],lightMultiplier:1,bgColorGradient:g["Fusion Grey"],darkerFade:!1,rotation:0},{name:"Sharp Highlights",path:"SharpHighlights",type:"logluv",tonemap:1,E_bias:-9,directLightColor:[.5,.5,.5],ambientColor:[.25/8,.25/8,.25/8],lightMultiplier:0,lightDirection:[.5,-.2,-.06],bgColorGradient:g["Photo Booth"],darkerFade:!0,rotation:0},{name:"Dark Sky",path:"DarkSky",type:"logluv",tonemap:1,E_bias:-1,directLightColor:[1,1,1],ambientColor:[.25/8,.25/8,.25/8],lightMultiplier:1,lightDirection:[.1,-.55,-1],bgColorGradient:g["Dark Sky"],darkerFade:!1,rotation:0},{name:"Grey Room",path:"GreyRoom",type:"logluv",tonemap:1,E_bias:-1,directLightColor:[1,1,1],ambientColor:[.25/8,.25/8,.25/8],lightMultiplier:.5,lightDirection:[.1,-.55,-1],bgColorGradient:g["Grey Room"],darkerFade:!0,rotation:0},{name:"Photo Booth",path:"PhotoBooth",type:"logluv",tonemap:1,E_bias:0,directLightColor:[1,1,1],ambientColor:[.25/8,.25/8,.25/8],lightMultiplier:.5,lightDirection:[.1,-.55,-1],bgColorGradient:g["Photo Booth"],darkerFade:!0,rotation:0},{name:"Tranquility",path:"TranquilityBlue",type:"logluv",tonemap:1,E_bias:-1,directLightColor:[1,1,1],ambientColor:[.25/8,.25/8,.25/8],lightMultiplier:.5,lightDirection:[.1,-.55,-1],bgColorGradient:g.Tranquility,darkerFade:!1,rotation:0},{name:"Infinity Pool",path:"InfinityPool",type:"logluv",tonemap:1,E_bias:-1,directLightColor:[1,.84,.67],ambientColor:[.25/8,.25/8,.25/8],lightMultiplier:.5,lightDirection:[.1,-.55,-1],bgColorGradient:g["Infinity Pool"],darkerFade:!1,rotation:0},{name:"Simple White",path:null,tonemap:0,E_bias:0,directLightColor:[1,1,1],ambientColor:[.25,.25,.25],lightMultiplier:1,bgColorGradient:g.White,saoRadius:.06,saoIntensity:.15,darkerFade:!0,rotation:0},{name:"Riverbank",path:"riverbank",type:"logluv",tonemap:1,E_bias:-5.7,directLightColor:[1,1,1],lightMultiplier:0,bgColorGradient:g["Sky Blue"],darkerFade:!1,rotation:0},{name:"Contrast",path:"IDViz",type:"logluv",tonemap:1,E_bias:0,directLightColor:[1,1,1],lightMultiplier:0,bgColorGradient:g.Midnight,darkerFade:!1,rotation:0},{name:"Rim Highlights",path:"RimHighlights",type:"logluv",tonemap:1,E_bias:-9,directLightColor:[.5,.5,.5],ambientColor:[.25/8,.25/8,.25/8],lightMultiplier:0,lightDirection:[.35,-.35,-.5],bgColorGradient:g["Photo Booth"],darkerFade:!0,rotation:0},{name:"Cool Light",path:"CoolLight",type:"logluv",tonemap:1,E_bias:-9,directLightColor:[1,1,1],ambientColor:[.25/8,.25/8,.25/8],lightMultiplier:0,lightDirection:[-0,-.15,-.5],bgColorGradient:g["Fusion Grey"],darkerFade:!0,rotation:0},{name:"Warm Light",path:"WarmLight",type:"logluv",tonemap:1,E_bias:-9,directLightColor:[1,1,1],ambientColor:[.25/8,.25/8,.25/8],lightMultiplier:0,lightDirection:[-0,-.15,-.5],bgColorGradient:g["Fusion Grey"],darkerFade:!0,rotation:0},{name:"Soft Light",
path:"SoftLight",type:"logluv",tonemap:1,E_bias:-9,directLightColor:[1,1,1],ambientColor:[.25/8,.25/8,.25/8],lightMultiplier:0,lightDirection:[-.5,-.5,0],bgColorGradient:g["Fusion Grey"],darkerFade:!0,rotation:0},{name:"Grid Light",path:"GridLight",type:"logluv",tonemap:1,E_bias:-9,directLightColor:[1,1,1],ambientColor:[.25/8,.25/8,.25/8],lightMultiplier:0,lightDirection:[-.5,-.6,0],bgColorGradient:g["Fusion Grey"],darkerFade:!0,rotation:0},{name:"Plaza",path:"Plaza",type:"logluv",tonemap:1,E_bias:-14,directLightColor:[.9,.9,1],ambientColor:[.25/8,.25/8,.25/8],lightMultiplier:0,lightDirection:[-.2,-.18,.72],bgColorGradient:g.Plaza,darkerFade:!1,rotation:0},{name:"Snow Field",path:"SnowField",type:"logluv",tonemap:1,E_bias:-10.461343,directLightColor:[1,1,1],ambientColor:[.25/8,.25/8,.25/8],lightMultiplier:0,lightDirection:[0,-1,0],bgColorGradient:g.Snow,darkerFade:!1,rotation:0}],e.DebugEnvironments=[{name:"Field",path:"field",type:"logluv",tonemap:1,E_bias:-2.9,directLightColor:[1,1,1],lightMultiplier:0,bgColorGradient:g["Sky Blue"],darkerFade:!1,rotation:0},{name:"Crossroads",path:"crossroads",type:"logluv",tonemap:1,E_bias:-5.5,directLightColor:[1,1,1],lightMultiplier:0,bgColorGradient:g["Sky Blue"],darkerFade:!1,rotation:0},{name:"Seaport",path:"seaport",type:"logluv",tonemap:1,E_bias:-6.5,directLightColor:[1,1,1],lightMultiplier:0,bgColorGradient:g["Sky Blue"],darkerFade:!1,rotation:0},{name:"Glacier",path:"glacier",type:"logluv",tonemap:1,E_bias:0,directLightColor:[1,1,1],lightMultiplier:0,bgColorGradient:g.Midnight,darkerFade:!1,rotation:0},{name:"Boardwalk",path:"boardwalk",type:"logluv",tonemap:1,E_bias:-7,directLightColor:[1,1,1],lightMultiplier:0,bgColorGradient:g["Sky Blue"],darkerFade:!1,rotation:0},{name:"RaaS Test Env",path:"Reflection",type:"logluv",tonemap:2,E_bias:-1.5,directLightColor:[1,1,1],lightMultiplier:0,bgColorGradient:g["RaaS SBS"],darkerFade:!1,rotation:0}],e.ENABLE_DEBUG&&(e.LightPresets=e.LightPresets.concat(e.DebugEnvironments)),e.copyLightPreset=function(a,b){b.name=a.name+" (copy)",b.path=a.path,b.type=a.type,b.tonemap=a.tonemap,b.E_bias=a.E_bias,b.directLightColor=a.directLightColor,b.ambientColor=a.ambientColor,b.lightMultiplier=a.lightMultiplier,b.bgColorGradient=a.bgColorGradient,b.darkerFade=a.darkerFade,b.rotation=a.rotation},e.CreateCubeMapFromColors=function(a,b){for(var c=255*a.x,d=255*a.y,e=255*a.z,f=255*b.x,g=255*b.y,h=255*b.z,i=new Uint8Array(16),j=new Uint8Array(16),k=new Uint8Array(16),l=0;l<4;l++)i[4*l]=c,i[4*l+1]=d,i[4*l+2]=e,i[4*l+3]=255,j[4*l]=f,j[4*l+1]=g,j[4*l+2]=h,j[4*l+3]=255,l>1?(k[4*l]=c,k[4*l+1]=d,k[4*l+2]=e,k[4*l+3]=255):(k[4*l]=f,k[4*l+1]=g,k[4*l+2]=h,k[4*l+3]=255);var m=new THREE.DataTexture(k,2,2,THREE.RGBAFormat),n=new THREE.DataTexture(k,2,2,THREE.RGBAFormat),o=new THREE.DataTexture(j,2,2,THREE.RGBAFormat),p=new THREE.DataTexture(i,2,2,THREE.RGBAFormat),q=new THREE.DataTexture(k,2,2,THREE.RGBAFormat),r=new THREE.DataTexture(k,2,2,THREE.RGBAFormat),s=new THREE.Texture(null,THREE.CubeReflectionMapping,THREE.RepeatWrapping,THREE.RepeatWrapping,THREE.LinearFilter,THREE.LinearFilter,THREE.RGBAFormat);return s.image=[n,m,p,o,r,q],s.needsUpdate=!0,s};var h=[6.0014,-2.7008,-1.7996,-1.332,3.1029,-5.7721,.3008,-1.0882,5.6268],i=new Float32Array(4),j=new Float32Array(4);e.DecodeEnvMap=function(d,f,g,h){if(!d.LogLuv)return void e.logger.warn("Environment map expected to be in LogLuv format.");for(var k=Math.pow(2,f),l=Array.isArray(d.image)?d.image:[d.image],m=0;m<l.length;m++)for(var n=l[m],o=0;o<n.mipmaps.length;o++){var p,q=n.mipmaps[o],r=q.data;g?(p=new Uint16Array(r.length/4*3),q.data=p):p=r.buffer;for(var s=0,t=0;t<r.length;t+=4)i[0]=r[t]/255,i[1]=r[t+1]/255,i[2]=r[t+2]/255,i[3]=r[t+3]/255,a(j,i),g?(c(i,j,k),p[s++]=e.FloatToHalf(i[0]),p[s++]=e.FloatToHalf(i[1]),p[s++]=e.FloatToHalf(i[2])):(b(i,j,k),r[t]=Math.round(255*i[0]),r[t+1]=Math.round(255*i[1]),r[t+2]=Math.round(255*i[2]),r[t+3]=Math.round(255*i[3]))}d.LogLuv=!1,g?(d.type=THREE.HalfFloatType,d.format=THREE.RGBFormat,d.RGBM=!1,d.GammaEncoded=!0):d.RGBM=!0,h&&h(d)},e.imageWorker=null;var k=1;e.DecodeEnvMapAsync=function(a,b,c,f){if(!a.LogLuv)return void e.logger.warn("Environment map expected to be in LogLuv format.");e.imageWorker||(e.imageWorker=e.createWorker());var g=k++,h=function(b){if(b.data.id===g){e.imageWorker.removeEventListener("message",h);var d=b.data.map;a.image=d.image,a.LogLuv=!1,c?(a.type=THREE.HalfFloatType,a.format=THREE.RGBFormat,a.RGBM=!1,a.GammaEncoded=!0):a.RGBM=!0,f(a)}};e.imageWorker.addEventListener("message",h),e.imageWorker.postMessage({operation:"DECODE_ENVMAP",map:a,exposure:b,useHalfFloat:c,id:g},d(a))},f.doDecodeEnvmap=function(a){e.DecodeEnvMap(a.map,a.exposure,a.useHalfFloat),self.postMessage({map:a.map,id:a.id},d(a.map))}}(),function(){"use strict";function a(a){var b=a.split("/");if(0==b.length)return a;for(var c=[],d=0;d<b.length;++d){var e=b[d];"."!==e&&(".."===e&&c.length?c.pop():c.push(e))}return 0==c.length?"":c.join("/")}function b(a,b){for(var c=a.length-b,d=new ArrayBuffer(c),e=new Uint8Array(d,0),f=0,g=b;f<c;f++,g++)e[f]=255&a.charCodeAt(g);return e}function c(a,b){return b.indexOf("file://")===-1&&(b.indexOf("://")!==-1||(!!a||void 0))}function d(a,b,c,d){function e(a){if("json"==d.responseType)try{return JSON.parse(a.toString("utf8"))}catch(a){c(a)}return a}0===a.indexOf("file://")&&(a=a.substr(7)),require("fs").readFile(a,function(f,g){f?c(0,0,{httpStatusText:f,url:a}):31==g[0]&&139==g[1]?require("zlib").gunzip(g,null,function(f,g){f?c(0,0,{httpStatusText:f,url:a}):(g=e(g),d.ondata&&d.ondata(g),b(g))}):(g=e(g),d.ondata&&d.ondata(g),b(g))})}function e(a,b){b.hasOwnProperty("asynchronous")?b.asynchronous||g.logger.warn("LMV: Sync XHR used. Performance warning."):b.asynchronous=!0,b.hasOwnProperty("responseType")||(b.responseType="arraybuffer"),b.hasOwnProperty("withCredentials")||(b.withCredentials=!!a.auth),b.headers=a.headers,b.queryParams=a.queryParams,b.endpoint=a.endpoint}var f=Autodesk.Viewing,g=f.Private;g.inWorkerThread="undefined"!=typeof self&&"undefined"==typeof window;var h;"undefined"!=typeof XMLHttpRequest?h=XMLHttpRequest:(h=require("xhr2"),h.prototype._restrictedHeaders.cookie=!1);var i={},j=!1;i.simplifyPath=a,i.OSS_PREFIX="urn:adsk.objects:os.object:",i.getDirectOSSUrl=function(b,c){var d=c.indexOf(i.OSS_PREFIX);if(d!==-1){var e=c.substr(d+i.OSS_PREFIX.length),g=e.substr(0,e.indexOf("/")),h=e.substr(e.indexOf("/")+1);return h=a(h),f.makeOssPath(b,g,h)}},i.generateUrl=function(b,d,e){if(f.isNodeJS&&!c(b,e))return e;e=a(e);var g=e.indexOf("urn:"),h=e.indexOf("?");g!=-1&&(e=h!==-1?e.slice(0,g)+encodeURIComponent(e.slice(g,h))+e.slice(h):e.slice(0,g)+encodeURIComponent(e.slice(g)));var j=i.getDirectOSSUrl(b,e);if(j)return j;if(0!==decodeURIComponent(e).indexOf("urn:"))return e;switch("items"!==d&&(e=e.substr(6)),d){case"items":return f.getItemApi(b)+e;case"bubbles":return f.getManifestApi(b)+e;case"thumbnails":return f.getThumbnailApi(b)+e}},i.rawGet=function(a,e,k,l,m,n){function o(a){m&&m(q.status,q.statusText,{url:k})}function p(a){if(200===q.status)if(q.response&&q.response instanceof ArrayBuffer){var b=new Uint8Array(q.response);if(!n.skipDecompress&&31==b[0]&&139==b[1]){j||(j=!0,g.logger.warn("An LMV resource ("+k+") was not uncompressed by the browser. This hurts performance. Check the Content-Encoding header returned by the server and check whether you're getting double-compressed streams. The warning prints only once but it's likely the problem affects multiple resources."));try{b=new Zlib.Gunzip(b).decompress()}catch(a){m(f.ErrorCodes.BAD_DATA,"Malformed data received when requesting file",{url:k,exception:a.toString(),stack:a.stack})}}l(b)}else l(q.response||q.responseText);else o(a)}var n=n?n:{};if(k=i.generateUrl(a,e,k),f.isNodeJS&&!c(a,k))return void d(k,l,m,n);n.queryParams&&(k=k+"?"+n.queryParams);var q=new h;try{var r=!n.hasOwnProperty("asynchronous")||n.asynchronous;if(q.open(n.noBody?"HEAD":"GET",k,r),n.hasOwnProperty("responseType")&&(q.responseType=n.responseType),q.withCredentials=!0,n.hasOwnProperty("withCredentials")&&(q.withCredentials=n.withCredentials),n.headers)for(var s in n.headers)q.setRequestHeader(s,n.headers[s]),"authorization"===s.toLocaleLowerCase()&&(q.withCredentials=!1);r&&(q.onload=p,q.onerror=o,q.ontimeout=o,n.ondata&&(q.overrideMimeType("text/plain; charset=x-user-defined"),n._dlProgress={streamOffset:0,counter:0},q.onreadystatechange=function(){if(q.readyState>2){var a=q.responseText;if(n._dlProgress.streamOffset>=a.length)return;var c=b(a,n._dlProgress.streamOffset);n._dlProgress.streamOffset=a.length,n.ondata(c)}})),q.send(),n.skipAssetCallback||(g.inWorkerThread?self.postMessage({assetRequest:[k,n.headers,null]}):g.assets.push([k,n.headers,null])),r||p()}catch(a){m(q.status,q.statusText,{url:k,exception:a})}},i.defaultFailureCallback=function(a,b,c){403==a?this.raiseError(f.ErrorCodes.NETWORK_ACCESS_DENIED,"Access denied to remote resource",{url:c.url,httpStatus:a,httpStatusText:b}):404==a?this.raiseError(f.ErrorCodes.NETWORK_FILE_NOT_FOUND,"Remote resource not found",{url:c.url,httpStatus:a,httpStatusText:b}):a>=500&&a<600?this.raiseError(f.ErrorCodes.NETWORK_SERVER_ERROR,"Server error when accessing resource",{url:c.url,httpStatus:a,httpStatusText:b}):c.exception?this.raiseError(f.ErrorCodes.NETWORK_FAILURE,"Network failure",{url:c.url,exception:c.exception.toString(),stack:c.exception.stack}):this.raiseError(f.ErrorCodes.NETWORK_UNHANDLED_RESPONSE_CODE,"Unhandled response code from server",{url:c.url,httpStatus:a,httpStatusText:b,data:c})},i.getItem=function(a,b,c,d,f){f=f||{},e(a,f),i.rawGet(a.endpoint,"items",b,c,d,f)},i.getManifest=function(a,b,c,d,f){f=f||{},f.hasOwnProperty("responseType")||(f.responseType="json"),e(a,f),i.rawGet(a.endpoint,"bubbles",b,c,d,f)},i.getThumbnail=function(a,b,c,d,f){if(f=f||{},e(a,f),!f.queryParams){var g=f.role||"rendered",h=f.size||400;f.queryParams="guid="+encodeURIComponent(f.guid)+"&role="+g+"&width="+h+"&height="+h}i.rawGet(a.endpoint,"thumbnails",b,c,d,f)},i.getACMSession=function(a,b,c,d){var e,g={};for(var h in b)"oauth2AccessToken"===h?e=b[h]:h.indexOf("x-ads-acm")!==-1&&(g[h]=b[h]),f.isMobileDevice()&&(f.HTTP_REQUEST_HEADERS=g);g.application="autodesk";var i=new XMLHttpRequest;i.open("POST",a+"/oss-ext/v2/acmsessions",!0),i.setRequestHeader("Content-Type","application/json"),i.setRequestHeader("Authorization","Bearer "+e),i.responseType="json",i.onload=function(){if(200===i.status&&i.response){var a="string"==typeof i.response?JSON.parse(i.response):i.response;a&&a.acmsession?c(a.acmsession):d(i.status,"Can't get acm session from response.")}else d(i.status)},i.onerror=d,i.ontimeout=d,i.send(JSON.stringify(g)),delete g.application},g.ViewingService=i}(),function(){"use strict";function a(a,b){this.offset=0,this.byteLength=b,this.range=0,this.compressedBuffer=a,this.compressedByteLength=a.length,this.compressedOffset=0,this.decompressEnd=!1,this.resetCount=0,this.convBuf=new ArrayBuffer(8),this.convUint8=new Uint8Array(this.convBuf),this.convUint16=new Uint16Array(this.convBuf),this.convInt32=new Int32Array(this.convBuf),this.convUint32=new Uint32Array(this.convBuf),this.convFloat32=new Float32Array(this.convBuf),this.convFloat64=new Float64Array(this.convBuf),this.COMPRESSED_chunk_SIZE=524288,this.DECOMPRESSED_chunk_SIZE=262144,this.chunks=[],this.chunksByteLengthMax=0,this.chunksByteLengthMin=0,this.chunkPointer=null,this.chunkOffset=0,this.tempchunk={startIdx:0,endIdx:0,buffer:null},this.inflate=this.getInflate(),this.prepare(0,1024)}var b=Autodesk.LMVTK;a.prototype.getInflate=function(){if(!this.inflate){this.inflate=new pako.Inflate({level:3,chunkSize:this.DECOMPRESSED_chunk_SIZE});var a=this;this.inflate.onData=function(b){a.chunksByteLengthMax+=b.byteLength,a.chunksByteLengthMax<a.offset&&(b=null,a.chunksByteLengthMin=a.chunksByteLengthMax),a.chunks.push(b)},this.inflate.onEnd=function(){if(a.decompressEnd=!0,a.inflate=null,a.chunksByteLengthMax!=a.byteLength)throw"Decompress error, unexpected size."}}return this.inflate},a.prototype.prepare=function(a,b,c){if(this.chunksByteLengthMin>a&&(this.reset(),this.offset=a,this.range=b),!c){for(var d=Math.floor(a/this.DECOMPRESSED_chunk_SIZE),e=Math.floor(this.chunksByteLengthMin/this.DECOMPRESSED_chunk_SIZE),f=this.chunks.length<d?this.chunks.length:d,g=e;g<f;g++)this.chunks[g]=null;this.chunksByteLengthMin=f*this.DECOMPRESSED_chunk_SIZE}var b=b||1,h=a+b;h=h>this.byteLength?this.byteLength:h;for(var i=!1;h>this.chunksByteLengthMax;){var j=this.COMPRESSED_chunk_SIZE;this.compressedOffset+j>=this.compressedByteLength&&(j=this.compressedByteLength-this.compressedOffset,i=!0);var k=new Uint8Array(this.compressedBuffer.buffer,this.compressedOffset,j);if(this.getInflate().push(k,i),this.compressedOffset+=j,i)break}},a.prototype.ensurechunkData=function(a){a=a||1;var b=this.chunks.length,c=Math.floor(this.offset/this.DECOMPRESSED_chunk_SIZE),d=Math.floor((this.offset+a-1)/this.DECOMPRESSED_chunk_SIZE);if(d>=b){var e=(d-b+1)*this.DECOMPRESSED_chunk_SIZE;this.prepare(this.DECOMPRESSED_chunk_SIZE*b,e,!0)}if(c<d){if(this.tempchunk.startIdx>c||this.tempchunk.endIdx<d){var f=(d-c+1)*this.DECOMPRESSED_chunk_SIZE;this.tempchunk.buffer=new Uint8Array(f);for(var g=0,h=c;h<=d;h++)this.tempchunk.buffer.set(this.chunks[h],g),g+=this.DECOMPRESSED_chunk_SIZE;this.tempchunk.startIdx=c,this.tempchunk.endIdx=d}this.chunkPointer=this.tempchunk.buffer}else this.chunkPointer=this.chunks[c];this.chunkOffset=this.offset-c*this.DECOMPRESSED_chunk_SIZE,this.offset+=a},a.prototype.seek=function(a,b,c){this.offset=a,this.range=b,this.prepare(a,b,c)},a.prototype.getBytes=function(a){this.ensurechunkData(a);var b=new Uint8Array(this.chunkPointer.buffer,this.chunkOffset,a);return b},a.prototype.getVarints=function(){var a,b=0,c=0;do this.ensurechunkData(),a=this.chunkPointer[this.chunkOffset],b|=(127&a)<<c,c+=7;while(128&a);return b},a.prototype.getUint8=function(){return this.ensurechunkData(),this.chunkPointer[this.chunkOffset]},a.prototype.getUint16=function(){return this.ensurechunkData(),this.convUint8[0]=this.chunkPointer[this.chunkOffset],this.ensurechunkData(),this.convUint8[1]=this.chunkPointer[this.chunkOffset],this.convUint16[0]},a.prototype.getInt16=function(){var a=this.getUint16();return a>32767&&(a|=4294901760),a},a.prototype.getInt32=function(){var a=this.convUint8;return this.ensurechunkData(),a[0]=this.chunkPointer[this.chunkOffset],this.ensurechunkData(),a[1]=this.chunkPointer[this.chunkOffset],this.ensurechunkData(),a[2]=this.chunkPointer[this.chunkOffset],this.ensurechunkData(),a[3]=this.chunkPointer[this.chunkOffset],this.convInt32[0]},a.prototype.getUint32=function(){var a=this.convUint8;return this.ensurechunkData(),a[0]=this.chunkPointer[this.chunkOffset],this.ensurechunkData(),a[1]=this.chunkPointer[this.chunkOffset],this.ensurechunkData(),a[2]=this.chunkPointer[this.chunkOffset],this.ensurechunkData(),a[3]=this.chunkPointer[this.chunkOffset],this.convUint32[0]},a.prototype.getFloat32=function(){var a=this.convUint8;return this.ensurechunkData(),a[0]=this.chunkPointer[this.chunkOffset],this.ensurechunkData(),a[1]=this.chunkPointer[this.chunkOffset],this.ensurechunkData(),a[2]=this.chunkPointer[this.chunkOffset],this.ensurechunkData(),a[3]=this.chunkPointer[this.chunkOffset],this.convFloat32[0]},a.prototype.getFloat64=function(){for(var a=this.convUint8,b=0;b<8;b++)this.ensurechunkData(),a[b]=this.chunkPointer[this.chunkOffset];return this.convFloat64[0]},a.prototype.getString=function(a){var b="";this.ensurechunkData(a);for(var c=this.chunkPointer,d=this.chunkOffset,e=this.chunkOffset+a;d<e;d++)b+=String.fromCharCode(c[d]);var f;try{f=decodeURIComponent(escape(b))}catch(a){f=b,debug("Failed to decode string "+f)}return f},a.prototype.reset=function(a){this.resetCount++,debug("InputStream Less Reset: "+this.resetCount),a&&(this.compressedBuffer=a,this.compressedByteLength=a.length),this.offset=0,this.chunks=[],this.chunksByteLengthMax=0,this.chunksByteLengthMin=0,this.compressedOffset=0,this.decompressEnd=!1,this.chunkPointer=null,this.chunkOffset=0,this.inflate=null,this.tempchunk.startIdx=0,this.tempchunk.endIdx=0,this.tempchunk.buffer=null},b.InputStreamLess=a}(),function(){"use strict";function a(a){c.Package.call(this,a),this.memoryOptimizedMode=!1,this.pendingGeometryMetadataLoad={}}var b=Autodesk.Viewing,c=Autodesk.LMVTK,d=b.Private,e=b.isMobileDevice()?6291456:33554432;a.prototype=Object.create(c.Package.prototype),a.prototype.constructor=a,a.prototype.loadAsyncResource=function(a,b,c,e,f){function g(b){h.pendingRequests--,e(b),0==h.pendingRequests&&h.postLoad(a)}if(c)return void e(c);var h=this;this.pendingRequests++,d.ViewingService.getItem(a,a.basePath+b,g,a.onFailureCallback,{asynchronous:!0,skipDecompress:f})},a.prototype.parseFragmentList=function(a,b,d,f){this.memoryOptimizedMode=b.perfOpt.forceMemoryOptimizedMode||a.size>e,debug("PackageLess: memory optimized mode: "+this.memoryOptimizedMode);var g=this;if(this.loadAsyncResource(b,d,f,function(d){var e=a.usize,f=new c.PackFileReaderLess(d,e),h=g.fragments=new c.FragList;c.readFragments(f,h,g.globalOffset,b.placementTransform,b.objectIds),f=null,g.pendingGeometryMetadataLoad.path&&g.loadAsyncResource(b,g.pendingGeometryMetadataLoad.path,g.pendingGeometryMetadataLoad.contents,function(a){var b=new c.PackFileReaderLess(a,g.pendingGeometryMetadataLoad.usize);debug("PackageLess: read geometry metadata into fragment directly."),g.primitiveCount=c.readGeometryMetadataIntoFragments(b,g.fragments),g.numGeoms=b.getEntryCounts(),b=null,g.pendingGeometryMetadataLoad.contents=null},g.memoryOptimizedMode)},g.memoryOptimizedMode),!this.memoryOptimizedMode&&this.pendingGeometryMetadataLoad.path){var d=this.pendingGeometryMetadataLoad.path,f=this.pendingGeometryMetadataLoad.contents;this.pendingGeometryMetadataLoad={},debug("PackageLess: read geometry metadata as usual."),c.Package.prototype.parseGeometryMetadata.call(this,null,b,d,f)}},a.prototype.parseGeometryMetadata=function(a,b,d,e){var f=a.usize;if(this.fragments){var g=this;this.loadAsyncResource(b,d,e,function(a){var b=new c.PackFileReaderLess(a,f);g.primitiveCount=c.readGeometryMetadataIntoFragments(b,g.fragments),g.numGeoms=b.getEntryCounts(),b=null},g.memoryOptimizedMode)}else this.pendingGeometryMetadataLoad.path=d,this.pendingGeometryMetadataLoad.contents=e,this.pendingGeometryMetadataLoad.usize=f},a.prototype.postLoadOfFragments=function(a){this.memoryOptimizedMode?this.fragments.mesh2frag||this.calculateMesh2Frag(this.fragments):c.Package.prototype.postLoadOfFragments.call(this,a)},a.prototype.postLoadOfObjectIds=function(a){if(this.memoryOptimizedMode){if(a.objectIds&&a.objectIds.length>0){var b=this.geompacks.length,d=this.fragments,e=0,f=new Int8Array(b);for(e=0;e<d.packIds.length;e++)f[d.packIds[e]]=15;var g=0;for(e=0;e<f.length;e++)15===f[e]&&(this.geompacks[g]=this.geompacks[e],g++);g<b&&this.geompacks.splice(g,b-g)}}else c.Package.prototype.postLoadOfObjectIds.call(this,a)},a.prototype.postLoadComplete=function(a){if(this.memoryOptimizedMode){if(this.fragments.polygonCounts){var b=performance.now(),e=this.materials?this.materials.materials:null;e&&this.addTransparencyFlagsToMaterials(e),this.bvh=new d.BVHBuilder(this.fragments,e),this.bvh.build(a.bvhOptions);var f=performance.now();a.worker.debug("BVH build time (worker thread):"+(f-b))}a.loadDoneCB("svf"),a.loadDoneCB("done")}else c.Package.prototype.postLoadComplete.call(this,a)},c.PackageLess=a}(),function(){"use strict";function a(a,c){var d,e=!1;if(31==a[0]&&139==a[1])if(c){e=!0,d=new b.InputStreamLess(a,c);var f=d.getInt32();this.type=d.getString(f),this.version=d.getInt32();var g=Math.floor(.9*d.byteLength);d.seek(g,d.byteLength-g)}else{var h=new Zlib.Gunzip(a);a=h.decompress(),d=new b.InputStream(a);var f=d.getInt32();this.type=d.getString(f),this.version=d.getInt32()}else d=new b.InputStream(a);this.stream=d,this.types=null,this.entryOffsets=[],d.seek(d.byteLength-8,8,e);var i=d.getUint32();this.typesOffset=d.getUint32(),d.seek(this.typesOffset,1,e);var j=this.readU32V();this.types=[];for(var k=0;k<j;++k)this.types.push({entryClass:this.readString(),entryType:this.readString(),version:this.readU32V()});d.seek(i,1,e);for(var l=this.readU32V(),m=this.entryOffsets,k=0;k<l;++k)m.push(d.getUint32());d.seek(0)}var b=Autodesk.LMVTK;a.prototype=Object.create(b.PackFileReader.prototype),b.PackFileReaderLess=a}(),!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.pako=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";var d="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;c.assign=function(a){for(var b=Array.prototype.slice.call(arguments,1);b.length;){var c=b.shift();if(c){if("object"!=typeof c)throw new TypeError(c+"must be non-object");for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d])}}return a},c.shrinkBuf=function(a,b){return a.length===b?a:a.subarray?a.subarray(0,b):(a.length=b,a)};var e={arraySet:function(a,b,c,d,e){if(b.subarray&&a.subarray)return void a.set(b.subarray(c,c+d),e);for(var f=0;d>f;f++)a[e+f]=b[c+f]},flattenChunks:function(a){var b,c,d,e,f,g;for(d=0,b=0,c=a.length;c>b;b++)d+=a[b].length;for(g=new Uint8Array(d),e=0,b=0,c=a.length;c>b;b++)f=a[b],g.set(f,e),e+=f.length;return g}},f={arraySet:function(a,b,c,d,e){for(var f=0;d>f;f++)a[e+f]=b[c+f]},flattenChunks:function(a){return[].concat.apply([],a)}};c.setTyped=function(a){a?(c.Buf8=Uint8Array,c.Buf16=Uint16Array,c.Buf32=Int32Array,c.assign(c,e)):(c.Buf8=Array,c.Buf16=Array,c.Buf32=Array,c.assign(c,f))},c.setTyped(d)},{}],2:[function(a,b,c){"use strict";function d(a,b){if(65537>b&&(a.subarray&&g||!a.subarray&&f))return String.fromCharCode.apply(null,e.shrinkBuf(a,b));for(var c="",d=0;b>d;d++)c+=String.fromCharCode(a[d]);return c}var e=a("./common"),f=!0,g=!0;try{String.fromCharCode.apply(null,[0])}catch(a){f=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(a){g=!1}for(var h=new e.Buf8(256),i=0;256>i;i++)h[i]=i>=252?6:i>=248?5:i>=240?4:i>=224?3:i>=192?2:1;h[254]=h[254]=1,c.string2buf=function(a){var b,c,d,f,g,h=a.length,i=0;for(f=0;h>f;f++)c=a.charCodeAt(f),55296===(64512&c)&&h>f+1&&(d=a.charCodeAt(f+1),56320===(64512&d)&&(c=65536+(c-55296<<10)+(d-56320),f++)),i+=128>c?1:2048>c?2:65536>c?3:4;for(b=new e.Buf8(i),g=0,f=0;i>g;f++)c=a.charCodeAt(f),55296===(64512&c)&&h>f+1&&(d=a.charCodeAt(f+1),56320===(64512&d)&&(c=65536+(c-55296<<10)+(d-56320),f++)),128>c?b[g++]=c:2048>c?(b[g++]=192|c>>>6,b[g++]=128|63&c):65536>c?(b[g++]=224|c>>>12,b[g++]=128|c>>>6&63,b[g++]=128|63&c):(b[g++]=240|c>>>18,b[g++]=128|c>>>12&63,b[g++]=128|c>>>6&63,b[g++]=128|63&c);return b},c.buf2binstring=function(a){return d(a,a.length)},c.binstring2buf=function(a){for(var b=new e.Buf8(a.length),c=0,d=b.length;d>c;c++)b[c]=a.charCodeAt(c);return b},c.buf2string=function(a,b){var c,e,f,g,i=b||a.length,j=new Array(2*i);for(e=0,c=0;i>c;)if(f=a[c++],128>f)j[e++]=f;else if(g=h[f],g>4)j[e++]=65533,c+=g-1;else{for(f&=2===g?31:3===g?15:7;g>1&&i>c;)f=f<<6|63&a[c++],g--;g>1?j[e++]=65533:65536>f?j[e++]=f:(f-=65536,j[e++]=55296|f>>10&1023,j[e++]=56320|1023&f)}return d(j,e)},c.utf8border=function(a,b){var c;for(b=b||a.length,b>a.length&&(b=a.length),c=b-1;c>=0&&128===(192&a[c]);)c--;return 0>c?b:0===c?b:c+h[a[c]]>b?c:b}},{"./common":1}],3:[function(a,b){"use strict";function c(a,b,c,d){for(var e=65535&a|0,f=a>>>16&65535|0,g=0;0!==c;){g=c>2e3?2e3:c,c-=g;do e=e+b[d++]|0,f=f+e|0;while(--g);e%=65521,f%=65521}return e|f<<16|0}b.exports=c},{}],4:[function(a,b){b.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],5:[function(a,b){"use strict";function c(){for(var a,b=[],c=0;256>c;c++){a=c;for(var d=0;8>d;d++)a=1&a?3988292384^a>>>1:a>>>1;b[c]=a}return b}function d(a,b,c,d){var f=e,g=d+c;a^=-1;for(var h=d;g>h;h++)a=a>>>8^f[255&(a^b[h])];return-1^a}var e=c();b.exports=d},{}],6:[function(a,b){"use strict";function c(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}b.exports=c},{}],7:[function(a,b){"use strict";var c=30,d=12;b.exports=function(a,b){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C;e=a.state,f=a.next_in,B=a.input,g=f+(a.avail_in-5),h=a.next_out,C=a.output,i=h-(b-a.avail_out),j=h+(a.avail_out-257),k=e.dmax,l=e.wsize,m=e.whave,n=e.wnext,o=e.window,p=e.hold,q=e.bits,r=e.lencode,s=e.distcode,t=(1<<e.lenbits)-1,u=(1<<e.distbits)-1;a:do{15>q&&(p+=B[f++]<<q,q+=8,p+=B[f++]<<q,q+=8),v=r[p&t];b:for(;;){if(w=v>>>24,p>>>=w,q-=w,w=v>>>16&255,0===w)C[h++]=65535&v;else{if(!(16&w)){if(0===(64&w)){v=r[(65535&v)+(p&(1<<w)-1)];continue b}if(32&w){e.mode=d;break a}a.msg="invalid literal/length code",e.mode=c;break a}x=65535&v,w&=15,w&&(w>q&&(p+=B[f++]<<q,q+=8),x+=p&(1<<w)-1,p>>>=w,q-=w),15>q&&(p+=B[f++]<<q,q+=8,p+=B[f++]<<q,q+=8),v=s[p&u];c:for(;;){if(w=v>>>24,p>>>=w,q-=w,w=v>>>16&255,!(16&w)){if(0===(64&w)){v=s[(65535&v)+(p&(1<<w)-1)];continue c}a.msg="invalid distance code",e.mode=c;break a}if(y=65535&v,w&=15,w>q&&(p+=B[f++]<<q,q+=8,w>q&&(p+=B[f++]<<q,q+=8)),y+=p&(1<<w)-1,y>k){a.msg="invalid distance too far back",e.mode=c;break a}if(p>>>=w,q-=w,w=h-i,y>w){if(w=y-w,w>m&&e.sane){a.msg="invalid distance too far back",e.mode=c;break a}if(z=0,A=o,0===n){if(z+=l-w,x>w){x-=w;do C[h++]=o[z++];while(--w);z=h-y,A=C}}else if(w>n){if(z+=l+n-w,w-=n,x>w){x-=w;do C[h++]=o[z++];while(--w);if(z=0,x>n){w=n,x-=w;do C[h++]=o[z++];while(--w);z=h-y,A=C}}}else if(z+=n-w,x>w){x-=w;do C[h++]=o[z++];while(--w);z=h-y,A=C}for(;x>2;)C[h++]=A[z++],C[h++]=A[z++],C[h++]=A[z++],x-=3;x&&(C[h++]=A[z++],x>1&&(C[h++]=A[z++]))}else{z=h-y;do C[h++]=C[z++],C[h++]=C[z++],C[h++]=C[z++],x-=3;while(x>2);x&&(C[h++]=C[z++],x>1&&(C[h++]=C[z++]))}break}}break}}while(g>f&&j>h);x=q>>3,f-=x,q-=x<<3,p&=(1<<q)-1,a.next_in=f,a.next_out=h,a.avail_in=g>f?5+(g-f):5-(f-g),a.avail_out=j>h?257+(j-h):257-(h-j),e.hold=p,e.bits=q}},{}],8:[function(a,b,c){"use strict";function d(a){return(a>>>24&255)+(a>>>8&65280)+((65280&a)<<8)+((255&a)<<24)}function e(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function f(a){var b;return a&&a.state?(b=a.state,a.total_in=a.total_out=b.total=0,a.msg="",b.wrap&&(a.adler=1&b.wrap),b.mode=K,b.last=0,b.havedict=0,b.dmax=32768,b.head=null,b.hold=0,b.bits=0,b.lencode=b.lendyn=new r.Buf32(oa),b.distcode=b.distdyn=new r.Buf32(pa),b.sane=1,b.back=-1,C):F}function g(a){var b;return a&&a.state?(b=a.state,b.wsize=0,b.whave=0,b.wnext=0,f(a)):F}function h(a,b){var c,d;return a&&a.state?(d=a.state,0>b?(c=0,b=-b):(c=(b>>4)+1,48>b&&(b&=15)),b&&(8>b||b>15)?F:(null!==d.window&&d.wbits!==b&&(d.window=null),d.wrap=c,d.wbits=b,g(a))):F}function i(a,b){var c,d;return a?(d=new e,a.state=d,d.window=null,c=h(a,b),c!==C&&(a.state=null),c):F}function j(a){return i(a,ra)}function k(a){if(sa){var b;for(p=new r.Buf32(512),q=new r.Buf32(32),b=0;144>b;)a.lens[b++]=8;for(;256>b;)a.lens[b++]=9;for(;280>b;)a.lens[b++]=7;for(;288>b;)a.lens[b++]=8;for(v(x,a.lens,0,288,p,0,a.work,{bits:9}),b=0;32>b;)a.lens[b++]=5;v(y,a.lens,0,32,q,0,a.work,{bits:5}),sa=!1}a.lencode=p,a.lenbits=9,a.distcode=q,a.distbits=5}function l(a,b,c,d){var e,f=a.state;return null===f.window&&(f.wsize=1<<f.wbits,f.wnext=0,f.whave=0,f.window=new r.Buf8(f.wsize)),d>=f.wsize?(r.arraySet(f.window,b,c-f.wsize,f.wsize,0),f.wnext=0,f.whave=f.wsize):(e=f.wsize-f.wnext,e>d&&(e=d),r.arraySet(f.window,b,c-d,e,f.wnext),d-=e,d?(r.arraySet(f.window,b,c-d,d,0),f.wnext=d,f.whave=f.wsize):(f.wnext+=e,f.wnext===f.wsize&&(f.wnext=0),f.whave<f.wsize&&(f.whave+=e))),0}function m(a,b){var c,e,f,g,h,i,j,m,n,o,p,q,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,Aa=0,Ba=new r.Buf8(4),Ca=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!a||!a.state||!a.output||!a.input&&0!==a.avail_in)return F;c=a.state,c.mode===V&&(c.mode=W),h=a.next_out,f=a.output,j=a.avail_out,g=a.next_in,e=a.input,i=a.avail_in,m=c.hold,n=c.bits,o=i,p=j,xa=C;a:for(;;)switch(c.mode){case K:if(0===c.wrap){c.mode=W;break}for(;16>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(2&c.wrap&&35615===m){c.check=0,Ba[0]=255&m,Ba[1]=m>>>8&255,c.check=t(c.check,Ba,2,0),m=0,n=0,c.mode=L;break}if(c.flags=0,c.head&&(c.head.done=!1),!(1&c.wrap)||(((255&m)<<8)+(m>>8))%31){a.msg="incorrect header check",c.mode=la;break}if((15&m)!==J){a.msg="unknown compression method",c.mode=la;break}if(m>>>=4,n-=4,wa=(15&m)+8,0===c.wbits)c.wbits=wa;else if(wa>c.wbits){a.msg="invalid window size",c.mode=la;break}c.dmax=1<<wa,a.adler=c.check=1,c.mode=512&m?T:V,m=0,n=0;break;case L:for(;16>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(c.flags=m,(255&c.flags)!==J){a.msg="unknown compression method",c.mode=la;break}if(57344&c.flags){a.msg="unknown header flags set",c.mode=la;break}c.head&&(c.head.text=m>>8&1),512&c.flags&&(Ba[0]=255&m,Ba[1]=m>>>8&255,c.check=t(c.check,Ba,2,0)),m=0,n=0,c.mode=M;case M:for(;32>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.head&&(c.head.time=m),512&c.flags&&(Ba[0]=255&m,Ba[1]=m>>>8&255,Ba[2]=m>>>16&255,Ba[3]=m>>>24&255,c.check=t(c.check,Ba,4,0)),m=0,n=0,c.mode=N;case N:for(;16>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.head&&(c.head.xflags=255&m,c.head.os=m>>8),512&c.flags&&(Ba[0]=255&m,Ba[1]=m>>>8&255,c.check=t(c.check,Ba,2,0)),m=0,n=0,c.mode=O;case O:if(1024&c.flags){for(;16>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.length=m,c.head&&(c.head.extra_len=m),512&c.flags&&(Ba[0]=255&m,Ba[1]=m>>>8&255,c.check=t(c.check,Ba,2,0)),m=0,n=0}else c.head&&(c.head.extra=null);c.mode=P;case P:if(1024&c.flags&&(q=c.length,q>i&&(q=i),q&&(c.head&&(wa=c.head.extra_len-c.length,c.head.extra||(c.head.extra=new Array(c.head.extra_len)),r.arraySet(c.head.extra,e,g,q,wa)),512&c.flags&&(c.check=t(c.check,e,q,g)),i-=q,g+=q,c.length-=q),c.length))break a;c.length=0,c.mode=Q;case Q:if(2048&c.flags){if(0===i)break a;q=0;do wa=e[g+q++],c.head&&wa&&c.length<65536&&(c.head.name+=String.fromCharCode(wa));while(wa&&i>q);if(512&c.flags&&(c.check=t(c.check,e,q,g)),i-=q,g+=q,wa)break a}else c.head&&(c.head.name=null);c.length=0,c.mode=R;case R:if(4096&c.flags){if(0===i)break a;q=0;do wa=e[g+q++],c.head&&wa&&c.length<65536&&(c.head.comment+=String.fromCharCode(wa));while(wa&&i>q);if(512&c.flags&&(c.check=t(c.check,e,q,g)),i-=q,g+=q,wa)break a}else c.head&&(c.head.comment=null);c.mode=S;case S:if(512&c.flags){for(;16>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(m!==(65535&c.check)){a.msg="header crc mismatch",c.mode=la;break}m=0,n=0}c.head&&(c.head.hcrc=c.flags>>9&1,c.head.done=!0),a.adler=c.check=0,c.mode=V;break;case T:for(;32>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}a.adler=c.check=d(m),m=0,n=0,c.mode=U;case U:if(0===c.havedict)return a.next_out=h,a.avail_out=j,a.next_in=g,a.avail_in=i,c.hold=m,c.bits=n,E;a.adler=c.check=1,
c.mode=V;case V:if(b===A||b===B)break a;case W:if(c.last){m>>>=7&n,n-=7&n,c.mode=ia;break}for(;3>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}switch(c.last=1&m,m>>>=1,n-=1,3&m){case 0:c.mode=X;break;case 1:if(k(c),c.mode=ba,b===B){m>>>=2,n-=2;break a}break;case 2:c.mode=$;break;case 3:a.msg="invalid block type",c.mode=la}m>>>=2,n-=2;break;case X:for(m>>>=7&n,n-=7&n;32>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if((65535&m)!==(m>>>16^65535)){a.msg="invalid stored block lengths",c.mode=la;break}if(c.length=65535&m,m=0,n=0,c.mode=Y,b===B)break a;case Y:c.mode=Z;case Z:if(q=c.length){if(q>i&&(q=i),q>j&&(q=j),0===q)break a;r.arraySet(f,e,g,q,h),i-=q,g+=q,j-=q,h+=q,c.length-=q;break}c.mode=V;break;case $:for(;14>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(c.nlen=(31&m)+257,m>>>=5,n-=5,c.ndist=(31&m)+1,m>>>=5,n-=5,c.ncode=(15&m)+4,m>>>=4,n-=4,c.nlen>286||c.ndist>30){a.msg="too many length or distance symbols",c.mode=la;break}c.have=0,c.mode=_;case _:for(;c.have<c.ncode;){for(;3>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.lens[Ca[c.have++]]=7&m,m>>>=3,n-=3}for(;c.have<19;)c.lens[Ca[c.have++]]=0;if(c.lencode=c.lendyn,c.lenbits=7,ya={bits:c.lenbits},xa=v(w,c.lens,0,19,c.lencode,0,c.work,ya),c.lenbits=ya.bits,xa){a.msg="invalid code lengths set",c.mode=la;break}c.have=0,c.mode=aa;case aa:for(;c.have<c.nlen+c.ndist;){for(;Aa=c.lencode[m&(1<<c.lenbits)-1],qa=Aa>>>24,ra=Aa>>>16&255,sa=65535&Aa,!(n>=qa);){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(16>sa)m>>>=qa,n-=qa,c.lens[c.have++]=sa;else{if(16===sa){for(za=qa+2;za>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(m>>>=qa,n-=qa,0===c.have){a.msg="invalid bit length repeat",c.mode=la;break}wa=c.lens[c.have-1],q=3+(3&m),m>>>=2,n-=2}else if(17===sa){for(za=qa+3;za>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}m>>>=qa,n-=qa,wa=0,q=3+(7&m),m>>>=3,n-=3}else{for(za=qa+7;za>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}m>>>=qa,n-=qa,wa=0,q=11+(127&m),m>>>=7,n-=7}if(c.have+q>c.nlen+c.ndist){a.msg="invalid bit length repeat",c.mode=la;break}for(;q--;)c.lens[c.have++]=wa}}if(c.mode===la)break;if(0===c.lens[256]){a.msg="invalid code -- missing end-of-block",c.mode=la;break}if(c.lenbits=9,ya={bits:c.lenbits},xa=v(x,c.lens,0,c.nlen,c.lencode,0,c.work,ya),c.lenbits=ya.bits,xa){a.msg="invalid literal/lengths set",c.mode=la;break}if(c.distbits=6,c.distcode=c.distdyn,ya={bits:c.distbits},xa=v(y,c.lens,c.nlen,c.ndist,c.distcode,0,c.work,ya),c.distbits=ya.bits,xa){a.msg="invalid distances set",c.mode=la;break}if(c.mode=ba,b===B)break a;case ba:c.mode=ca;case ca:if(i>=6&&j>=258){a.next_out=h,a.avail_out=j,a.next_in=g,a.avail_in=i,c.hold=m,c.bits=n,u(a,p),h=a.next_out,f=a.output,j=a.avail_out,g=a.next_in,e=a.input,i=a.avail_in,m=c.hold,n=c.bits,c.mode===V&&(c.back=-1);break}for(c.back=0;Aa=c.lencode[m&(1<<c.lenbits)-1],qa=Aa>>>24,ra=Aa>>>16&255,sa=65535&Aa,!(n>=qa);){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(ra&&0===(240&ra)){for(ta=qa,ua=ra,va=sa;Aa=c.lencode[va+((m&(1<<ta+ua)-1)>>ta)],qa=Aa>>>24,ra=Aa>>>16&255,sa=65535&Aa,!(n>=ta+qa);){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}m>>>=ta,n-=ta,c.back+=ta}if(m>>>=qa,n-=qa,c.back+=qa,c.length=sa,0===ra){c.mode=ha;break}if(32&ra){c.back=-1,c.mode=V;break}if(64&ra){a.msg="invalid literal/length code",c.mode=la;break}c.extra=15&ra,c.mode=da;case da:if(c.extra){for(za=c.extra;za>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.length+=m&(1<<c.extra)-1,m>>>=c.extra,n-=c.extra,c.back+=c.extra}c.was=c.length,c.mode=ea;case ea:for(;Aa=c.distcode[m&(1<<c.distbits)-1],qa=Aa>>>24,ra=Aa>>>16&255,sa=65535&Aa,!(n>=qa);){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(0===(240&ra)){for(ta=qa,ua=ra,va=sa;Aa=c.distcode[va+((m&(1<<ta+ua)-1)>>ta)],qa=Aa>>>24,ra=Aa>>>16&255,sa=65535&Aa,!(n>=ta+qa);){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}m>>>=ta,n-=ta,c.back+=ta}if(m>>>=qa,n-=qa,c.back+=qa,64&ra){a.msg="invalid distance code",c.mode=la;break}c.offset=sa,c.extra=15&ra,c.mode=fa;case fa:if(c.extra){for(za=c.extra;za>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.offset+=m&(1<<c.extra)-1,m>>>=c.extra,n-=c.extra,c.back+=c.extra}if(c.offset>c.dmax){a.msg="invalid distance too far back",c.mode=la;break}c.mode=ga;case ga:if(0===j)break a;if(q=p-j,c.offset>q){if(q=c.offset-q,q>c.whave&&c.sane){a.msg="invalid distance too far back",c.mode=la;break}q>c.wnext?(q-=c.wnext,oa=c.wsize-q):oa=c.wnext-q,q>c.length&&(q=c.length),pa=c.window}else pa=f,oa=h-c.offset,q=c.length;q>j&&(q=j),j-=q,c.length-=q;do f[h++]=pa[oa++];while(--q);0===c.length&&(c.mode=ca);break;case ha:if(0===j)break a;f[h++]=c.length,j--,c.mode=ca;break;case ia:if(c.wrap){for(;32>n;){if(0===i)break a;i--,m|=e[g++]<<n,n+=8}if(p-=j,a.total_out+=p,c.total+=p,p&&(a.adler=c.check=c.flags?t(c.check,f,p,h-p):s(c.check,f,p,h-p)),p=j,(c.flags?m:d(m))!==c.check){a.msg="incorrect data check",c.mode=la;break}m=0,n=0}c.mode=ja;case ja:if(c.wrap&&c.flags){for(;32>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(m!==(4294967295&c.total)){a.msg="incorrect length check",c.mode=la;break}m=0,n=0}c.mode=ka;case ka:xa=D;break a;case la:xa=G;break a;case ma:return H;case na:default:return F}return a.next_out=h,a.avail_out=j,a.next_in=g,a.avail_in=i,c.hold=m,c.bits=n,(c.wsize||p!==a.avail_out&&c.mode<la&&(c.mode<ia||b!==z))&&l(a,a.output,a.next_out,p-a.avail_out)?(c.mode=ma,H):(o-=a.avail_in,p-=a.avail_out,a.total_in+=o,a.total_out+=p,c.total+=p,c.wrap&&p&&(a.adler=c.check=c.flags?t(c.check,f,p,a.next_out-p):s(c.check,f,p,a.next_out-p)),a.data_type=c.bits+(c.last?64:0)+(c.mode===V?128:0)+(c.mode===ba||c.mode===Y?256:0),(0===o&&0===p||b===z)&&xa===C&&(xa=I),xa)}function n(a){if(!a||!a.state)return F;var b=a.state;return b.window&&(b.window=null),a.state=null,C}function o(a,b){var c;return a&&a.state?(c=a.state,0===(2&c.wrap)?F:(c.head=b,b.done=!1,C)):F}var p,q,r=a("../utils/common"),s=a("./adler32"),t=a("./crc32"),u=a("./inffast"),v=a("./inftrees"),w=0,x=1,y=2,z=4,A=5,B=6,C=0,D=1,E=2,F=-2,G=-3,H=-4,I=-5,J=8,K=1,L=2,M=3,N=4,O=5,P=6,Q=7,R=8,S=9,T=10,U=11,V=12,W=13,X=14,Y=15,Z=16,$=17,_=18,aa=19,ba=20,ca=21,da=22,ea=23,fa=24,ga=25,ha=26,ia=27,ja=28,ka=29,la=30,ma=31,na=32,oa=852,pa=592,qa=15,ra=qa,sa=!0;c.inflateReset=g,c.inflateReset2=h,c.inflateResetKeep=f,c.inflateInit=j,c.inflateInit2=i,c.inflate=m,c.inflateEnd=n,c.inflateGetHeader=o,c.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":1,"./adler32":3,"./crc32":5,"./inffast":7,"./inftrees":9}],9:[function(a,b){"use strict";var c=a("../utils/common"),d=15,e=852,f=592,g=0,h=1,i=2,j=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],k=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],m=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];b.exports=function(a,b,n,o,p,q,r,s){var t,u,v,w,x,y,z,A,B,C=s.bits,D=0,E=0,F=0,G=0,H=0,I=0,J=0,K=0,L=0,M=0,N=null,O=0,P=new c.Buf16(d+1),Q=new c.Buf16(d+1),R=null,S=0;for(D=0;d>=D;D++)P[D]=0;for(E=0;o>E;E++)P[b[n+E]]++;for(H=C,G=d;G>=1&&0===P[G];G--);if(H>G&&(H=G),0===G)return p[q++]=20971520,p[q++]=20971520,s.bits=1,0;for(F=1;G>F&&0===P[F];F++);for(F>H&&(H=F),K=1,D=1;d>=D;D++)if(K<<=1,K-=P[D],0>K)return-1;if(K>0&&(a===g||1!==G))return-1;for(Q[1]=0,D=1;d>D;D++)Q[D+1]=Q[D]+P[D];for(E=0;o>E;E++)0!==b[n+E]&&(r[Q[b[n+E]]++]=E);if(a===g?(N=R=r,y=19):a===h?(N=j,O-=257,R=k,S-=257,y=256):(N=l,R=m,y=-1),M=0,E=0,D=F,x=q,I=H,J=0,v=-1,L=1<<H,w=L-1,a===h&&L>e||a===i&&L>f)return 1;for(var T=0;;){T++,z=D-J,r[E]<y?(A=0,B=r[E]):r[E]>y?(A=R[S+r[E]],B=N[O+r[E]]):(A=96,B=0),t=1<<D-J,u=1<<I,F=u;do u-=t,p[x+(M>>J)+u]=z<<24|A<<16|B|0;while(0!==u);for(t=1<<D-1;M&t;)t>>=1;if(0!==t?(M&=t-1,M+=t):M=0,E++,0===--P[D]){if(D===G)break;D=b[n+r[E]]}if(D>H&&(M&w)!==v){for(0===J&&(J=H),x+=F,I=D-J,K=1<<I;G>I+J&&(K-=P[I+J],!(0>=K));)I++,K<<=1;if(L+=1<<I,a===h&&L>e||a===i&&L>f)return 1;v=M&w,p[v]=H<<24|I<<16|x-q|0}}return 0!==M&&(p[x+M]=D-J<<24|64<<16|0),s.bits=H,0}},{"../utils/common":1}],10:[function(a,b){"use strict";b.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],11:[function(a,b){"use strict";function c(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}b.exports=c},{}],"/lib/inflate.js":[function(a,b,c){"use strict";function d(a,b){var c=new n(b);if(c.push(a,!0),c.err)throw c.msg;return c.result}function e(a,b){return b=b||{},b.raw=!0,d(a,b)}var f=a("./zlib/inflate.js"),g=a("./utils/common"),h=a("./utils/strings"),i=a("./zlib/constants"),j=a("./zlib/messages"),k=a("./zlib/zstream"),l=a("./zlib/gzheader"),m=Object.prototype.toString,n=function(a){this.options=g.assign({chunkSize:16384,windowBits:0,to:""},a||{});var b=this.options;b.raw&&b.windowBits>=0&&b.windowBits<16&&(b.windowBits=-b.windowBits,0===b.windowBits&&(b.windowBits=-15)),!(b.windowBits>=0&&b.windowBits<16)||a&&a.windowBits||(b.windowBits+=32),b.windowBits>15&&b.windowBits<48&&0===(15&b.windowBits)&&(b.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new k,this.strm.avail_out=0;var c=f.inflateInit2(this.strm,b.windowBits);if(c!==i.Z_OK)throw new Error(j[c]);this.header=new l,f.inflateGetHeader(this.strm,this.header)};n.prototype.push=function(a,b){var c,d,e,j,k,l=this.strm,n=this.options.chunkSize;if(this.ended)return!1;d=b===~~b?b:b===!0?i.Z_FINISH:i.Z_NO_FLUSH,l.input="string"==typeof a?h.binstring2buf(a):"[object ArrayBuffer]"===m.call(a)?new Uint8Array(a):a,l.next_in=0,l.avail_in=l.input.length;do{if(0===l.avail_out&&(l.output=new g.Buf8(n),l.next_out=0,l.avail_out=n),c=f.inflate(l,i.Z_NO_FLUSH),c!==i.Z_STREAM_END&&c!==i.Z_OK)return this.onEnd(c),this.ended=!0,!1;l.next_out&&(0===l.avail_out||c===i.Z_STREAM_END||0===l.avail_in&&d===i.Z_FINISH)&&("string"===this.options.to?(e=h.utf8border(l.output,l.next_out),j=l.next_out-e,k=h.buf2string(l.output,e),l.next_out=j,l.avail_out=n-j,j&&g.arraySet(l.output,l.output,e,j,0),this.onData(k)):this.onData(g.shrinkBuf(l.output,l.next_out)))}while(l.avail_in>0&&c!==i.Z_STREAM_END);return c===i.Z_STREAM_END&&(d=i.Z_FINISH),d!==i.Z_FINISH||(c=f.inflateEnd(this.strm),this.onEnd(c),this.ended=!0,c===i.Z_OK)},n.prototype.onData=function(a){this.chunks.push(a)},n.prototype.onEnd=function(a){a===i.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):g.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg},c.Inflate=n,c.inflate=d,c.inflateRaw=e,c.ungzip=d},{"./utils/common":1,"./utils/strings":2,"./zlib/constants":4,"./zlib/gzheader":6,"./zlib/inflate.js":8,"./zlib/messages":10,"./zlib/zstream":11}]},{},[])("/lib/inflate.js")}),function(){function a(a,b){try{b()}catch(b){a.raiseError(c.ErrorCodes.BAD_DATA,"Unhandled exception while reading pack file",{url:a.url,exception:b.toString(),stack:b.stack})}}function b(b){function f(e){g.postMessage({url:b.url,workerId:b.workerId,progress:.5}),a(b,function(){for(var a=new d.PackFileReader(e),f=!1,h={estimateSizeOnly:!0,packNormals:"undefined"==typeof b.packNormals||b.packNormals},i=0,j=0,k=a.getEntryCounts();j<k;j++){var l=d.readGeometry(a,j,h);i+=l&&l.sharedBufferBytes||0}var m=i?new ArrayBuffer(i):null,n=0,o={packId:b.packId,workerId:b.workerId,progress:1,meshes:[],sharedBuffer:m},p=m?[m]:[];h={dstBuffer:m,startOffset:0,estimateSizeOnly:!1,packNormals:"undefined"==typeof b.packNormals||b.packNormals};for(var j=0,k=a.getEntryCounts();j<k;j++){h.startOffset=n;var l=d.readGeometry(a,j,h);l?(n+=l.sharedBufferBytes||0,o.meshes[j]=l):(f||(g.raiseError(c.ErrorCodes.BAD_DATA,"Unable to load geometry",{url:b.url}),f=!0),g.postMessage(o))}g.postMessage(o,p)})}var g=b.worker,h={skipAssetCallback:b.skipAssetCallback};e.ViewingService.getItem(b,b.url,f,b.onFailureCallback,h)}var c=Autodesk.Viewing,d=Autodesk.LMVTK,e=c.Private;d.doGeomLoad=b}(),function(){"use strict";function a(a,b){try{b()}catch(b){a.worker.raiseError(d.ErrorCodes.BAD_DATA,"Unhandled exception while loading SVF",{url:a.url,exception:b.toString(),stack:b.stack}),a.worker.postMessage(null)}}function b(b){var c=b.worker;a(b,function(){function a(a,f){if("svf"==a){var g,h,i=e.fragments,j=[i.transforms.buffer,i.packIds.buffer,i.entityIndexes.buffer,i.fragId2dbId.buffer];e.bvh?(h={nodes:e.bvh.nodes.getRawData(),primitives:e.bvh.primitives,useLeanNodes:32==e.bvh.nodes.bytes_per_node},j.push(h.nodes),j.push(h.primitives.buffer),j.push(i.boxes.buffer),j.push(i.polygonCounts.buffer),j.push(i.materials.buffer),g={svf:e,bvh:h,progress:1}):g={svf:e,progress:.8},c.postMessage(g,j)}else if("bvh"==a)h={nodes:e.bvh.nodes.getRawData(),primitives:e.bvh.primitives,useLeanNodes:32==e.bvh.nodes.bytes_per_node},c.postMessage({bvh:h,basePath:e.basePath,progress:1},[h.nodes,h.primitives.buffer]);else if("mesh"==a){var k=[];f.mesh&&k.push(f.mesh.vb.buffer),c.postMessage(f,k)}else"done"==a?c.postMessage({progress:1}):(c.raiseError(d.ErrorCodes.BAD_DATA,"Failure while loading SVF",{url:b.url}),c.postMessage(null))}var e=b.svf;b.loadDoneCB=a,e.loadRemainingSvf(b)})}function c(c){function d(d){g.postMessage({progress:.5}),a(c,function(){var a;a="gltf"===h||"glb"===h?new f.GltfPackage(d):c.perfOpt&&c.perfOpt.memoryOptimizedSvfLoading?new f.PackageLess(new Uint8Array(d)):new f.Package(new Uint8Array(d)),c.svf=a,a.loadManifest(c),c.interceptManifest?g.postMessage({manifest:a.manifest}):(c.manifest=a.manifest,b(c))})}var g=c.worker;g.postMessage({progress:.01});var h="svf",i=c.url.toLocaleLowerCase();i.lastIndexOf(".gltf")===i.length-5&&(h="gltf"),i.lastIndexOf(".glb")===i.length-4&&(h="glb");var j={responseType:"gltf"===h?"json":"arraybuffer"};e.ViewingService.getItem(c,c.url,d,c.onFailureCallback,j),e.ViewingService.getItem(c,c.basePath+"0.pf",function(){},function(){},j)}var d=Autodesk.Viewing,e=d.Private,f=Autodesk.LMVTK;f.doLoadSvf=c,f.doLoadSvfContinued=b}(),function(){"use strict";function a(a,b){this.pdb=null,this.waitingCallbacks=[],this.error=!1,this.dbPath=a,this.dbFiles=null,this.isShared=b}function b(a){this.data=a,this.refCount=1}function c(b,c,e){function f(){var a=[];return a.push({filename:"objects_attrs.json",storage:l.attrs}),a.push({filename:"objects_vals.json",storage:l.values}),a.push({filename:"objects_avs.json",storage:l.avs}),a.push({filename:"objects_offs.json",storage:l.offsets}),a.push({filename:"objects_ids.json",storage:l.ids}),a}function g(a){if(o--,a||p++,!o)if(p){if(n){for(h.error=!0,e(null);h.waitingCallbacks.length;)h.waitingCallbacks.shift()(null);return}n=!0,m=f(),o=m.length,p=0,m.forEach(function(a){d(a.filename,b,g,a.storage)})}else for(h.pdb=new j.PropertyDatabase(l),h.pdb.refCount=0,h.loaded=!0,h.dbFiles=m,e(h.pdb);h.waitingCallbacks.length;)h.waitingCallbacks.shift()(h.pdb)}b.worker.pdbCache||(b.worker.pdbCache={},b.worker.fileCache={});var h=b.worker.pdbCache[b.dbPath],i=!1;if(h?i=!0:b.worker.pdbCache[b.dbPath]=h=new a(b.dbPath,b.sharedDbPath),h.pdb)return void e(h.pdb);if(h.error)return void e(null);if(i)return void h.waitingCallbacks.push(e);var k=b.propertydb;if(!k)return b.worker.propdbFailed=!0,void e(null);var l={ids:{},attrs:{},offsets:{},values:{},avs:{}},m=[];m.push({filename:k.attrs.length?k.attrs[0]:"objects_attrs.json.gz",storage:l.attrs}),m.push({filename:k.values.length?k.values[0]:"objects_vals.json.gz",storage:l.values}),m.push({filename:k.avs.length?k.avs[0]:"objects_avs.json.gz",storage:l.avs}),m.push({filename:k.offsets.length?k.offsets[0]:"objects_offs.json.gz",storage:l.offsets}),m.push({filename:k.ids.length?k.ids[0]:"objects_ids.json.gz",storage:l.ids});var n=!1,o=m.length,p=0;m.forEach(function(a){d(a.filename,b,g,a.storage)})}function d(a,c,d,e){function f(a,b,e){404!==a&&c.onFailureCallback(a,b,e),d(null)}var g=(c.dbPath||"")+a,h=l.ViewingService.generateUrl(c.endpoint,"items",g),i=function(a){c.worker.fileCache[h]=new b(a),e[h]=a,d(a)},j=c.worker.fileCache[h];j?(j.refCount++,i(j.data)):l.ViewingService.getItem(c,g,i,f)}function e(a){function b(b){if(!b)return void d.postMessage({cbId:a.cbId,error:{instanceTree:null,maxTreeDepth:0}});b.refCount++,b.rootsDone||(b.idroots=b.findRootNodes(),b.objCount=b.getObjectCount(),b.rootsDone=!0);var c,e,f=[0],g=[],h=b.idroots;if(h&&h.length){if(e=new l.InstanceTreeStorage(b.getObjectCount(),a.fragToDbId?a.fragToDbId.length:0),1==h.length)c=h[0],b.buildObjectTree(c,a.fragToDbId,f,e);else{c=0;for(var i=[],j=0;j<h.length;j++)b.buildObjectTree(h[j],a.fragToDbId,f,e),i.push(h[j]);e.setNode(0,0,"",0,i,!1)}if(e.flatten(),g.push(e.nodes.buffer),g.push(e.children.buffer),a.fragBoxes){var k=new l.InstanceTreeAccess(e,c);k.computeBoxes(a.fragBoxes),g.push(k.nodeBoxes.buffer)}}d.postMessage({cbId:a.cbId,result:{rootId:c,instanceTreeStorage:e,instanceBoxes:k?k.nodeBoxes:void 0,maxTreeDepth:f[0],objectCount:b.objCount}},g)}var d=a.worker;c(a,null,b)}function f(a){var b=a.worker,c=b.pdbCache&&b.pdbCache[a.dbPath];if(c&&c.pdb){var d=c.pdb.bruteForceSearch(a.searchText,a.attributeNames,a.completeInfo);b.postMessage({cbId:a.cbId,result:d})}}function g(a){var b=a.worker,c=b.pdbCache&&b.pdbCache[a.dbPath];if(c&&c.pdb){var d=a.dbId,e=a.dbIds,f=a.propFilter,g=a.ignoreHidden;if("undefined"!=typeof e){var h=[];if(e&&e.length)for(var i=0;i<e.length;i++){var j=c.pdb.getObjectProperties(e[i],f,g);j&&h.push(j)}else for(var i=1,k=c.pdb.getObjectCount();i<=k;i++){var j=c.pdb.getObjectProperties(i,f,g);j&&h.push(j)}a.worker.postMessage({cbId:a.cbId,result:h})}else{var j=c.pdb.getObjectProperties(d,f);a.worker.postMessage({cbId:a.cbId,result:j})}}}function h(a){var b=a.worker,c=b.pdbCache&&b.pdbCache[a.dbPath];if(c&&c.pdb){var d=c.pdb.getExternalIdMapping();b.postMessage({cbId:a.cbId,result:d})}}function i(a){var b=a.worker;if(a.clearCaches)return b.pdbCache={},void(b.fileCache={});var c=b.pdbCache&&b.pdbCache[a.dbPath];if(c.pdb&&(c.pdb.refCount--,0===c.pdb.refCount&&(c.isShared||delete b.pdbCache[a.dbPath],!c.isShared)))for(var d in c.dbFiles){var e=c.dbFiles[d];for(var f in e.storage){var g=b.fileCache[f];g&&(g.refCount--,0===g.refCount&&delete b.fileCache[f])}}}var j=Autodesk.LMVTK,k=Autodesk.Viewing,l=k.Private;j.doBuildExternalIdMapping=h,j.doPropertyGet=g,j.doPropertySearch=f,j.doObjectTreeParse=e,j.doUnloadPropertyDb=i}(),function(){"use strict";function a(a){var b=a.worker,c=base64.decode(a.delta);c=c.split("").map(function(a){return a.charCodeAt(0)});for(var d=new Zlib.Inflate(c),e=d.decompress(),f="",g=0;g<e.length;g++)f+=String.fromCharCode(e[g]);f=JSON.parse(f),b.postMessage({cbId:a.cbId,index:a.index,res:f})}var b=Autodesk.LMVTK;b.doDecompressDelta=a}(),function(){"use strict";function a(a,b){try{b()}catch(b){a.raiseError(f.ErrorCodes.BAD_DATA,"",{exception:b.toString(),stack:b.stack}),a.postMessage(null)}}function b(a,b){var c=b.f2dLoadOptions.onDemandLoading?g.F2DOnDemand:g.F2D,d=a.f2d=new c(b.metadata,b.manifest,b.basePath,b.f2dLoadOptions);return d.F2D_MESH_COUNT_OLD=0,a.onDemandLoading&&(a.nextFrame=0,a.queuedMeshes=[],a.useFrames||d.load(b,a.frames[0])),d}function c(a,c){if(a.onDemandLoading){for(var d=0;d<a.requestQueue.length;++d)a.requestQueue[d]&&(a.requestQueue[d].promised?a.requestQueue[d].rendered=!1:a.requestQueue[d]=null);a.nextRequest=0}return b(a,c)}function d(b){var d=b.worker;if(d.postMessage({progress:.01}),b.data){if(d.postMessage({progress:.5}),b.f2dLoadOptions.onDemandLoading){var e=b.data;e instanceof Uint8Array||(e=new Uint8Array(e)),d.frames=[e],d.nextFrame=1,d.finalFrame=!0,d.initialLoadContext=b,d.onDemandLoading=!0,d.streamStates=[],d.requestQueue=[],d.promisedBuffers=[],d.parsePromiseRequest=!1}d.totalBufferCount=h,d.useFrames=!1;var g=c(d,b);if(d.onDemandLoading){var i={f2dframe:g};d.postMessage(i)}else b.loadDoneCB=function(a){if(a){var b={f2d:g};d.postMessage(b)}else d.raiseError(f.ErrorCodes.BAD_DATA,"",{}),d.postMessage(null)},a(d,function(){g.load(b,b.data)})}else d.postMessage(null)}function e(d){function e(){}function g(a,b){var c=o.saveState();n.streamStates[a+(0!=c.vbbCount)]=c,c.dataBuffer=b}function i(a){a>=n.streamStates.length&&(a=n.streamStates.length-1);for(var c,d=a;!(c=n.streamStates[d]);--d)if(d<=0)return void(o=b(n,n.initialLoadContext));var e=n.frames[c.dataBuffer];o.stream&&o.stream.buffer==e&&(e=null),o.restoreState(c,e)?(n.queuedMeshes.length=0,o.F2D_MESH_COUNT_OLD=d-(0!=c.vbbCount),n.nextFrame=c.dataBuffer+1):o=b(n,n.initialLoadContext)}function j(a){return!(o.F2D_MESH_COUNT_OLD<d.bufferId)||(++o.F2D_MESH_COUNT_OLD,!1)}function k(){for(var a=n.nextRequest;a<n.requestQueue.length;){var b=n.requestQueue[a];if(b&&b.rendered)return n.nextRequest=a,b;++a}return null}function l(){d=k();var b=n.parsePromiseRequest;if(n.parsePromiseRequest=!0,b||!d)for(var c;n.promisedBuffers.length>0;)if(c=n.requestQueue[n.promisedBuffers.shift()],c&&c.promised){d=c,n.parsePromiseRequest=!1;break}if(d){if(d.loadDoneCB=e,d.acceptMeshCB=j,0==n.streamStates.length&&g(0,0),o&&(d.bufferId<o.F2D_MESH_COUNT_OLD||d.bufferId>o.F2D_MESH_COUNT_OLD+n.queuedMeshes.length)&&i(d.bufferId),o.F2D_MESH_COUNT_OLD+=n.queuedMeshes.splice(0,d.bufferId-o.F2D_MESH_COUNT_OLD).length,d.bufferId<o.F2D_MESH_COUNT_OLD+n.queuedMeshes.length)o.meshes=n.queuedMeshes.splice(0,1),d.finalFrame=n.finalFrame&&n.nextFrame==n.frames.length&&0==n.queuedMeshes.length&&null==o.stream&&n.totalBufferCount==h,m(!0,!0);else for(var f=d.bufferId;f<=d.bufferId;){if(null==o.stream){if(!(n.nextFrame<n.frames.length)){if(n.finalFrame&&0==n.queuedMeshes.length)break;return}d.data=n.frames[n.nextFrame++]}n.nextFrame>=n.frames.length&&(d.finalFrame=n.finalFrame),a(n,function(){o.loadFrames(d)}),n.queuedMeshes=n.queuedMeshes.concat(o.meshes),o.F2D_MESH_COUNT_OLD+=n.queuedMeshes.splice(0,d.bufferId-o.F2D_MESH_COUNT_OLD).length,o.meshes=n.queuedMeshes.splice(0,1),o.meshes.length&&(d.finalFrame=n.finalFrame&&n.nextFrame==n.frames.length&&0==n.queuedMeshes.length&&null==o.stream&&n.totalBufferCount==h,m(!0,!0),f=o.F2D_MESH_COUNT_OLD,n.streamStates[o.F2D_MESH_COUNT_OLD+n.queuedMeshes.length]||g(o.F2D_MESH_COUNT_OLD+n.queuedMeshes.length,n.nextFrame-1))}if(d.bufferId==n.nextRequest&&++n.nextRequest,n.requestQueue[d.bufferId]=null,d.promised){var p=n.promisedBuffers.indexOf(d.bufferId);p>=0&&n.promisedBuffers.splice(p,1)}n.timer=setTimeout(l,2)}}function m(a,b){if(a){if(!o.meshes.length&&!b)return;var c={f2dframe:!0,meshes:o.meshes,baseIndex:o.F2D_MESH_COUNT_OLD,bbox:o.bbox};o.F2D_MESH_COUNT_OLD+=o.meshes.length,d.finalFrame&&(c.cumulativeProps={maxObjectNumber:o.maxObjectNumber,viewports:o.viewports,clips:o.clips,strings:o.strings,stringDbIds:o.stringDbIds,stringBoxes:o.stringBoxes},c.finalFrame=b,n.totalBufferCount=o.F2D_MESH_COUNT_OLD,n.onDemandLoading&&n.requestQueue.splice(n.totalBufferCount));for(var e=[],g=0,h=o.meshes.length;g<h;++g)e.push(o.meshes[g].vb.buffer),e.push(o.meshes[g].indices.buffer);n.postMessage(c,e),o.meshes=[]}else n.raiseError(f.ErrorCodes.BAD_DATA,"",{}),n.postMessage(null)}var n=d.worker,o=n.f2d;if(!o&&d.data){n.postMessage({progress:.5}),d.f2dLoadOptions.onDemandLoading&&(n.frames=[],n.finalFrame=!1,n.initialLoadContext=d,n.onDemandLoading=!0,n.streamStates=[],n.requestQueue=[],n.promisedBuffers=[],n.parsePromiseRequest=!1),n.totalBufferCount=h,n.useFrames=!0,o=c(n,d);var p={f2dframe:o};n.postMessage(p)}if(n.onDemandLoading){if(d.data){var q=d.data;q instanceof Uint8Array||(q=new Uint8Array(q)),n.frames.push(q),d.finalFrame&&(n.finalFrame=!0)}else if(d.finalFrame)n.finalFrame=!0;else if(d.cancel)o&&(o=c(n,n.initialLoadContext)),n.postMessage({canceled:!0});else if(d.cancelPromise){var r=n.requestQueue[d.cancelPromise];r&&(r.rendered?r.promise=!1:n.requestQueue[d.cancelPromise]=null);var s=n.promisedBuffers.indexOf(d.cancelPromise);s>=0&&n.promisedBuffers.splice(s,1)}else if(d.bufferId>=0&&d.bufferId<n.totalBufferCount){var r=n.requestQueue[d.bufferId];d.conditional&&!r||(d.promised&&n.promisedBuffers.push(d.bufferId),r&&(d.promised|=r.promised,d.rendered|=r.rendered),n.requestQueue[d.bufferId]=d)}o&&(n.timer&&clearTimeout(n.timer),n.timer=setTimeout(l,2))}else d.loadDoneCB=m,a(n,function(){o.loadFrames(d)})}var f=Autodesk.Viewing,g=Autodesk.LMVTK,h=1e20;g.doParseF2D=d,g.doParseF2DFrame=e}(),function(){"use strict";function a(a,b,c){var e=a.basePath+b;d.ViewingService.getItem(a,e,c,null)}function b(b){function g(a){if(n.length<a.length+o){var b=Math.max(2*n.length,a.length+o),c=new Uint8Array(b);c.set(n),n=c}n.set(a,o),o+=a.length}function h(a){p=a}function i(a,b,h){function i(c){if(m.postMessage({type:"F2DAssetURL",urls:t}),t=null,f){var d={type:"F2DSTREAM",finalFrame:!0,finished:!0,progress:1};return z||(d.manifest=b,d.metadata=h,d.basePath=a.basePath,z=!0),m.debug("Total text bytes count : "+c.length),void m.postMessage(d)}n.length>o&&(n=new Uint8Array(n.buffer.slice(0,o)));var e;if(31==n[0]&&139==n[1])try{e=new Uint8Array(n.buffer,0,o),e=new Zlib.Gunzip(e).decompress()}catch(a){}var d={type:"F2DBLOB",metadata:h,manifest:b,basePath:a.basePath,progress:1,buffer:e.buffer},g=[];g.push(e.buffer),m.postMessage(d,g)}function j(){if(f){if(x&&(x=!1,31==n[0]&&139==n[1]))return d.logger.error("F2D streaming broken by non-streaming unzip!",c.errorCodeString(c.ErrorCodes.BAD_DATA)),void(f=!1);var e=new Uint8Array(n.buffer,y,o-y);try{var g=w.load(e);if(g.frameEnd>g.frameStart){var i=n.buffer.slice(y+g.frameStart,y+g.frameEnd);y+=g.frameEnd;var j=[];j.push(i);var k={type:"F2DSTREAM",frames:i,finalFrame:!1};l&&(k.progress=y/l),z||(k.manifest=b,k.metadata=h,k.basePath=a.basePath,z=!0),m.postMessage(k,j)}}catch(a){debug(a)}}}function k(a){g(a),j()}var l,m=a.worker,s=a.url,t=[];if(b&&b.assets)for(var u=b.assets,v=0;v<u.length;v++)if(s.indexOf(u[v].URI)!=-1){l=u[v].usize||0;break}var w=new e.F2DProbe,x=!0,y=0,z=!1;r=i,q=k,o>0&&j(),null!=p&&i(p)}var j=b.worker;j.postMessage({progress:.01});var k,l,m=0,n=new Uint8Array(65536),o=0,p=null,q=g,r=h;d.ViewingService.getItem(b,b.url,function(a){r(a)},b.onFailureCallback,{ondata:function(a){q(a)},responseType:""}),a(b,"metadata.json.gz",function(a){try{k=JSON.parse(e.utf8ArrayToString(a)),m++}catch(a){self.raiseError(c.ErrorCodes.BAD_DATA,"")}2===m&&i(b,l,k)}),a(b,"manifest.json.gz",function(a){try{a&&(l=JSON.parse(e.utf8ArrayToString(a))),m++}catch(a){}2===m&&i(b,l,k)})}var c=Autodesk.Viewing,d=c.Private,e=Autodesk.LMVTK,f=!0;e.doStreamF2D=b}();var av=Autodesk.Viewing;av.ErrorCodes={UNKNOWN_FAILURE:1,BAD_DATA:2,NETWORK_FAILURE:3,NETWORK_ACCESS_DENIED:4,NETWORK_FILE_NOT_FOUND:5,NETWORK_SERVER_ERROR:6,NETWORK_UNHANDLED_RESPONSE_CODE:7,BROWSER_WEBGL_NOT_SUPPORTED:8,BAD_DATA_NO_VIEWABLE_CONTENT:9,BROWSER_WEBGL_DISABLED:10,BAD_DATA_MODEL_IS_EMPTY:11,RTC_ERROR:12,UNSUPORTED_FILE_EXTENSION:13,VIEWER_INTERNAL_ERROR:14},av.errorCodeString=function(a){return"ErrorCode:"+a+"."},function(){var a=Autodesk.LMVTK,b=Autodesk.Viewing,c=b.Private;c.logger=c.logger||console,c.workerMain=function(b){if(b.hasOwnProperty("operation")){if(b.basePath="",b.url){var d=b.url.lastIndexOf("/");d!=-1&&(b.basePath=b.url.substr(0,d+1))}b.raiseError=function(){b.worker.raiseError.apply(b.worker,arguments)},b.onFailureCallback=c.ViewingService.defaultFailureCallback.bind(b);var e=b.operation;switch(e){case"LOAD_GEOMETRY":a.doGeomLoad(b);break;case"LOAD_SVF":a.doLoadSvf(b);break;case"LOAD_SVF_CONTD":a.doLoadSvfContinued(b);break;case"GET_PROPERTIES":a.doPropertyGet(b);break;case"SEARCH_PROPERTIES":a.doPropertySearch(b);break;case"BUILD_EXTERNAL_ID_MAPPING":a.doBuildExternalIdMapping(b);break;case"LOAD_PROPERTYDB":a.doObjectTreeParse(b);break;case"UNLOAD_PROPERTYDB":a.doUnloadPropertyDb(b);break;case"PARSE_F2D":a.doParseF2D(b);break;case"PARSE_F2D_FRAME":a.doParseF2DFrame(b);break;case"STREAM_F2D":a.doStreamF2D(b);break;case"DECOMPRESS_DELTA":a.doDecompressDelta(b);break;case"POPULATE_CACHE":a.doPopulateCache(b);break;case"DECODE_ENVMAP":a.doDecodeEnvmap(b)}}}}();var avp=Autodesk.Viewing.Private,ENABLE_OCTM_MG2=!1,IS_WORKER="undefined"!=typeof self&&"undefined"==typeof window;IS_WORKER&&(avp.initializeLegacyNamespaces(!0),self.addEventListener("message",function(a){var b=a.data;b.worker=self,avp.workerMain(b)},!1),self.raiseError=function(a,b,c){self.postMessage({error:{code:a,msg:b,args:c}})},self.debug=debug);